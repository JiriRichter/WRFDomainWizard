((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("stream"),require("events"),require("buffer"),require("util")):"function"==typeof define&&define.amd?define(["exports","stream","events","buffer","util"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).WRF=t.WRF||{},t.require$$0,t.require$$2,t.require$$0$1,t.require$$1)})(this,function(N,O,I,P,z){function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function R(t,e,i,n,s,r,a){try{var o=t[r](a),h=o.value}catch(t){return i(t)}o.done?e(h):Promise.resolve(h).then(n,s)}function C(o){return function(){var t=this,a=arguments;return new Promise(function(e,i){var n=o.apply(t,a);function s(t){R(n,e,i,s,r,"next",t)}function r(t){R(n,e,i,s,r,"throw",t)}s(void 0)})}}function D(t,e,i){e=q(e);var n=t,e=W()?Reflect.construct(e,i||[],q(t).constructor):e.apply(t,i);if(!e||"object"!=typeof e&&"function"!=typeof e){if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(e=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function r(t,e,i){return e&&F(t.prototype,e),i&&F(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t,e){var i,n,s,r,a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(a)return s=!(n=!0),{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,i=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw i}}};if(Array.isArray(t)||(a=et(t))||e)return a&&(t=a),r=0,{s:e=function(){},n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(t,e,i){return(e=J(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}function W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(W=function(){return!!t})()}function G(){G=function(){return a};var h,a={},t=Object.prototype,l=t.hasOwnProperty,d=Object.defineProperty||function(t,e,i){t[e]=i.value},e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",s=e.toStringTag||"@@toStringTag";function r(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{r({},"")}catch(h){r=function(t,e,i){return t[e]=i}}function o(t,e,i,n){var s,r,a,o,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),n=new L(n||[]);return d(e,"_invoke",{value:(s=t,r=i,a=n,o=c,function(t,e){if(o===f)throw Error("Generator is already running");if(o===_){if("throw"===t)throw e;return{value:h,done:!0}}for(a.method=t,a.arg=e;;){var i=a.delegate;if(i){i=function t(e,i){var n=i.method,s=e.iterator[n];if(s===h)return i.delegate=null,"throw"===n&&e.iterator.return&&(i.method="return",i.arg=h,t(e,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;n=u(s,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,g;s=n.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=h),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}(i,a);if(i){if(i===g)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(o===c)throw o=_,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o=f;i=u(s,r,a);if("normal"===i.type){if(o=a.done?_:p,i.arg===g)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(o=_,a.method="throw",a.arg=i.arg)}})}),e}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}a.wrap=o;var c="suspendedStart",p="suspendedYield",f="executing",_="completed",g={};function m(){}function y(){}function v(){}var e={},b=(r(e,n,function(){return this}),Object.getPrototypeOf),b=b&&b(b(E([]))),w=(b&&b!==t&&l.call(b,n)&&(e=b),v.prototype=m.prototype=Object.create(e));function x(t){["next","throw","return"].forEach(function(e){r(t,e,function(t){return this._invoke(e,t)})})}function M(a,o){var e;d(this,"_invoke",{value:function(i,n){function t(){return new o(function(t,e){!function e(t,i,n,s){var r,t=u(a[t],a,i);if("throw"!==t.type)return(i=(r=t.arg).value)&&"object"==typeof i&&l.call(i,"__await")?o.resolve(i.__await).then(function(t){e("next",t,n,s)},function(t){e("throw",t,n,s)}):o.resolve(i).then(function(t){r.value=t,n(r)},function(t){return e("throw",t,n,s)});s(t.arg)}(i,n,t,e)})}return e=e?e.then(t,t):t()}})}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(e){if(e||""===e){var i,t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return i=-1,(t=function t(){for(;++i<e.length;)if(l.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=h,t.done=!0,t}).next=t}throw new TypeError(typeof e+" is not iterable")}return d(w,"constructor",{value:y.prototype=v,configurable:!0}),d(v,"constructor",{value:y,configurable:!0}),y.displayName=r(v,s,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,r(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},a.awrap=function(t){return{__await:t}},x(M.prototype),r(M.prototype,i,function(){return this}),a.AsyncIterator=M,a.async=function(t,e,i,n,s){void 0===s&&(s=Promise);var r=new M(o(t,e,i,n),s);return a.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},x(w),r(w,s,"Generator"),r(w,n,function(){return this}),r(w,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,i=Object(t),n=[];for(e in i)n.push(e);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&l.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function t(t,e){return r.type="throw",r.arg=i,n.next=t,e&&(n.method="next",n.arg=h),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var s=this.tryEntries[e],r=s.completion;if("root"===s.tryLoc)return t("end");if(s.tryLoc<=this.prev){var a=l.call(s,"catchLoc"),o=l.call(s,"finallyLoc");if(a&&o){if(this.prev<s.catchLoc)return t(s.catchLoc,!0);if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return t(s.catchLoc,!0)}else{if(!o)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return t(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}var r=(s=s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc?null:s)?s.completion:{};return r.type=t,r.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),S(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i,n,s=this.tryEntries[e];if(s.tryLoc===t)return"throw"===(i=s.completion).type&&(n=i.arg,S(s)),n}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:E(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=h),g}},a}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function H(t,e){return(t=>{if(Array.isArray(t))return t})(t)||((t,e)=>{var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,s,r,a,o=[],h=!0,l=!1;try{if(r=(i=i.call(t)).next,0!==e)for(;!(h=(n=r.call(i)).done)&&(o.push(n.value),o.length!==e);h=!0);}catch(t){l=!0,s=t}finally{try{if(!h&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw s}}return o}})(t,e)||et(t,e)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function J(t){t=((t,e)=>{if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===e?String:Number)(t);if("object"!=typeof(i=i.call(t,e||"default")))return i;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==typeof t?t:t+""}function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){var i;if(t)return"string"==typeof t?B(t,e):"Map"===(i="Object"===(i={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(t,e):void 0}function it(t){var i="function"==typeof Map?new Map:void 0;return(it=function(t){if(null===t||!(e=>{try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}})(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return function(t,e,i){var n;return W()?Reflect.construct.apply(null,arguments):((n=[null]).push.apply(n,e),e=new(t.bind.apply(t,n)),i&&Z(e,i.prototype),e)}(t,arguments,q(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Z(e,t)})(t)}var nt=r(function t(n,e){X(this,t);var s,r=[],a=[],o=0;this.addElevationDataOverlay=function(t,e){var i="elevation-data-overlay-"+o;a.push({name:t,overlay:e}),o++,t=$('<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="'+i+'" data-overlay-name="'+t+'"><label class="custom-control-label" for="'+i+'">'+t+'</label><div class="elevation-data-history" style="display:none;"></div></div>'),s.append(t),e.downloadHistory=$("div.elevation-data-history",t),$("input#"+i,t).on("click",{overlay:e,map:n},function(t){this.checked?t.data.overlay.addTo(t.data.map):t.data.overlay.remove()}),e.on("elevationDataDownload",function(t){var e,i;e=t.source.downloadHistory,i=t.filename,r.includes(t=t.downloadUrl)||(r.push(t),e.append('<div><a href="'+t+'" title="'+t+'" target="_blank">'+i+"</a></div>"),e.show())})},e=$("#elevation-data",e.getContainer()),s=$("div.elevation-data-overlays",e),$("button",e).on("click",function(t){$.each(a,function(){this.overlay.clearDownloaded(),this.overlay.downloadHistory.empty()})})});var st=L.LayerGroup.extend({_defaultOptions:{},_lineOptions:{stroke:!0,color:"purple",opacity:1,weight:2,dashArray:"4 6",interactive:!1},_textOptions:{offset:-5,repeat:!0},_map:null,_lines:null,initialize:function(t){var e=this;this._lines=[this._createLine(this._arcticCirle,"Arctic Circle"),this._createLine(this._antarcticCirle,"Antarctic Circle"),this._createLine(this._primeMeridian,"Prime Meridian"),this._createLine(this._equator,"Equator"),this._createLine(this._tropicOfCancer,"Tropic of Cancer"),this._createLine(this._tropicOfCapricorn,"Tropic of Capricorn")],this._internationalDateLine.forEach(function(t){e._lines.push(e._createLine(t.map(function(t){return[t[1],t[0]]}),"International Date Line"))}),L.LayerGroup.prototype.initialize.call(this,this._lines,Object.assign({},this._defaultOptions,t))},_arcticCirle:[[66.566667,-180],[66.566667,0],[66.566667,180]],_antarcticCirle:[[-66.563833,-180],[-66.563833,0],[-66.563833,180]],_primeMeridian:[[-90,0],[0,0],[90,0]],_equator:[[0,-180],[0,0],[0,180]],_tropicOfCancer:[[23.43615,-180],[23.43615,0],[23.43615,180]],_tropicOfCapricorn:[[-23.43615,-180],[-23.43615,0],[-23.43615,180]],_internationalDateLine:[[[180.00125809707686,-51.003774291230535],[180.0033129137219,-51.49551639693058],[180,-51.999999906277594],[180,-52.49999984841105],[180,-52.99999979054451],[180,-53.49999973267808],[180,-53.99999967481159],[180,-54.49999961694505],[180,-54.99999955907856],[180,-55.49999950121202],[180,-55.99999944334559],[180,-56.49999938547904],[180,-56.99999932761256],[180,-57.49999926974601],[180,-57.99999921187958],[180,-58.49999915401304],[180,-58.99999909614655],[180,-59.49999903828001],[180,-59.99999898041358],[180,-60.499998922547036],[180,-60.999998864680606],[180,-61.499998806814006],[180,-61.999998748947576],[180,-62.49999869108103],[180,-62.9999986332146],[180,-63.499998575348],[180,-63.99999851748157],[180,-64.49999845961503],[180,-64.9999984017486],[180,-65.49999834388211],[180,-65.99999828601557],[180,-66.49999822814902],[180,-66.99999817028254],[180,-67.499998112416],[180,-67.99999805454956],[180,-68.49999799668308],[180,-68.99999793881653],[180,-69.4999978809501],[180,-69.99999782308356],[180,-70.49999776521707],[180,-70.99999770735053],[180,-71.49999764948399],[180,-71.99999759161756],[180,-72.49999753375107],[180,-72.99999747588453],[180,-73.4999974180181],[180,-73.99999736015155],[180,-74.49999730228507],[180,-74.99999724441852],[180,-75.4999971865521],[180,-75.9999971286855],[180,-76.49999707081906],[180,-76.99999701295252],[180,-77.49999695508609],[180,-77.99999689721955],[180,-78.49999683935306],[180,-78.99999678148652],[180,-79.49999672362009],[180,-79.9999966657536],[180,-80.49999660788706],[180,-80.99999655002051],[180,-81.49999649215408],[180,-81.9999964342876],[180,-82.49999637642105],[180,-82.99999631855451],[180,-83.49999626068808],[180,-83.99999620282159],[180,-84.49999614495505],[180,-84.9999960870885],[180,-85.49999602922207],[180,-85.99999597135559],[180,-86.49999591348904],[180,-86.99999585562261],[180,-87.49999579775601],[180,-87.99999573988958],[180,-88.49999568202304],[180,-88.99999562415655],[180,-89.49999556629001],[180,-89.99999550842358]],[[-179.99997104515307,-2.509433512836307],[-179.52243587869717,-2.509433512608187],[-178.9807967829974,-2.509433512349445],[-178.50686257424397,-2.509433512123044],[-178.03292836550668,-2.509433511896645],[-177.52514171328818,-2.509433511654073],[-177.0173550610535,-2.509433511411502],[-176.50956840885115,-2.50943351116893],[-175.90022442618894,-2.509433510877845],[-175.42629021745165,-2.509433510651445],[-174.98620845216328,-2.509433510441216],[-174.51227424345836,-2.509433510214816],[-173.97063514774243,-2.509433509956073],[-173.46284849566948,-2.509433509713503],[-172.95506184337012,-2.509433509470931],[-172.51498007804938,-2.509433509260703],[-172.00719342583085,-2.509433509018131],[-171.46555433021973,-2.50943350898213],[-171.02547256495367,-2.509433509112815],[-170.5176859127452,-2.509433509263605],[-170.00989926051665,-2.509433509414395],[-169.53596505175923,-2.509433509555132],[-168.96047351260842,-2.509433509726027],[-168.4526868603598,-2.509433509876817],[-167.94490020817142,-2.509433510027607],[-167.3567705984319,-2.509433510202255],[-166.73344279716918,-2.509433510387356],[-166.22698895864679,-2.50943351053775],[-165.68157713258094,-2.509433510699712],[-165.12642580958004,-2.509433510864568],[-164.63945096484676,-2.509433511009178],[-164.07456014498024,-2.509433511176925],[-163.50966932506745,-2.509433511344672],[-162.96425749897267,-2.509433511506635],[-162.43832466669016,-2.509433511662813],[-161.89291284057802,-2.509433511824776],[-161.38645900207877,-2.50943351197517],[-160.88000516355063,-2.509433512125564],[-160.37355132503404,-2.509433512275959],[-159.9060554740841,-2.509433512414784],[-159.4969966045188,-2.509433512536256],[-159.04897974735795,-2.509433512669297],[-158.4865713546375,-2.509433512836307],[-158.48657135463745,-1.932251930971415],[-158.48657135463742,-1.445277086243941],[-158.48657135463736,-1.016739222883756],[-158.4865713546373,-.62715934710176],[-158.48657135463728,-.228073404634912],[-158.94327470606876,.138068983191904],[-159.33017869792837,.448252718422208],[-159.63162653355062,.689925633661372],[-159.9900114000082,.977245379300379],[-160.2891079468391,1.217033249269297],[-160.639768712542,1.498160527335493],[-160.63976871261212,1.983025820632832],[-160.63976871268812,2.508958652946959],[-160.63976871275855,2.995933497680071],[-160.63976871283455,3.5218663299773],[-160.6397687129134,4.067278156074896],[-160.63976871297817,4.515295013226993],[-160.6397687130392,4.937315428082729],[-160.0034504430375,4.937315428082729],[-159.47751761073184,4.937315428082729],[-158.99054276600435,4.937315428082729],[-158.50356792127687,4.937315428082729],[-157.9971140827603,4.937315428082729],[-157.4906602442437,4.937315428082728],[-156.98420640572715,4.937315428082728],[-156.47775256721056,4.937315428082728],[-156.01999621316673,4.937315428082729],[-155.52863393116675,4.937315428082729],[-155.34358244032686,4.440358715492633],[-155.1566113010309,3.93824677728544],[-154.94815780081225,3.3784438504008],[-154.74207633449288,2.825011032523971],[-154.56222129689453,2.342009421340204],[-154.40073059362982,1.908325322692539],[-154.22812571355882,1.444794046139374],[-154.04915072448006,.964155809696339],[-153.89003205511452,.536841820056472],[-153.72426372574768,.068728874079682],[-153.55187136875537,-.371290409830009],[-153.3649002294594,-.873402348037196],[-153.17318502236498,-1.388254504260015],[-152.9982081083948,-1.858155889820966],[-152.82397718711445,-2.326053908248409],[-152.6457481907255,-2.804688777557893],[-152.44529084072406,-3.343018002678394],[-152.2710599194437,-3.81091602110582],[-152.11993740029536,-4.216756308981527],[-151.95282258071265,-4.665544000385537],[-151.80644412936277,-5.058644070245614],[-151.65206952779567,-5.473217841869862],[-151.47472057992624,-5.949489336438642],[-151.30523372644433,-6.404647136850451],[-151.13100280516397,-6.872545155277875],[-150.97574815507735,-7.289482301642839],[-150.81513750033213,-7.720803025549777],[-150.6019399323151,-8.293346170450048],[-150.38474428918946,-8.876626166232372],[-150.17466474776148,-9.440795834991272],[-150.00023316037058,-9.90923274327129],[-150.00016801218877,-10.50025628547553],[-150.00019926131836,-11.000177884848654],[-150.00023316120186,-11.645359271235485],[-150.62431493358625,-11.645359271235485],[-151.15024776589192,-11.645359271235485],[-151.59826462304122,-11.645359271235485],[-152.10471846155778,-11.645359271235485],[-152.61117230007437,-11.645359271235485],[-153.11762613859096,-11.645359271235485],[-153.64355897089663,-11.645359271235485],[-154.0915758280459,-11.645359271235485],[-154.56615865556606,-11.645359271235485],[-154.69737191344396,-11.142520356713785],[-154.81676110369585,-10.684993946633012],[-154.92187359344564,-10.282179085518584],[-155.03753735129658,-9.838929375939893],[-155.1567181985145,-9.38220138353979],[-155.26658958843166,-8.961149339436588],[-155.39425476821796,-8.471907463545627],[-155.50991852606887,-8.028657753966943],[-155.62206519455276,-7.598886327209675],[-155.74000423097038,-7.146917234976939],[-155.86539413218998,-6.666394741740031],[-155.97629898987353,-6.241382215150122],[-156.08043825517493,-5.842296970487039],[-156.5387116600836,-5.842296970543612],[-157.06332167659238,-5.842296970608372],[-157.71283883987974,-5.842296970688552],[-158.3123931444673,-5.842296970762565],[-158.9119474490457,-5.842296970836578],[-159.5614646123484,-5.842296970916758],[-160.21098177564807,-5.842296970996939],[-160.8604989389416,-5.842296971077118],[-161.48503467288367,-5.842296971154215],[-162.13455183618024,-5.842296971234395],[-162.73410614074317,-5.842296971308407],[-163.30867901598248,-5.842296971379337],[-163.9332147499215,-5.842296971456433],[-164.632694771927,-5.84229697154278],[-165.3321747939449,-5.842296971629128],[-165.93172909851705,-5.84229697170314],[-166.55626483245612,-5.842296971780238],[-167.08087484895873,-5.842296971844998],[-167.6804291535401,-5.84229697191901],[-168.2799834581278,-5.842296971993024],[-168.8795377627154,-5.842296972067036],[-169.3960784865953,-5.842296972130801],[-169.62507785291177,-6.35660891369496],[-169.84589895245523,-6.852553205032295],[-170.07078561618377,-7.357628387180476],[-170.32250417147964,-7.922965579961256],[-170.5494912380281,-8.432758077575215],[-170.76306235879287,-8.912419569872858],[-170.99278789473252,-9.428362422975272],[-171.10019629681767,-10.009622299589058],[-171.18151071292272,-10.449669880174843],[-171.29378558833838,-11.057265552059103],[-171.24930411675018,-11.50294873519149],[-171.19851260561944,-12.011855512521727],[-171.1518074190982,-12.479819261344975],[-171.10374265244792,-12.961405356236922],[-171.0570374659267,-13.429369105060173],[-171.00328719125883,-13.967921285392412],[-171.23670082511237,-14.430983758804853],[-171.61975036496315,-14.603559135697955],[-172.01754249584656,-14.782776494734737],[-172.49998268803537,-15.000130359793022],[-172.49998268803571,-15.531222537643785],[-172.49998268803571,-16.06255885838963],[-172.49998268803571,-16.39438269732112],[-172.50000834762596,-16.85032831923978],[-172.49998268803571,-17.285565042578842],[-172.49998268803571,-17.656323677732257],[-172.49998268803571,-18.187497236548083],[-172.49998268803571,-18.718833557293937],[-172.49998268803571,-19.24992573514479],[-172.49998268803571,-19.78126205589066],[-172.49998268803571,-20.31259837663658],[-172.49998268803571,-20.663767886230215],[-172.49998268803571,-21.11972164426905],[-172.49998268803571,-21.59640057312783],[-172.50002337851834,-22.00060235349548],[-172.49998268803571,-22.437455373830048],[-172.49998268803571,-22.968873075540913],[-172.49998268803571,-23.499965253391768],[-172.49998268803571,-24.00005128356237],[-172.4999826880357,-24.4668367316905],[-172.49998268803571,-24.999979201008337],[-172.49998268803571,-25.440919760228013],[-172.49998268803571,-26.000151261349433],[-172.4999826880357,-26.37355244712563],[-172.49998268803571,-27.000079178795485],[-172.4999826880357,-27.389085817303034],[-172.49998268803571,-27.999925715276312],[-172.4999826880357,-28.425344358300386],[-172.49998268803571,-28.819122603879382],[-172.49998268803571,-29.23634671712846],[-172.49998268803571,-29.83465597405679],[-172.49998268803571,-30.35278524455547],[-172.49998268803571,-30.937534410323924],[-172.49998268803574,-31.316505687683012],[-172.49998268803571,-31.875043127584203],[-172.49998268803571,-32.29058871622052],[-172.49998268803571,-32.81247046387958],[-172.49998268803571,-33.28539691557798],[-172.49998268803571,-33.75006056210494],[-172.49998268803574,-34.218029602475596],[-172.49998268803571,-34.68756927936531],[-172.49998268803571,-35.1921126310131],[-172.49998268803571,-35.62491523469564],[-172.49998268803571,-36.20764600119051],[-172.49998268803571,-36.56250533292097],[-172.49998268803571,-37.181729029728025],[-172.49998268803571,-37.68949571481673],[-172.49998268803571,-38.16617464367551],[-172.49998268803571,-38.62212840171434],[-172.49998268803574,-39.14025767221302],[-172.49998268803571,-39.679112113531644],[-172.49998268803571,-40.11434070075053],[-172.49998268803571,-40.63246997124921],[-172.49998268803571,-41.24996753825775],[-172.49998268803571,-41.62727817060667],[-172.49998268803571,-42.18747625551806],[-172.49998268803571,-42.60136119914418],[-172.49998268803571,-43.12506635374355],[-172.49998268803571,-43.57544422768169],[-172.49998268803571,-44.06241230907372],[-172.49998268803571,-44.547170091351106],[-172.49998268803571,-45.000002407299114],[-172.86689700070133,-45.293814163530286],[-173.23785131828305,-45.59088902920324],[-173.5714028935483,-45.85794075848945],[-173.90624576392617,-46.12590805862702],[-174.3749594320739,-46.50131845035642],[-174.7081874738896,-46.768109133257866],[-175.16252364519994,-47.13190631769315],[-175.5811187084202,-47.46713012276399],[-176.05762649442528,-47.84865401319251],[-176.37586513614897,-48.10343253146634],[-176.71873122522487,-48.37796350417781],[-177.04631862336407,-48.640283684786894],[-177.45303057494647,-48.96597314146773],[-177.8240200561051,-49.26299691201707],[-178.22907111596393,-49.587228227563244],[-178.59374865974553,-49.879198166270044],[-178.93694852025067,-50.154079832475546],[-179.318148001907,-50.45933465670629],[-179.69421442579434,-50.76044895305493],[-179.9999710451536,-51.00526657952802]],[[179.99967354891336,59.50186446727048],[179.61392777462385,59.26939974063383],[179.41356783869549,59.14785726934673],[178.9379774790021,58.858222414769365],[178.69464839353236,58.709539391641464],[178.50144998252767,58.59064180171805],[178.22556851104224,58.42071834671457],[178.0305797188063,58.29978623266521],[177.54294497628698,57.99631661403129],[177.26934217182253,57.82529451599964],[177.03756918338877,57.67941913616562],[176.7823584770235,57.518691730211664],[176.50143138570536,57.340426726291696],[176.0567657927272,57.057180277469996],[175.79211489441718,56.88794856066948],[175.5907783869084,56.75830868336078],[175.2888550066101,56.56376748643279],[175.07604378303063,56.42586744117262],[174.78046811800544,56.23368629223072],[174.26711699053342,55.897786359028146],[174.0086510455665,55.72761876112963],[173.74896438612393,55.55598630586044],[173.48805701220587,55.38288899322052],[173.22617306670725,55.20832682320971],[172.96298702576792,55.03229979582816],[172.69866165131822,54.854848601558615],[172.4333597052879,54.675891859435765],[172.1669998067121,54.49547025994222],[171.89966333655596,54.31362449356052],[171.63110615192394,54.13035456029037],[171.3615723957116,53.94557907916716],[171.09106206791878,53.759420121638165],[170.81973793047567,53.57171492577363],[170.5473558404869,53.3825448725381],[170.2739971789176,53.191950652414484],[169.99966194576783,52.999932265402755],[170.48737806925226,52.765677157535215],[170.79988097500595,52.61512237221129],[171.33943677322074,52.3536860220204],[171.7344599775247,52.16126073018341],[172.06275079049595,52.00073677664204],[172.6840130776109,51.69629058642772],[172.9670560740199,51.55716982669183],[173.3544294676103,51.365843177882915],[173.68125542321073,51.204424033726205],[174.45356078143985,50.820916235975325],[174.8597331779544,50.61831832350836],[175.27843824308493,50.40884371949541],[175.70894354814644,50.192899328762024],[176.15043528348812,49.97060722275524],[176.60234378235506,49.742292925335654],[177.06409937799188,49.50828196036319],[177.53472549881798,49.26881847073308],[178.01381524000809,49.024227980305476],[178.31282702646087,48.87094693827025],[178.75261405028456,48.6449843095202],[179.1920327884419,48.418429622040364],[179.56044068606343,48.21944192185788],[180,48.00000029616075],[180.000000335276,48.00000012852257],[180.0000003318895,47.50505063227496],[180.0000003285029,47.010101136027174],[180.00000032511628,46.51515163977956],[180.00000032172966,46.02020214353172],[180.00000031834304,45.525252647284105],[180.00000031495642,45.03030315103649],[180.0000003115698,44.53535365478871],[180.0000003081832,44.040404158541094],[180.00000030479657,43.54545466229331],[180.00000030140995,43.05050516604564],[180.0000002980231,42.555555669797855],[180.00000029463672,42.06060617355024],[180.00000029124988,41.56565667730246],[180.00000028786326,41.07070718105484],[180.00000028447664,40.575757684807],[180.00000028109002,40.08080818855939],[180.0000002777034,39.585858692311604],[180.0000002743169,39.09090919606399],[180.0000002709303,38.595959699816206],[180.00000026754367,38.10101020356859],[180.00000026415705,37.60606070732075],[180.0000002607702,37.11111121107314],[180.00000025738382,36.61616171482552],[180.00000025399697,36.12121221857774],[180.00000025061036,35.626262722330125],[180.00000024722374,35.131313226082284],[180.00000024383712,34.63636372983467],[180.0000002404505,34.141414233586886],[180.0000002370639,33.64646473733927],[180.00000023367727,33.15151524109149],[180.00000023029065,32.656565744843874],[180.00000022690404,32.16161624859603],[180.00000022351742,31.66666675234842],[180.00000022013091,31.171717256100806],[180.00000021674418,30.67676775985302],[180.00000021335768,30.181818263605408],[180.00000020997084,29.686868767357566],[180.00000020658422,29.191919271109953],[180.0000002031976,28.69696977486217],[180.00000019981098,28.202020278614555],[180.00000019642437,27.70707078236677],[180.00000019303775,27.212121286119157],[180.00000018965113,26.717171789871315],[180.00000018626451,26.2222222936237],[180.0000001828779,25.727272797376088],[180.00000017949128,25.232323301128304],[180.00000017610466,24.73737380488052],[180.00000017271805,24.24242430863285],[180.00000016933143,23.747474812385065],[180.0000001659448,23.25252531613745],[180.0000001625582,22.757575819889837],[180.00000015917146,22.262626323642053],[180.00000015578485,21.76767682739444],[180.00000015239823,21.272727331146598],[180.0000001490116,20.777777834898984],[180.000000145625,20.2828283386512],[180.00000014223838,19.787878842403586],[180.00000013885176,19.292929346155802],[180.00000013546514,18.79797984990813],[180.00000013207853,18.303030353660347],[180.0000001286919,17.808080857412733],[180.0000001253053,17.31313136116512],[180.00000012191867,16.818181864917335],[180.00000011853206,16.32323236866972],[180.00000011514544,15.82828287242188],[180.00000011175882,15.333333376174267],[180.0000001083722,14.838383879926482],[180.00000010498547,14.343434383678868],[180.00000010159886,13.848484887431084],[180.00000009821213,13.353535391183414],[180.00000009482562,12.85858589493563],[180.0000000914389,12.363636398688016],[180.0000000880524,11.868686902440402],[180.00000008466577,11.373737406192618],[180.00000008127915,10.878787909945004],[180.00000007789254,10.383838413697163],[180.00000007450592,9.888888917449549],[180.0000000711193,9.393939421201765],[180.00000006773269,8.89898992495415],[180.00000006434607,8.404040428706367],[180.00000006095922,7.909090932458696],[180.00000005757283,7.414141436210912],[180.000000054186,6.919191939963298],[180.00000005079937,6.424242443715684],[180.00000004741275,5.9292929474679],[180.00000004402614,5.434343451220059],[180.00000004063952,4.939393954972445],[180.0000000372529,4.444444458724831],[180.0000000338664,3.949494962477047],[180.00000003047978,3.454545466229433],[180.00000002709317,2.959595969981649],[180.00000002370632,2.464646473733978],[180.00000002031993,1.969696977486194],[180.0000000169331,1.47474748123858],[180.00000001354647,.979797984990796],[180.00000001015985,.484848488743182],[180.00000000677323,-.010101007504545],[180.00000000338662,-.505050503752273],[179.9999959436228,-1.016266633357443],[179.9999917772833,-1.540903051885967],[179.99998813173622,-1.999959918098426],[179.99998416034828,-2.500047518955152]],[[-180,75.00000015366828],[-179.6093818493981,74.75190081654415],[-179.12602086158938,74.51465868349989],[-178.72949210943193,74.29155276784286],[-178.324743879806,74.06120394629717],[-177.99763309082778,73.87317322657239],[-177.6485901317715,73.67106359989562],[-177.28734002795892,73.4602869004422],[-176.69891496023766,73.11299363213408],[-176.29880544561854,72.8743439521546],[-175.91761700537137,72.64497170218925],[-175.44349150304868,72.35684239546536],[-175.0017556248117,72.08543687705702],[-174.59485079961186,71.8327082901254],[-174.1324848467375,71.542422387828],[-173.66035317805796,71.24208593634786],[-173.07030049103582,70.86118232947835],[-172.7271576519447,70.63616396114291],[-172.25929848393008,70.32532936517276],[-171.7887537440691,70.00765876813912],[-171.4737280283994,69.79191782981833],[-171.1367294521689,69.55843584111862],[-170.88965684230752,69.38391436159048],[-170.44043391528703,69.06286645450777],[-170.13041312896718,68.83727841941692],[-169.69848365701765,68.51623051233447],[-169.3898925456742,68.24811314738008],[-168.9999999897555,68.00000014714902],[-168.9999999897555,67.58333348009444],[-168.9999999897556,67.16666681303968],[-168.9999999897556,66.75000014598487],[-168.99999998975568,66.33333347893029],[-168.99999998975568,65.91666681187553],[-168.99999998975568,65.50000014482072],[-169.41717540941406,65.308653958994],[-169.83435082907243,65.11730777316711],[-170.25171145735928,64.88204144702736],[-170.63306265953656,64.69291208427448],[-171.0602720355138,64.47729321740115],[-171.5326071566058,64.23608003702259],[-171.8261482975049,64.08430453722318],[-172.3313206379905,63.82136263917899],[-172.60732418092348,63.67687073575051],[-173.17853717453866,63.37425561724952],[-173.48339026957868,63.210883329931676],[-173.78596469759734,63.048487614194514],[-174.42842672610516,62.699729488515835],[-174.76025761105566,62.51731405537877],[-175.10482461703475,62.32781847828312],[-175.4665630066373,62.12660404222174],[-175.7621793621451,61.962092421393635],[-176.1718104496736,61.73190636177813],[-176.3802677916236,61.61410741488279],[-176.7450172769327,61.40678940644341],[-177.12087526396974,61.19206573018547],[-177.38279989995095,61.0418364687216],[-177.59272209927147,60.920538140329526],[-177.9527107981258,60.7119180364497],[-178.20486971830215,60.565228846965184],[-178.6270334744469,60.31795278469137],[-178.80887924082853,60.210651982286045],[-179.0563180650326,60.06477660245177],[-179.49264210909453,59.80561891928223],[-179.9999710451536,59.50186446727048]],[[180.000000335276,89.99999550842358],[180.00000032410026,89.49999566326517],[180.00000031292427,88.99999581810658],[180.0000003017485,88.49999597294794],[180.00000029057253,87.99999612778953],[180.00000027939677,87.49999628263112],[180.0000002682208,86.99999643747253],[180.00000025704503,86.49999659231406],[180.00000024586905,85.99999674715548],[180.00000023469318,85.49999690199706],[180.00000022351742,84.99999705683842],[180.00000021234143,84.49999721168001],[180.00000020116568,83.99999736652143],[180.0000001899897,83.49999752136296],[180.00000017881393,82.99999767620454],[180.00000016763795,82.49999783104596],[180.00000015646208,81.99999798588732],[180.00000014528632,81.4999981407289],[180.00000013411034,80.99999829557049],[180.00000012293458,80.49999845041191],[180.0000001117586,79.99999860525344],[180.00000010058284,79.49999876009485],[180.00000008940685,78.99999891493644],[180.0000000782311,78.4999990697778],[180.0000000670551,77.99999922461939],[180.00000005587924,77.4999993794608],[180.00000004470348,76.99999953430233],[180.0000000335275,76.49999968914392],[180.00000002235174,75.99999984398534],[180.00000001117576,75.4999999988267],[180,75.00000015366828]]],_createLine:function(t,e,i,n){i=i||{},n=n||{};t=L.polyline(t,Object.assign({},this._lineOptions,i));return t.setText(e+" ".repeat(5*e.length),Object.assign({},this._textOptions,n)),t}}),y=L.LayerGroup.extend({options:{redraw:"moveend",minDistance:100,verticalLabelOffset:200},lineStyle:{stroke:!0,color:"#111",opacity:.6,weight:1,interactive:!1},_bounds:null,initialize:function(t){L.LayerGroup.prototype.initialize.call(this,t),L.Util.setOptions(this,t)},onAdd:function(t){return this._map=t,this.redraw(),this._map.on("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(t.addLayer,t),this},onRemove:function(t){return t.off("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(this.removeLayer,this),this},redraw:function(){return this._bounds=this._map.getBounds().pad(.5),this.clearLayers(),this.constructLines(),this},constructLines:function(){var t=this._map.getBounds(),e=this._map.getZoom(),i=(this._bounds=y.bboxIntersect(t,[[-85,-180],[85,180]]),this._map.getBounds);try{this._map.getBounds=function(){return y.bboxIntersect(i.apply(this),[[-85,-180],[85,180]])};for(var n=this._map.project(t.getCenter(),e),s=y.getGridDivisor(this._map.unproject(n.add([this.options.minDistance/2,0]),e).lng-this._map.unproject(n.subtract([this.options.minDistance/2,0]),e).lng,!1),r=Math.max(t.getWest(),-180),a=Math.min(t.getEast(),180),o=y.fixFloatingPoint(Math.ceil(r/s)*s);o<=a;o+=s)this.addLayer(this.buildXLine(o)),this.addLayer(this.buildLabel("gridlabel-horiz",y.fixFloatingPoint(o)));if(0<t.getNorth())for(var h=Math.max(0,t.getSouth()),l=!0;h<t.getNorth()&&h<85;){var d=this._map.project([h,t.getCenter().lng],e),u=this._map.unproject(d.subtract([0,this.options.minDistance]),e),c=y.getGridDivisor(u.lat-h,!0),h=y.fixFloatingPoint(l?Math.ceil(h/c)*c:Math.ceil(u.lat/c)*c),l=!1;this.addLayer(this.buildYLine(h)),this.addLayer(this.buildLabel("gridlabel-vert",h))}if(t.getSouth()<0)for(var p=Math.min(0,t.getNorth()),f=!0;p>t.getSouth()&&-85<p;){var _=this._map.project([p,t.getCenter().lng],e),g=this._map.unproject(_.add([0,this.options.minDistance]),e),m=y.getGridDivisor(y.fixFloatingPoint(p-g.lat),!0),p=y.fixFloatingPoint(f?Math.floor(p/m)*m:Math.floor(g.lat/m)*m),f=!1;this.addLayer(this.buildYLine(p)),this.addLayer(this.buildLabel("gridlabel-vert",p))}}finally{this._map.getBounds=i}},buildXLine:function(t){var e=new L.LatLng(this._bounds.getSouth(),t),t=new L.LatLng(this._bounds.getNorth(),t);return new L.Polyline([e,t],this.lineStyle)},buildYLine:function(t){var e=new L.LatLng(t,this._bounds.getWest()),t=new L.LatLng(t,this._bounds.getEast());return new L.Polyline([e,t],this.lineStyle)},buildLabel:function(t,e){var i,n=this._map.getBounds().pad(-.003),s=[],n=("gridlabel-horiz"==t?i=new L.LatLng(n.getNorth(),e):(i=new L.LatLng(e,n.getWest()),null!=this.options.verticalLabelOffset&&(n=this._map.latLngToContainerPoint(this._bounds.getSouthWest()),n=Math.max(0,this.options.verticalLabelOffset-n.x),s.push("margin-left: ".concat(n,"px")))),'<div class="'.concat(t,'"'));return 0<s.length&&(n+=' style="'.concat(s.join(";"),'"')),n=n+">"+e+"&#8239;Â°</div>",L.marker(i,{interactive:!1,icon:L.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:n})})}}),rt=(y.fixFloatingPoint=function(t){return y.round(t,12)},y.round=function(t,e){e=Math.pow(10,e);return Math.round(t*e)/e},y.getGridDivisor=function(t,e){if(t<=0||!isFinite(t))throw new Error("Invalid number "+t);if(e&&5<=t)return 5;if(t<=10){for(var i=1;1<t;)i*=10,t/=10;for(;t<=.1;)i/=10,t*=10;return.1==t?y.fixFloatingPoint(.1*i):t<=.2?y.fixFloatingPoint(.2*i):t<=.5?y.fixFloatingPoint(.5*i):i}return t<=30?30:t<=45?45:t<=60?60:90},y.niceRound=y.getGridDivisor,y.bboxIntersect=function(t,e){t=t instanceof L.LatLngBounds?t:L.latLngBounds(t),e=e instanceof L.LatLngBounds?e:L.latLngBounds(e);return L.latLngBounds([[Math.max(t.getSouth(),e.getSouth()),Math.max(t.getWest(),e.getWest())],[Math.min(t.getNorth(),e.getNorth()),Math.min(t.getEast(),e.getEast())]])},L.Class.extend({_map:null,_container:null,_localStorageKey:"_wrf_domain_wizard_settings",_defaultOptions:{jsonBaseUrl:"json"},_settings:{showGraticule:{id:"showGraticule",value:!1,dataType:"boolean"},showGeographicLines:{id:"showGeographicLines",value:!1,dataType:"boolean"}},_options:null,_controls:{},_graticule:null,_geographicLines:null,initialize:function(t,e,i){for(var n in this._options=Object.assign({},this._defaultOptions,i),this._map=t,this._container=e.getContainer().querySelector("#settings"),this._graticule=new y({verticalLabelOffset:480}),this._geographicLines=new st({}),this._settings){var s=this._settings[n],r=localStorage.getItem(this._localStorageKey+"_".concat(s.id));if(r)switch(s.dataType){case"boolean":s.value="true"===r;break;case"int":s.value=parseInt(r);break;case"float":s.value=parseFloat(r);break;default:s.value=r}this._controls[n]=this._container.querySelector("#".concat(s.id))}var a,o=this;for(a in this._settings.showGraticule.value=!1,this._controls.showGraticule.addEventListener("click",function(t){o.showGraticule(t.currentTarget.checked)}),this.showGraticule(this._settings.showGraticule.value),this._controls.showGeographicLines.addEventListener("click",function(t){o.showGeographicLines(t.currentTarget.checked)}),this.showGeographicLines(this._settings.showGeographicLines.value),this._controls){var h,l=this._controls[a];"INPUT"===l.tagName&&(h=this._settings[a].value,"checkbox"===l.type?l.checked=!0===h:l.value=h)}},showGraticule:function(t){localStorage.setItem(this._localStorageKey+"_showGraticule",t),!0===t?this._graticule.addTo(this._map):this._graticule.remove()},showGeographicLines:function(t){localStorage.setItem(this._localStorageKey+"_showGeographicLines",t),!0===t?this._geographicLines.addTo(this._map):this._geographicLines.remove()}}));var at=(()=>{function i(){X(this,i),this.container=document.querySelector("div.modal#message-box-dialog"),this.dialogBody=this.container.querySelector("div.modal-body"),this.dialogTitle=this.container.querySelector("div.modal-header h5.modal-title"),this.titleIcon=this.dialogTitle.querySelector("i"),this.titleSpan=this.dialogTitle.querySelector("span")}return r(i,[{key:"open",value:function(){return $(this.container).modal(),this}},{key:"close",value:function(){return $(this.container).modal("hide"),this}},{key:"empty",value:function(){return this.titleSpan.innerHTML="",this.titleIcon.classList.remove("fa-exclamation-circle"),this.titleIcon.classList.remove("fa-info-circle"),this.titleIcon.classList.remove("fa-exclamation-triangle"),this.dialogBody.innerHTML="",this}},{key:"title",value:function(t,e){return e===i.types.error&&this.titleIcon.classList.add("fa-exclamation-circle"),e===i.types.info&&this.titleIcon.classList.add("fa-info-circle"),e===i.types.warning&&this.titleIcon.classList.add("fa-exclamation-triangle"),this.titleSpan.innerText=t,this}},{key:"html",value:function(t){return this.dialogBody.innerHTML=t,this}},{key:"text",value:function(t){return this.dialogBody.innerText=t,this}}])})(),ot=(t(at,"types",{error:0,info:1,warning:2}),new at);function Q(t,e){ot.empty().title(t,at.types.error).text(e).open()}var ht,lt,dt=L.GeoJSON.extend({options:{},initialize:function(t){L.GeoJSON.prototype.initialize.call(this,null,t)},loadDataAsync:(ht=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(t){return ht.apply(this,arguments)}),toXml:function(t){return t=this.toString(t),(new DOMParser).parseFromString(t,"text/xml")},toString:function(t){return(new TextDecoder).decode(t)}}),ut=dt.extend({initialize:function(t){dt.prototype.initialize.call(this,t)},loadDataAsync:(lt=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.addData(JSON.parse(this.toString(e)));case 1:case"end":return t.stop()}},t,this)})),function(t){return lt.apply(this,arguments)})});function p(t,e){return Array.from(t.getElementsByTagName(e))}function ct(t){return"#"===t[0]?t:"#"+t}function o(t){return t?.normalize(),t&&t.textContent||""}function f(t,e,i){t=t.getElementsByTagName(e),e=t.length?t[0]:null;return e&&i&&i(e),e}function i(t,e,i){var n={};return t&&(e=(t=t.getElementsByTagName(e)).length?t[0]:null)&&i?i(e,n):n}function pt(t,e,i){t=o(f(t,e));return t&&i&&i(t)||{}}function ft(t,e,i){t=parseFloat(o(f(t,e)));if(!isNaN(t))return t&&i&&i(t)||{}}function _t(t,e,i){t=parseFloat(o(f(t,e)));if(!isNaN(t))return i&&i(t),t}function gt(t,i){let n={};for(let e of i)pt(t,e,t=>{n[e]=t});return n}function mt(t){return 1===t?.nodeType}function yt(t){return i(t,"line",t=>Object.assign({},pt(t,"color",t=>({stroke:"#"+t})),ft(t,"opacity",t=>({"stroke-opacity":t})),ft(t,"width",t=>({"stroke-width":96*t/25.4}))))}function vt(t){let e=[];var i;if(null!==t)for(var n of Array.from(t.childNodes))mt(n)&&(i=n.nodeName,"gpxtpx:TrackPointExtension"===(i=["heart","gpxtpx:hr","hr"].includes(i)?"heart":i)?e=e.concat(vt(n)):(n=o(n),e.push([i,(i=n,n=void 0,n=parseFloat(i),isNaN(n)?i:n)])));return e}function bt(t){let e=[parseFloat(t.getAttribute("lon")||""),parseFloat(t.getAttribute("lat")||"")];if(isNaN(e[0])||isNaN(e[1]))return null;_t(t,"ele",t=>{e.push(t)});var i=f(t,"time");return{coordinates:e,time:i?o(i):null,extendedValues:vt(f(t,"extensions"))}}function wt(t){var e,i=gt(t,["name","cmt","desc","type","time","keywords"]);for(e of Array.from(t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*")))e.parentNode?.parentNode===t&&(i[e.tagName.replace(":","_")]=o(e));var n=p(t,"link");return n.length&&(i.links=n.map(t=>Object.assign({href:t.getAttribute("href")},gt(t,["text","type"])))),i}function xt(t,e){var i=p(t,e),n=[],s=[],r={};for(let t=0;t<i.length;t++){var a=bt(i[t]);if(a){n.push(a.coordinates),a.time&&s.push(a.time);for(var[o,h]of a.extendedValues){o="heart"===o?o:o.replace("gpxtpx:","")+"s";r[o]||(r[o]=Array(i.length).fill(null)),r[o][t]=h}}}if(!(n.length<2))return{line:n,times:s,extendedValues:r}}function*Mt(t){for(var e of p(t,"trk")){e=(t=>{var e,i=[],n=[],s=[];for(e of p(t,"trkseg")){var r=xt(e,"trkpt");r&&(s.push(r),r.times)&&r.times.length&&n.push(r.times)}if(0===s.length)return null;var a,o=1<s.length,h=Object.assign({_gpxType:"trk"},wt(t),yt(f(t,"extensions")),n.length?{coordinateProperties:{times:o?n:n[0]}}:{});for(a of s){i.push(a.line),h.coordinateProperties||(h.coordinateProperties={});var l=h.coordinateProperties,d=Object.entries(a.extendedValues);for(let t=0;t<d.length;t++){var[u,c]=d[t];o?(l[u]||(l[u]=s.map(t=>new Array(t.line.length).fill(null))),l[u][t]=c):l[u]=c}}return{type:"Feature",properties:h,geometry:o?{type:"MultiLineString",coordinates:i}:{type:"LineString",coordinates:i[0]}}})(e);e&&(yield e)}for(var i of p(t,"rte")){i=(t=>{var e=xt(t,"rtept");if(e)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},wt(t),yt(f(t,"extensions"))),geometry:{type:"LineString",coordinates:e.line}}})(i);i&&(yield i)}for(var n of p(t,"wpt")){n=n,s=void 0,s=Object.assign(wt(n),gt(n,["sym"]));s=(n=bt(n))?{type:"Feature",properties:s,geometry:{type:"Point",coordinates:n.coordinates}}:null;s&&(yield s)}var s}function kt(t,e){var i={},n="stroke"==e||"fill"===e?e:e+"-color";return 6===(t="#"===t[0]?t.substring(1):t).length||3===t.length?i[n]="#"+t:8===t.length&&(i[e+"-opacity"]=parseInt(t.substring(0,2),16)/255,i[n]="#"+t.substring(6,8)+t.substring(4,6)+t.substring(2,4)),i}function St(t,e,i){let n={};return _t(t,e,t=>{n[i]=t}),n}function Lt(t,e){return i(t,"color",t=>kt(o(t),e))}function Et(t){return i(t,"Icon",(t,e)=>(pt(t,"href",t=>{e.icon=t}),e))}function At(t){return Object.assign({},i(t,"PolyStyle",(t,e)=>Object.assign(e,i(t,"color",t=>kt(o(t),"fill")),pt(t,"fill",t=>{if("0"===t)return{"fill-opacity":0}}),pt(t,"outline",t=>{if("0"===t)return{"stroke-opacity":0}}))),i(t,"LineStyle",t=>Object.assign(Lt(t,"stroke"),St(t,"width","stroke-width"))),i(t,"LabelStyle",t=>Object.assign(Lt(t,"label"),St(t,"scale","label-scale"))),i(t,"IconStyle",t=>Object.assign(Lt(t,"icon"),St(t,"scale","icon-scale"),St(t,"heading","icon-heading"),i(t,"hotSpot",t=>{var e=parseFloat(t.getAttribute("x")||""),i=parseFloat(t.getAttribute("y")||""),n=t.getAttribute("xunits")||"",t=t.getAttribute("yunits")||"";return isNaN(e)||isNaN(i)?{}:{"icon-offset":[e,i],"icon-offset-units":[n,t]}}),Et(t))))}var e=t=>Number(t);let Ct={string:t=>t,int:e,uint:e,short:e,ushort:e,float:e,double:e,bool:t=>Boolean(t)};function jt(t,a){return i(t,"ExtendedData",(t,e)=>{for(var i of p(t,"Data"))e[i.getAttribute("name")||""]=o(f(i,"value"));for(var n of p(t,"SimpleData")){var s=n.getAttribute("name")||"",r=a[s]||Ct.string;e[s]=r(o(n))}return e})}function Tt(t){var e,t=f(t,"description");for(e of Array.from(t?.childNodes||[]))if(4===e.nodeType)return{description:{"@type":"html",value:o(e)}};return{}}function Nt(t){return i(t,"TimeSpan",t=>({timespan:{begin:o(f(t,"begin")),end:o(f(t,"end"))}}))}function Ot(t){return i(t,"TimeStamp",t=>({timestamp:o(f(t,"when"))}))}function It(t,e){return pt(t,"styleUrl",t=>(t=ct(t),e[t]?Object.assign({styleUrl:t},e[t]):{styleUrl:t}))}let Pt=/\s*/g,zt=/^\s*|\s*$/g,Gt=/\s+/;function Bt(t){return t.replace(Pt,"").split(",").map(parseFloat).filter(t=>!isNaN(t)).slice(0,3)}function Rt(t){return t.replace(zt,"").split(Gt).map(Bt).filter(t=>2<=t.length)}function Dt(t){let e=p(t,"coord");var i,n=(e=0===e.length?(i="coord",n="*",Array.from(t.getElementsByTagNameNS(n,i))):e).map(t=>o(t).split(" ").map(parseFloat));return 0===n.length?null:{geometry:2<n.length?{type:"LineString",coordinates:n}:{type:"Point",coordinates:n[0]},times:p(t,"when").map(t=>o(t))}}function Ft(t){if(0===t.length)return t;var e=t[0],i=t[t.length-1];let n=!0;for(let t=0;t<Math.max(e.length,i.length);t++)if(e[t]!==i[t]){n=!1;break}return n?t:t.concat([t[0]])}function Ut(t){return o(f(t,"coordinates"))}function qt(t,e,i,n){var{coordTimes:s,geometries:r}=function e(i){let n=[],s=[];for(let t=0;t<i.childNodes.length;t++){var r,a,o,h=i.childNodes.item(t);if(mt(h))switch(h.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":var l=e(h);n=n.concat(l.geometries),s=s.concat(l.coordTimes);break;case"Point":2<=(l=Bt(Ut(h))).length&&n.push({type:"Point",coordinates:l});break;case"LinearRing":case"LineString":2<=(o=Rt(Ut(h))).length&&n.push({type:"LineString",coordinates:o});break;case"Polygon":var d,u=[];for(d of p(h,"LinearRing")){var c=Ft(Rt(Ut(d)));4<=c.length&&u.push(c)}u.length&&n.push({type:"Polygon",coordinates:u});break;case"Track":case"gx:Track":(o=Dt(h))&&({times:r,geometry:a}=o,n.push(a),r.length)&&s.push(r)}}return{geometries:n,coordTimes:s}}(t),r=0===(r=r).length?null:1===r.length?r[0]:{type:"GeometryCollection",geometries:r};return!r&&n.skipNullGeometry?null:(void 0!==(n={type:"Feature",geometry:r,properties:Object.assign(gt(t,["name","address","visibility","open","phoneNumber","description"]),Tt(t),It(t,e),At(t),jt(t,i),Nt(t),Ot(t),s.length?{coordinateProperties:{times:1===s.length?s[0]:s}}:{})}).properties?.visibility&&(n.properties.visibility="0"!==n.properties.visibility),null!==(r=t.getAttribute("id"))&&""!==r&&(n.id=r),n)}function Vt(e){if(f(e,"gx:LatLonQuad"))return{geometry:{type:"Polygon",coordinates:[Ft(Rt(Ut(e)))]}};if(e=f(e=e,"LatLonBox")){var i=_t(e,"north"),n=_t(e,"west"),s=_t(e,"east"),r=_t(e,"south"),e=_t(e,"rotation");if("number"==typeof i&&"number"==typeof r&&"number"==typeof n&&"number"==typeof s){var a=[n,r,s,i];let t=[[[n,i],[s,i],[s,r],[n,r],[n,i]]];return"number"==typeof e&&(t=((t,e,n)=>{let s=[(t[0]+t[2])/2,(t[1]+t[3])/2];return[e[0].map(t=>{var e=t[1]-s[1],t=t[0]-s[0],i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),e=Math.atan2(e,t)+n*Wt;return[s[0]+Math.cos(e)*i,s[1]+Math.sin(e)*i]})]})(a,t,e)),{bbox:a,geometry:{type:"Polygon",coordinates:t}}}}return null}let Wt=Math.PI/180;function $t(t){let i={};for(var e of p(t,"Style"))i[(t=>{let e=t.getAttribute("id");return t=t.parentNode,ct((e=!e&&mt(t)&&"CascadingStyle"===t.localName?t.getAttribute("kml:id")||t.getAttribute("id"):e)||"")})(e)]=At(e);for(var n of p(t,"StyleMap")){let e=ct(n.getAttribute("id")||"");pt(n,"styleUrl",t=>{t=ct(t),i[t]&&(i[e]=i[t])})}return i}function*Zt(t,e={skipNullGeometry:!1}){var i,n,s,r,a,o,h,l=$t(t),d=(t=>{var e,i={};for(e of p(t,"SimpleField"))i[e.getAttribute("name")||""]=Ct[e.getAttribute("type")||""]||Ct.string;return i})(t);for(i of p(t,"Placemark")){var u=qt(i,l,d,e);u&&(yield u)}for(n of p(t,"GroundOverlay")){s=n,c=l,r=d,a=e,h=o=void 0,o=Vt(s);var c=!(h=o?.geometry||null)&&a.skipNullGeometry?null:(a={type:"Feature",geometry:h,properties:Object.assign({"@geometry-type":"groundoverlay"},gt(s,["name","address","visibility","open","phoneNumber","description"]),Tt(s),It(s,c),At(s),Et(s),jt(s,r),Nt(s),Ot(s))},o?.bbox&&(a.bbox=o.bbox),void 0!==a.properties?.visibility&&(a.properties.visibility="0"!==a.properties.visibility),null!==(h=s.getAttribute("id"))&&""!==h&&(a.id=h),a);c&&(yield c)}}var Ht,Jt,Kt=dt.extend({initialize:function(t){dt.prototype.initialize.call(this,t)},loadDataAsync:(Ht=C(G().mark(function t(i){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.addData((e=this.toXml(i),{type:"FeatureCollection",features:Array.from(Mt(e))}));case 1:case"end":return t.stop()}var e},t,this)})),function(t){return Ht.apply(this,arguments)})}),Xt=dt.extend({initialize:function(t){dt.prototype.initialize.call(this,t)},loadDataAsync:(Jt=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.addKmlData(this.toXml(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return Jt.apply(this,arguments)}),addKmlData:function(t){var e;this.addData((e={skipNullGeometry:!1},{type:"FeatureCollection",features:Array.from(Zt(t,e))}))}}),T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Qt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yt,te,ee,ie,ne,se={},re={},n={},ae={exports:{}},oe={exports:{}};function he(){return Yt||(Yt=1,"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?oe.exports={nextTick:function(t,e,i,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,r,a=arguments.length;switch(a){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,i)});case 4:return process.nextTick(function(){t.call(null,e,i,n)});default:for(s=new Array(a-1),r=0;r<s.length;)s[r++]=arguments[r];return process.nextTick(function(){t.apply(null,s)})}}}:oe.exports=process),oe.exports}function le(){return ne||(ne=1,ie=O),ie}var de,ue={exports:{}};function ce(){var t,e,i,n;return de||(de=1,e=(t=ue).exports,(n=(i=P).Buffer).from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(s(i,e),e.Buffer=r),s(n,r),r.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");t=n(t);return void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},r.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}),ue.exports;function s(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return n(t,e,i)}}var pe,s={};function fe(){return pe||(pe=1,s.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},s.isBoolean=function(t){return"boolean"==typeof t},s.isNull=function(t){return null===t},s.isNullOrUndefined=function(t){return null==t},s.isNumber=function(t){return"number"==typeof t},s.isString=function(t){return"string"==typeof t},s.isSymbol=function(t){return"symbol"==typeof t},s.isUndefined=function(t){return void 0===t},s.isRegExp=function(t){return"[object RegExp]"===e(t)},s.isObject=function(t){return"object"==typeof t&&null!==t},s.isDate=function(t){return"[object Date]"===e(t)},s.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},s.isFunction=function(t){return"function"==typeof t},s.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},s.isBuffer=P.Buffer.isBuffer),s;function e(t){return Object.prototype.toString.call(t)}}var _e,ge,me={exports:{}},ye={exports:{}};function ve(){if(!ge){ge=1;try{var t=require("util");if("function"!=typeof t.inherits)throw"";me.exports=t.inherits}catch(t){me.exports=(_e||(_e=1,"function"==typeof Object.create?ye.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ye.exports=function(t,e){var i;e&&(t.super_=e,(i=function(){}).prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t)}),ye.exports)}}return me.exports}var be,we,xe,Me,ke,Se,Le,Ee,Ae,Ce={exports:{}};function je(){var t,a,e;return be||(be=1,t=Ce,a=ce().Buffer,e=z,t.exports=(i.prototype.push=function(t){t={data:t,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(t){t={data:t,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){var t;if(0!==this.length)return t=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},i.prototype.concat=function(t){if(0===this.length)return a.alloc(0);for(var e,i,n=a.allocUnsafe(t>>>0),s=this.head,r=0;s;)e=s.data,i=r,e.copy(n,i),r+=s.data.length,s=s.next;return n},i),e&&e.inspect&&e.inspect.custom&&(t.exports.prototype[e.inspect.custom]=function(){var t=e.inspect({length:this.length});return this.constructor.name+" "+t})),Ce.exports;function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}}function Te(){var r;return xe||(xe=1,r=he(),we={destroy:function(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,t)):r.nextTick(a,this,t)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,r.nextTick(a,i,t)):r.nextTick(a,i,t):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}),we;function a(t,e){t.emit("error",e)}}function Ne(){if(!Le){Le=1;var r,e,p=he(),u=(Se=o,!process.browser&&-1<["v0.10","v0.9."].indexOf(process.version.slice(0,5))?setImmediate:p.nextTick),t=(o.WritableState=a,Object.create(fe())),i=(t.inherits=ve(),{deprecate:(ke||(ke=1,Me=z.deprecate),Me)}),n=le(),f=ce().Buffer,_=(void 0!==T?T:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},s=Te();t.inherits(o,n),a.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e};try{Object.defineProperty(a.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(e=Function.prototype[Symbol.hasInstance],Object.defineProperty(o,Symbol.hasInstance,{value:function(t){return!!e.call(this,t)||this===o&&t&&t._writableState instanceof a}})):e=function(t){return t instanceof this},o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},o.prototype.write=function(t,e,i){var n,s,r,a,o,h,l,d=this._writableState,u=!1,c=!d.objectMode&&(c=t,f.isBuffer(c)||c instanceof _);return c&&!f.isBuffer(t)&&(o=t,t=f.from(o)),"function"==typeof e&&(i=e,e=null),e=c?"buffer":e||d.defaultEncoding,"function"!=typeof i&&(i=g),d.ended?(o=this,h=i,l=new Error("write after end"),o.emit("error",l),p.nextTick(h,l)):(c||(h=this,l=d,s=i,a=!(r=!0),null===(n=t)?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||l.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(h.emit("error",a),p.nextTick(s,a),r=!1),r))&&(d.pendingcb++,u=((t,e,i,n,s,r)=>{i||(o=((t,e,i)=>e=t.objectMode||!1===t.decodeStrings||"string"!=typeof e?e:f.from(e,i))(e,n,s),n!==o&&(i=!0,s="buffer",n=o));var a,o=e.objectMode?1:n.length,h=(e.length+=o,e.length<e.highWaterMark);return h||(e.needDrain=!0),e.writing||e.corked?(a=e.lastBufferedRequest,e.lastBufferedRequest={chunk:n,encoding:s,isBuf:i,callback:r,next:null},a?a.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):m(t,e,!1,o,n,s,r),h})(this,d,c,t,e,i)),u},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||v(this,t))},o.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase()))return this._writableState.defaultEncoding=t,this;throw new TypeError("Unknown encoding: "+t)},Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),o.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||(t=this,e=i,(i=n).ending=!0,w(t,i),e&&(i.finished?p.nextTick(e):t.once("finish",e)),i.ended=!0,t.writable=!1)},Object.defineProperty(o.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),o.prototype.destroy=s.destroy,o.prototype._undestroy=s.undestroy,o.prototype._destroy=function(t,e){this.end(),e(t)}}return Se;function c(r){var a=this;this.next=null,this.entry=null,this.finish=function(){var t=a,e=r,i=void 0,n=t.entry;for(t.entry=null;n;){var s=n.callback;e.pendingcb--,s(i),n=n.next}e.corkedRequestsFree.next=t}}function g(){}function a(t,d){r=r||Oe(),t=t||{};var e=d instanceof r,i=(this.objectMode=!!t.objectMode,e&&(this.objectMode=this.objectMode||!!t.writableObjectMode),t.highWaterMark),n=t.writableHighWaterMark,s=this.objectMode?16:16384,i=(this.highWaterMark=i||0===i?i:e&&(n||0===n)?n:s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,(this.destroyed=!1)===t.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){t=t,i=(e=d)._writableState,n=i.sync,s=i.writecb;var e,i,n,s,r=i;{var a,o,h,l;(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)?(r=e,o=n,h=t,l=s,--(a=i).pendingcb,o?(p.nextTick(l,h),p.nextTick(w,r,a),r._writableState.errorEmitted=!0,r.emit("error",h)):(l(h),r._writableState.errorEmitted=!0,r.emit("error",h),w(r,a))):((t=b(i))||i.corked||i.bufferProcessing||!i.bufferedRequest||v(e,i),n?u(y,e,i,t,s):y(e,i,t,s))}},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function o(t){if(r=r||Oe(),!(e.call(o,this)||this instanceof r))return new o(t);this._writableState=new a(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final)&&(this._final=t.final),n.call(this)}function m(t,e,i,n,s,r,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(s,e.onwrite):t._write(s,r,e.onwrite),e.sync=!1}function y(t,e,i,n){var s;i||(i=t,0===(s=e).length&&s.needDrain&&(s.needDrain=!1,i.emit("drain"))),e.pendingcb--,n(),w(t,e)}function v(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){for(var n=e.bufferedRequestCount,s=new Array(n),n=e.corkedRequestsFree,r=(n.entry=i,0),a=!0;i;)(s[r]=i).isBuf||(a=!1),i=i.next,r+=1;s.allBuffers=a,m(t,e,!0,e.length,s,"",n.finish),e.pendingcb++,e.lastBufferedRequest=null,n.next?(e.corkedRequestsFree=n.next,n.next=null):e.corkedRequestsFree=new c(e),e.bufferedRequestCount=0}else{for(;i;){var o=i.chunk,h=i.encoding,l=i.callback;if(m(t,e,!1,e.objectMode?1:o.length,o,h,l),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function h(e,i){e._final(function(t){i.pendingcb--,t&&e.emit("error",t),i.prefinished=!0,e.emit("prefinish"),w(e,i)})}function w(t,e){var i,n,s=b(e);return s&&(i=t,(n=e).prefinished||n.finalCalled||("function"==typeof i._final?(n.pendingcb++,n.finalCalled=!0,p.nextTick(h,i,n)):(n.prefinished=!0,i.emit("prefinish"))),0===e.pendingcb)&&(e.finished=!0,t.emit("finish")),s}}function Oe(){if(!Ae){Ae=1;var i=he(),t=Object.keys||function(t){var e,i=[];for(e in t)i.push(e);return i},e=(Ee=h,Object.create(fe())),n=(e.inherits=ve(),Ze()),s=Ne();e.inherits(h,n);for(var r=t(s.prototype),a=0;a<r.length;a++){var o=r[a];h.prototype[o]||(h.prototype[o]=s.prototype[o])}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}}return Ee;function h(t){if(!(this instanceof h))return new h(t);n.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(d,this)}function d(t){t.end()}}var Ie,Pe,ze,Ge,Be,Re,De,Fe,Ue,qe,Ve={},We={exports:{}};function $e(){var i,t,e,n,s,r;return Pe||(Pe=1,Ie||(Ie=1,e=(t=We).exports,(s=(n=P).Buffer).from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=o),a(s,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");t=s(t);return void 0!==e?"string"==typeof i?t.fill(e,i):t.fill(e):t.fill(0),t},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}),i=We.exports.Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},(Ve.StringDecoder=l).prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},l.prototype.end=function(t){t=t&&t.length?this.write(t):"";return this.lastNeed?t+"ï¿½":t},l.prototype.text=function(t,e){var i=((t,e,i)=>{var n=e.length-1;if(!(n<i)){var s=d(e[n]);if(0<=s)return 0<s&&(t.lastNeed=s-1),s;if(!(--n<i||-2===s)){if(0<=(s=d(e[n])))return 0<s&&(t.lastNeed=s-2),s;if(!(--n<i||-2===s)&&0<=(s=d(e[n])))return 0<s&&(2===s?s=0:t.lastNeed=s-3),s}}return 0})(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;i=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},l.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}),Ve;function a(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return s(t,e,i)}function h(t){var e=(t=>{if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}})(t);if("string"==typeof e||i.isEncoding!==r&&r(t))return e||t;throw new Error("Unknown encoding: "+t)}function l(t){var e;switch(this.encoding=h(t),this.encoding){case"utf16le":this.text=c,this.end=p,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=_,e=3;break;default:return this.write=g,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function d(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e,i=this.lastTotal-this.lastNeed,n=(e=this,128!=(192&(n=t)[0])?(e.lastNeed=0,"ï¿½"):1<e.lastNeed&&1<n.length?128!=(192&n[1])?(e.lastNeed=1,"ï¿½"):2<e.lastNeed&&2<n.length&&128!=(192&n[2])?(e.lastNeed=2,"ï¿½"):void 0:void 0);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,i,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);e=t.toString("utf16le",e);if(e){var i=e.charCodeAt(e.length-1);if(55296<=i&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],e.slice(0,-1)}return e}function p(t){var e,t=t&&t.length?this.write(t):"";return this.lastNeed?(e=this.lastTotal-this.lastNeed,t+this.lastChar.toString("utf16le",0,e)):t}function f(t,e){var i=(t.length-e)%3;return 0==i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function _(t){t=t&&t.length?this.write(t):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g(t){return t.toString(this.encoding)}function m(t){return t&&t.length?this.write(t):""}}function Ze(){var _,g,e,r,m,i,d,u,t,y,a,n,o,h,s;return Ge||(Ge=1,_=he(),ze=c,ee||(ee=1,e={}.toString,te=Array.isArray||function(t){return"[object Array]"==e.call(t)}),g=te,c.ReadableState=l,I.EventEmitter,m=function(t,e){return t.listeners(e).length},i=le(),d=ce().Buffer,u=(void 0!==T?T:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},(t=Object.create(fe())).inherits=ve(),y=void 0,y=z&&z.debuglog?z.debuglog("stream"):function(){},a=je(),n=Te(),t.inherits(c,i),h=["error","close","destroy","pause","resume"],Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),c.prototype.destroy=n.destroy,c.prototype._undestroy=n.undestroy,c.prototype._destroy=function(t,e){this.push(null),e(t)},c.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=d.from(t,e),e=""),i=!0),p(this,t,e,!1,i)},c.prototype.unshift=function(t){return p(this,t,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return o=o||$e().StringDecoder,this._readableState.decoder=new o(t),this._readableState.encoding=t,this},s=8388608,c.prototype.read=function(t){y("read",t),t=parseInt(t,10);var e,i=this._readableState,n=t;return 0!==t&&(i.emittedReadable=!1),0===t&&i.needReadable&&(i.length>=i.highWaterMark||i.ended)?(y("read: emitReadable",i.length,i.ended),(0===i.length&&i.ended?A:b)(this),null):0===(t=v(t,i))&&i.ended?(0===i.length&&A(this),null):(e=i.needReadable,y("need readable",e),(0===i.length||i.length-t<i.highWaterMark)&&y("length less than watermark",e=!0),i.ended||i.reading?y("reading or ended",e=!1):e&&(y("do read"),i.reading=!0,i.sync=!0,0===i.length&&(i.needReadable=!0),this._read(i.highWaterMark),i.sync=!1,i.reading||(t=v(n,i))),null===(e=0<t?E(t,i):null)?(i.needReadable=!0,t=0):i.length-=t,0===i.length&&(i.ended||(i.needReadable=!0),n!==t)&&i.ended&&A(this),null!==e&&this.emit("data",e),e)},c.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(i,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=i;break;case 1:s.pipes=[s.pipes,i];break;default:s.pipes.push(i)}s.pipesCount+=1,y("pipe count=%d opts=%j",s.pipesCount,t);t=(!t||!1!==t.end)&&i!==process.stdout&&i!==process.stderr?a:f;function r(t,e){y("onunpipe"),t===n&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,y("cleanup"),i.removeListener("close",c),i.removeListener("finish",p),i.removeListener("drain",o),i.removeListener("error",u),i.removeListener("unpipe",r),n.removeListener("end",a),n.removeListener("end",f),n.removeListener("data",d),h=!0,!s.awaitDrain||i._writableState&&!i._writableState.needDrain||o())}function a(){y("onend"),i.end()}s.endEmitted?_.nextTick(t):n.once("end",t),i.on("unpipe",r);e=n;var e,o=function(){var t=e._readableState;y("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&m(e,"data")&&(t.flowing=!0,L(e))},h=(i.on("drain",o),!1);var l=!1;function d(t){y("ondata"),(l=!1)!==i.write(t)||l||((1===s.pipesCount&&s.pipes===i||1<s.pipesCount&&-1!==j(s.pipes,i))&&!h&&(y("false write response, pause",s.awaitDrain),s.awaitDrain++,l=!0),n.pause())}function u(t){y("onerror",t),f(),i.removeListener("error",u),0===m(i,"error")&&i.emit("error",t)}function c(){i.removeListener("finish",p),f()}function p(){y("onfinish"),i.removeListener("close",c),f()}function f(){y("unpipe"),n.unpipe(i)}return n.on("data",d),((t,e,i)=>{if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?g(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)})(i,"error",u),i.once("close",c),i.once("finish",p),i.emit("pipe",n),s.flowing||(y("pipe resume"),n.resume()),i},c.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0!==e.pipesCount)if(1===e.pipesCount)t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i));else if(t){var n=j(e.pipes,t);-1!==n&&(e.pipes.splice(n,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i))}else{var s=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<r;a++)s[a].emit("unpipe",this,{hasUnpiped:!1})}return this},c.prototype.addListener=c.prototype.on=function(t,e){e=i.prototype.on.call(this,t,e);return"data"===t?!1!==this._readableState.flowing&&this.resume():"readable"!==t||(t=this._readableState).endEmitted||t.readableListening||(t.readableListening=t.needReadable=!0,t.emittedReadable=!1,t.reading?t.length&&b(this):_.nextTick(k,this)),e},c.prototype.resume=function(){var t,e=this._readableState;return e.flowing||(y("resume"),e.flowing=!0,t=this,(e=e).resumeScheduled)||(e.resumeScheduled=!0,_.nextTick(S,t,e)),this},c.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t,i=this,n=this._readableState,s=!1;for(t in e.on("end",function(){var t;y("wrapped end"),n.decoder&&!n.ended&&(t=n.decoder.end())&&t.length&&i.push(t),i.push(null)}),e.on("data",function(t){y("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t||(n.objectMode||t&&t.length)&&!i.push(t)&&(s=!0,e.pause())}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=(t=>function(){return e[t].apply(e,arguments)})(t));for(var r=0;r<h.length;r++)e.on(h[r],this.emit.bind(this,h[r]));return this._read=function(t){y("wrapped _read",t),s&&(s=!1,e.resume())},this},Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),c._fromList=E),ze;function l(t,e){t=t||{};var e=e instanceof(r=r||Oe()),i=(this.objectMode=!!t.objectMode,e&&(this.objectMode=this.objectMode||!!t.readableObjectMode),t.highWaterMark),n=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:e&&(n||0===n)?n:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(o=o||$e().StringDecoder,this.decoder=new o(t.encoding),this.encoding=t.encoding)}function c(t){if(r=r||Oe(),!(this instanceof c))return new c(t);this._readableState=new l(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy)&&(this._destroy=t.destroy),i.call(this)}function p(t,e,i,n,s){var r,a,o,h,l=t._readableState;return null===e?(l.reading=!1,a=t,(h=l).ended||(h.decoder&&(o=h.decoder.end())&&o.length&&(h.buffer.push(o),h.length+=h.objectMode?1:o.length),h.ended=!0,b(a))):(r=s?r:((t,e)=>{var i;return i=(t=>d.isBuffer(t)||t instanceof u)(e)||"string"==typeof e||void 0===e||t.objectMode?i:new TypeError("Invalid non-string/buffer chunk")})(l,e))?t.emit("error",r):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===d.prototype||(o=e,e=d.from(o)),n?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):f(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,!l.decoder||i||(e=l.decoder.write(e),l.objectMode)||0!==e.length?f(t,l,e,!1):x(t,l))):n||(l.reading=!1),!(h=l).ended&&(h.needReadable||h.length<h.highWaterMark||0===h.length)}function f(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&b(t)),x(t,e)}function v(t,e){var i;return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?(e.flowing&&e.length?e.buffer.head.data:e).length:(e.highWaterMark<t&&(e.highWaterMark=(s<=(i=t)?i=s:(i--,i=(i=(i=(i=(i|=i>>>1)|i>>>2)|i>>>4)|i>>>8)|i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function b(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(y("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?_.nextTick(w,t):w(t))}function w(t){y("emit readable"),t.emit("readable"),L(t)}function x(t,e){e.readingMore||(e.readingMore=!0,_.nextTick(M,t,e))}function M(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(y("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function k(t){y("readable nexttick read 0"),t.read(0)}function S(t,e){e.reading||(y("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(y("flow",e.flowing);e.flowing&&null!==t.read(););}function E(t,e){var i;return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=((t,e,i)=>{var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():(i?(t,e)=>{var i=e.head,n=1,s=i.data;for(t-=s.length;i=i.next;){var r=i.data,a=t>r.length?r.length:t;if(s+=a===r.length?r:r.slice(0,t),0===(t-=a)){a===r.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=r.slice(a);break}++n}return e.length-=n,s}:(t,e)=>{var i=d.allocUnsafe(t),n=e.head,s=1;for(n.data.copy(i),t-=n.data.length;n=n.next;){var r=n.data,a=t>r.length?r.length:t;if(r.copy(i,i.length-t,0,a),0===(t-=a)){a===r.length?(++s,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=r.slice(a);break}++s}return e.length-=s,i})(t,e),n})(t,e.buffer,e.decoder),i)}function A(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,_.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function j(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}}function He(){var n,t;return Re||(Re=1,Be=e,n=Oe(),(t=Object.create(fe())).inherits=ve(),t.inherits(e,n),e.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},e.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},e.prototype._write=function(t,e,i){var n=this._transformState;n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming&&(i=this._readableState,n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)},e.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},e.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}),Be;function e(t){if(!(this instanceof e))return new e(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState,n=(i.transforming=!1,i.writecb);if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=e&&this.push(e),n(t),(i=this._readableState).reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush)&&(this._flush=t.flush),this.on("prefinish",i)}function i(){var i=this;"function"==typeof this._flush?this._flush(function(t,e){s(i,t,e)}):s(this,null,null)}function s(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");t.push(null)}}function Je(){var t,e,i,n;return Ue||(Ue=1,e=(t=ae).exports,n=O,"disable"===process.env.READABLE_STREAM&&n?(t.exports=n,(e=t.exports=n.Readable).Readable=n.Readable,e.Writable=n.Writable,e.Duplex=n.Duplex,e.Transform=n.Transform,e.PassThrough=n.PassThrough,e.Stream=n):((e=t.exports=Ze()).Stream=n||e,(e.Readable=e).Writable=Ne(),e.Duplex=Oe(),e.Transform=He(),e.PassThrough=(Fe||(Fe=1,De=s,i=He(),(t=Object.create(fe())).inherits=ve(),t.inherits(s,i),s.prototype._transform=function(t,e,i){i(null,t)}),De))),ae.exports;function s(t){if(!(this instanceof s))return new s(t);i.call(this,t)}}function Ke(){if(!qe){if(qe=1,n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var e=new ArrayBuffer(0);try{n.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(e),n.blob=0===i.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!Je().Readable}catch(t){n.nodestream=!1}}return n}var Xe,Qe,Ye,ti,ei,ii,ni,si,ri,ai={};function oi(){var u,c,p;return Xe||(Xe=1,u=M(),c=Ke(),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ai.encode=function(t){for(var e,i,n,s,r,a,o=[],h=0,l=t.length,d="string"!==u.getTypeOf(t);h<t.length;)a=l-h,n=d?(e=t[h++],i=h<l?t[h++]:0,h<l?t[h++]:0):(e=t.charCodeAt(h++),i=h<l?t.charCodeAt(h++):0,h<l?t.charCodeAt(h++):0),s=(3&e)<<4|i>>4,r=1<a?(15&i)<<2|n>>6:64,a=2<a?63&n:64,o.push(p.charAt(e>>2)+p.charAt(s)+p.charAt(r)+p.charAt(a));return o.join("")},ai.decode=function(t){var e,i,n,s,r,a,o=0,h=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var l,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&d--,t.charAt(t.length-2)===p.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=new(c.uint8array?Uint8Array:Array)(0|d);o<t.length;)n=p.indexOf(t.charAt(o++)),e=(15&(s=p.indexOf(t.charAt(o++))))<<4|(r=p.indexOf(t.charAt(o++)))>>2,i=(3&r)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=n<<2|s>>4,64!==r&&(l[h++]=e),64!==a&&(l[h++]=i);return l}),ai}function hi(){return Ye||(Ye=1,Qe={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){return Buffer.alloc?Buffer.alloc(t):((t=new Buffer(t)).fill(0),t)},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}),Qe}function li(){var t,e,i,n,s,r,a;return ei||(ei=1,e=T.MutationObserver||T.WebKitMutationObserver,s=process.browser?e?(t=0,e=new e(o),i=T.document.createTextNode(""),e.observe(i,{characterData:!0}),function(){i.data=t=++t%2}):T.setImmediate||void 0===T.MessageChannel?"document"in T&&"onreadystatechange"in T.document.createElement("script")?function(){var t=T.document.createElement("script");t.onreadystatechange=function(){o(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},T.document.documentElement.appendChild(t)}:function(){setTimeout(o,0)}:((n=new T.MessageChannel).port1.onmessage=o,function(){n.port2.postMessage(0)}):function(){process.nextTick(o)},a=[],ti=function(t){1!==a.push(t)||r||s()}),ti;function o(){r=!0;for(var t,e,i=a.length;i;){for(e=a,a=[],t=-1;++t<i;)e[t]();i=a.length}r=!1}}function di(){var s,h,r,a,n,o;return ni||(ni=1,s=li(),h={},r=["REJECTED"],a=["FULFILLED"],n=["PENDING"],process.browser||(o=["UNHANDLED"]),(ii=t).prototype.finally=function(e){var i;return"function"!=typeof e?this:(i=this.constructor,this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){throw t})}))},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.then=function(t,e){var i;return"function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===r?this:(i=new this.constructor(l),process.browser||this.handled===o&&(this.handled=null),this.state!==n?u(i,this.state===a?t:e,this.outcome):this.queue.push(new d(i,t,e)),i)},d.prototype.callFulfilled=function(t){h.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){u(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){h.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){u(this.promise,this.onRejected,t)},h.resolve=function(t,e){var i=f(c,e);if("error"===i.status)return h.reject(t,i.value);i=i.value;if(i)p(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},h.reject=function(t,e){t.state=r,t.outcome=e,process.browser||t.handled===o&&s(function(){t.handled===o&&process.emit("unhandledRejection",e,t)});for(var i=-1,n=t.queue.length;++i<n;)t.queue[i].callRejected(e);return t},t.resolve=function(t){if(t instanceof this)return t;return h.resolve(new this(l),t)},t.reject=function(t){var e=new this(l);return h.reject(e,t)},t.all=function(t){var i=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,s=!1;if(!n)return this.resolve([]);var r=new Array(n),a=0,e=-1,o=new this(l);for(;++e<n;)((t,e)=>{i.resolve(t).then(function(t){r[e]=t,++a!==n||s||(s=!0,h.resolve(o,r))},function(t){s||(s=!0,h.reject(o,t))})})(t[e],e);return o},t.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,n=!1;if(!i)return this.resolve([]);var s=-1,r=new this(l);for(;++s<i;)(t=>{e.resolve(t).then(function(t){n||(n=!0,h.resolve(r,t))},function(t){n||(n=!0,h.reject(r,t))})})(t[s]);return r}),ii;function l(){}function t(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=n,this.queue=[],this.outcome=void 0,process.browser||(this.handled=o),t!==l&&p(this,t)}function d(t,e,i){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function u(e,i,n){s(function(){var t;try{t=i(n)}catch(t){return h.reject(e,t)}t===e?h.reject(e,new TypeError("Cannot resolve promise with itself")):h.resolve(e,t)})}function c(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(e,t){var i=!1;function n(t){i||(i=!0,h.reject(e,t))}function s(t){i||(i=!0,h.resolve(e,t))}var r=f(function(){t(s,n)});"error"===r.status&&n(r.value)}function f(t,e){var i={};try{i.value=t(e),i.status="success"}catch(t){i.status="error",i.value=t}return i}}function ui(){var t;return ri||(ri=1,t=null,t="undefined"!=typeof Promise?Promise:di(),si={Promise:t}),si}var ci,pi,fi,_i,gi,mi,yi,vi,bi,wi,xi,Mi={};function ki(){var i,r,n,a,o,s,h,l,e,t;function d(t){delete a[t]}function u(t){if(o)setTimeout(u,0,t);else{var e=a[t];if(e){o=!0;try{var i=e,n=i.callback,s=i.args;switch(s.length){case 0:n();break;case 1:n(s[0]);break;case 2:n(s[0],s[1]);break;case 3:n(s[0],s[1],s[2]);break;default:n.apply(r,s)}}finally{d(t),o=!1}}}}function c(){function t(t){t.source===i&&"string"==typeof t.data&&0===t.data.indexOf(e)&&u(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";i.addEventListener?i.addEventListener("message",t,!1):i.attachEvent("onmessage",t),h=function(t){i.postMessage(e+t,"*")}}ci||(ci=1,(i="undefined"==typeof self?void 0===T?Mi:T:self).setImmediate)||(n=1,o=!(a={}),s=i.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(i))&&t.setTimeout?t:i,"[object process]"==={}.toString.call(i.process)?h=function(t){process.nextTick(function(){u(t)})}:(()=>{var t,e;return i.postMessage&&!i.importScripts&&(t=!0,e=i.onmessage,i.onmessage=function(){t=!1},i.postMessage("","*"),i.onmessage=e,t)})()?c():h=i.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){u(t.data)},function(t){e.port2.postMessage(t)}):s&&"onreadystatechange"in s.createElement("script")?(l=s.documentElement,function(t){var e=s.createElement("script");e.onreadystatechange=function(){u(t),e.onreadystatechange=null,l.removeChild(e),e=null},l.appendChild(e)}):function(t){setTimeout(u,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];return a[n]={callback:t,args:e},h(n),n++},t.clearImmediate=d)}function M(){var a,o,h,e,l,s,n;return pi||(pi=1,a=re,o=Ke(),h=oi(),e=hi(),l=ui(),ki(),a.newBlob=function(e,i){a.checkSupport("blob");try{return new Blob([e],{type:i})}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(i)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},s={stringifyByChunk:function(t,e,i){var n=[],s=0,r=t.length;if(r<=i)return String.fromCharCode.apply(null,t);for(;s<r;)n.push("array"===e||"nodebuffer"===e?String.fromCharCode.apply(null,t.slice(s,Math.min(s+i,r))):String.fromCharCode.apply(null,t.subarray(s,Math.min(s+i,r)))),s+=i;return n.join("")},stringifyByChar:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},applyCanBeUsed:{uint8array:(()=>{try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}})(),nodebuffer:(()=>{try{return o.nodebuffer&&1===String.fromCharCode.apply(null,e.allocBuffer(1)).length}catch(t){return!1}})()}},a.applyFromCharCode=i,(n={}).string={string:t,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return n.string.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:function(t){return d(t,e.allocBuffer(t.length))}},n.array={string:i,array:t,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return e.newBufferFrom(t)}},n.arraybuffer={string:function(t){return i(new Uint8Array(t))},array:function(t){return r(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:t,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return e.newBufferFrom(new Uint8Array(t))}},n.uint8array={string:i,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:t,nodebuffer:function(t){return e.newBufferFrom(t)}},n.nodebuffer={string:i,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return n.nodebuffer.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:t},a.transformTo=function(t,e){if(e=e||"",!t)return e;a.checkSupport(t);var i=a.getTypeOf(e);return n[i][t](e)},a.resolve=function(t){for(var e=t.split("/"),i=[],n=0;n<e.length;n++){var s=e[n];"."===s||""===s&&0!==n&&n!==e.length-1||(".."===s?i.pop():i.push(s))}return i.join("/")},a.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&e.isBuffer(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){for(var e,i="",n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,i){setImmediate(function(){t.apply(i||null,e||[])})},a.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i},a.extend=function(){for(var t,e={},i=0;i<arguments.length;i++)for(t in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],t)&&void 0===e[t]&&(e[t]=arguments[i][t]);return e},a.prepareContent=function(i,t,n,s,r){return l.Promise.resolve(t).then(function(n){return o.blob&&(n instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n)))&&"undefined"!=typeof FileReader?new l.Promise(function(e,i){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){i(t.target.error)},t.readAsArrayBuffer(n)}):n}).then(function(t){var e=a.getTypeOf(t);return e?("arraybuffer"===e?t=a.transformTo("uint8array",t):"string"===e&&(r?t=h.decode(t):n&&!0!==s&&(t=d(e=t,new(o.uint8array?Uint8Array:Array)(e.length)))),t):l.Promise.reject(new Error("Can't read the data of '"+i+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}),re;function t(t){return t}function d(t,e){for(var i=0;i<t.length;++i)e[i]=255&t.charCodeAt(i);return e}function i(t){var e=65536,i=a.getTypeOf(t),n=!0;if("uint8array"===i?n=s.applyCanBeUsed.uint8array:"nodebuffer"===i&&(n=s.applyCanBeUsed.nodebuffer),n)for(;1<e;)try{return s.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function r(t,e){for(var i=0;i<t.length;i++)e[i]=t[i];return e}}function k(){return _i||(_i=1,t.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var t;return!(!this.isPaused||this.isFinished||(t=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),t))},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},fi=t),fi;function t(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}}function Si(){if(!gi){gi=1;for(var s=se,h=M(),l=Ke(),d=hi(),t=k(),u=new Array(256),e=0;e<256;e++)u[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;function i(){t.call(this,"utf-8 decode"),this.leftOver=null}function n(){t.call(this,"utf-8 encode")}u[254]=u[254]=1,s.utf8encode=function(t){if(l.nodebuffer)return d.newBufferFrom(t,"utf-8");for(var e,i,n,s,r=t,a=r.length,o=0,h=0;h<a;h++)55296==(64512&(i=r.charCodeAt(h)))&&h+1<a&&56320==(64512&(n=r.charCodeAt(h+1)))&&(i=65536+(i-55296<<10)+(n-56320),h++),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new(l.uint8array?Uint8Array:Array)(o),h=s=0;s<o;h++)55296==(64512&(i=r.charCodeAt(h)))&&h+1<a&&56320==(64512&(n=r.charCodeAt(h+1)))&&(i=65536+(i-55296<<10)+(n-56320),h++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e},s.utf8decode=function(t){if(l.nodebuffer)return h.transformTo("nodebuffer",t).toString("utf-8");for(var e,i,n=t=h.transformTo(l.uint8array?"uint8array":"array",t),s=n.length,r=new Array(2*s),a=0,o=0;o<s;)if((e=n[o++])<128)r[a++]=e;else if(4<(i=u[e]))r[a++]=65533,o+=i-1;else{for(e&=2===i?31:3===i?15:7;1<i&&o<s;)e=e<<6|63&n[o++],i--;1<i?r[a++]=65533:e<65536?r[a++]=e:(e-=65536,r[a++]=55296|e>>10&1023,r[a++]=56320|1023&e)}return r.length!==a&&(r.subarray?r=r.subarray(0,a):r.length=a),h.applyFromCharCode(r)},h.inherits(i,t),i.prototype.processChunk=function(t){var e=h.transformTo(l.uint8array?"uint8array":"array",t.data),i=(this.leftOver&&this.leftOver.length&&(l.uint8array?(i=e,(e=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),e.set(i,this.leftOver.length)):e=this.leftOver.concat(e),this.leftOver=null),((t,e)=>{for(var i=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=i&&128==(192&t[i]);)i--;return!(i<0)&&0!==i&&i+u[t[i]]>e?i:e})(e)),n=e;i!==e.length&&(l.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},i.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=i,h.inherits(n,t),n.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=n}return se}function Li(){if(!xi){xi=1;var e,i,s,h=M(),r=(yi||(yi=1,e=k(),(i=M()).inherits(d,e),d.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},mi=d),mi),a=k(),l=oi(),t=Ke(),n=ui(),o=null;if(t.nodestream)try{bi||(bi=1,s=Je().Readable,M().inherits(u,s),u.prototype._read=function(){this._helper.resume()},vi=u),o=vi}catch(t){}p.prototype={accumulate:function(t){return c(this,t)},on:function(t,e){var i=this;return"data"===t?this._worker.on(t,function(t){e.call(i,t.data,t.meta)}):this._worker.on(t,function(){h.delay(e,arguments,i)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new o(this,{objectMode:"nodebuffer"!==this._outputType},t)}},wi=p}return wi;function d(t){e.call(this,"ConvertWorker to "+t),this.destType=t}function u(t,e,i){s.call(this,e),this._helper=t;var n=this;t.on("data",function(t,e){n.push(t)||n._helper.pause(),i&&i(e)}).on("error",function(t){n.emit("error",t)}).on("end",function(){n.push(null)})}function c(t,o){return new n.Promise(function(e,i){var n=[],s=t._internalType,r=t._outputType,a=t._mimeType;t.on("data",function(t,e){n.push(t),o&&o(e)}).on("error",function(t){n=[],i(t)}).on("end",function(){try{var t=((t,e,i)=>{switch(t){case"blob":return h.newBlob(h.transformTo("arraybuffer",e),i);case"base64":return l.encode(e);default:return h.transformTo(t,e)}})(r,((t,e)=>{for(var i=0,n=null,s=0,r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}})(s,n),a);e(t)}catch(t){i(t)}n=[]}).resume()})}function p(t,e,i){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=e,this._mimeType=i,h.checkSupport(n),this._worker=t.pipe(new r(n)),t.lock()}catch(t){this._worker=new a("error"),this._worker.error(t)}}}var Ei,Ai,Ci,ji,Ti,Ni,Oi,Ii,Pi,zi,Gi,Bi,Ri,Di={};function Fi(){return Ei||(Ei=1,Di.base64=!1,Di.binary=!1,Di.dir=!1,Di.createFolders=!0,Di.date=null,Di.compression=null,Di.compressionOptions=null,Di.comment=null,Di.unixPermissions=null,Di.dosPermissions=null),Di}function Ui(){var i,n;return Ci||(Ci=1,i=M(),n=k(),i.inherits(t,n),t.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},t.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},t.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},t.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},Ai=t),Ai;function t(t){n.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}}function qi(){var f,_;return Ti||(Ti=1,f=M(),_=(()=>{for(var t=[],e=0;e<256;e++){for(var i=e,n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t})(),ji=function(t,e){if(void 0===t||!t.length)return 0;if("string"!==f.getTypeOf(t)){var i=0|e,n=t,s=t.length,r=0,a=_,o=r+s;i^=-1;for(var h=r;h<o;h++)i=i>>>8^a[255&(i^n[h])];return-1^i}var l=0|e,d=t,s=t.length,r=0,u=_,c=r+s;l^=-1;for(var p=r;p<c;p++)l=l>>>8^u[255&(l^d.charCodeAt(p))];return-1^l}),ji}function Vi(){var t,e;return Oi||(Oi=1,t=k(),e=qi(),M().inherits(i,t),i.prototype.processChunk=function(t){this.streamInfo.crc32=e(t.data,this.streamInfo.crc32||0),this.push(t)},Ni=i),Ni;function i(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}}function Wi(){var i,n,s,r,t,a;return Gi||(Gi=1,i=ui(),n=Ui(),s=Vi(),Pi||(Pi=1,t=M(),a=k(),t.inherits(e,a),e.prototype.processChunk=function(t){var e;t&&(e=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=e+t.data.length),a.prototype.processChunk.call(this,t)},Ii=e),r=Ii,o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new r("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(t,e,i){return t.pipe(new s).pipe(new r("uncompressedSize")).pipe(e.compressWorker(i)).pipe(new r("compressedSize")).withStreamInfo("compression",e)},zi=o),zi;function e(t){a.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}function o(t,e,i,n,s){this.compressedSize=t,this.uncompressedSize=e,this.crc32=i,this.compression=n,this.compressedContent=s}}var $i,Zi={},Hi={},Ji={},Ki={};function Xi(){var e,t,i,n;return $i||($i=1,e=Ki,t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,e.assign=function(t){for(var e,i,n=Array.prototype.slice.call(arguments,1);n.length;){var s=n.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(var r in s)e=s,i=r,Object.prototype.hasOwnProperty.call(e,i)&&(t[r]=s[r])}}return t},e.shrinkBuf=function(t,e){if(t.length!==e){if(t.subarray)return t.subarray(0,e);t.length=e}return t},i={arraySet:function(t,e,i,n,s){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),s);else for(var r=0;r<n;r++)t[s+r]=e[i+r]},flattenChunks:function(t){for(var e,i,n,s=0,r=0,a=t.length;r<a;r++)s+=t[r].length;for(n=new Uint8Array(s),r=e=0,a=t.length;r<a;r++)i=t[r],n.set(i,e),e+=i.length;return n}},n={arraySet:function(t,e,i,n,s){for(var r=0;r<n;r++)t[s+r]=e[i+r]},flattenChunks:function(t){return[].concat.apply([],t)}},e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,n))},e.setTyped(t)),Ki}var Qi,Yi,tn,en,nn,sn,rn,an,on={},hn={},ln={};function dn(){var s,d,u,o,c,h,l,p,S,L,n,f,_,g,m,y,v,b,w,x,M,k,E,A,C,j,T,R,D,N;return Qi||(Qi=1,s=Xi(),l=30,p=19,S=2*(h=(c=256)+(u=1)+(o=29))+1,_=256,v=[d=0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,f=7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[g=n=16,m=17,y=18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,L=15],t(M=new Array(2*(h+2))),t(k=new Array(2*l)),t(E=new Array(512)),t(A=new Array(256)),t(C=new Array(o)),t(j=new Array(l)),N=!1,ln._tr_init=function(t){if(!N){for(var e,i,n,s=new Array(L+1),r=0,a=0;a<o-1;a++)for(C[a]=r,e=0;e<1<<v[a];e++)A[r++]=a;for(A[r-1]=a,a=n=0;a<16;a++)for(j[a]=n,e=0;e<1<<b[a];e++)E[n++]=a;for(n>>=7;a<l;a++)for(j[a]=n<<7,e=0;e<1<<b[a]-7;e++)E[256+n++]=a;for(i=0;i<=L;i++)s[i]=0;for(e=0;e<=143;)M[2*e+1]=8,e++,s[8]++;for(;e<=255;)M[2*e+1]=9,e++,s[9]++;for(;e<=279;)M[2*e+1]=7,e++,s[7]++;for(;e<=287;)M[2*e+1]=8,e++,s[8]++;for(q(M,h+1,s),e=0;e<l;e++)k[2*e+1]=5,k[2*e]=U(e,5);T=new O(M,v,c+1,h,L),R=new O(k,b,0,l,L),D=new O(new Array(0),w,0,p,f),N=!0}t.l_desc=new I(t.dyn_ltree,T),t.d_desc=new I(t.dyn_dtree,R),t.bl_desc=new I(t.bl_tree,D),t.bi_buf=0,t.bi_valid=0,V(t)},ln._tr_stored_block=J,ln._tr_flush_block=function(t,e,i,n){var s,r,a=0;if(0<t.level?(2===t.strm.data_type&&(t.strm.data_type=(t=>{for(var e=4093624447,i=0;i<=31;i++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*i])return d;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return u;for(i=32;i<c;i++)if(0!==t.dyn_ltree[2*i])return u;return d})(t)),B(t,t.l_desc),B(t,t.d_desc),a=(t=>{var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),B(t,t.bl_desc),e=p-1;3<=e&&0===t.bl_tree[2*x[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),(r=t.static_len+3+7>>>3)<=(s=t.opt_len+3+7>>>3)&&(s=r)):s=r=i+5,i+4<=s&&-1!==e)J(t,e,i,n);else if(4===t.strategy||r===s)P(t,2+(n?1:0),3),$(t,M,k);else{P(t,4+(n?1:0),3);var o,h=t,e=t.l_desc.max_code+1,i=t.d_desc.max_code+1,l=a+1;for(P(h,e-257,5),P(h,i-1,5),P(h,l-4,4),o=0;o<l;o++)P(h,h.bl_tree[2*x[o]+1],3);H(h,h.dyn_ltree,e-1),H(h,h.dyn_dtree,i-1),$(t,t.dyn_ltree,t.dyn_dtree)}V(t),n&&W(t)},ln._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(A[i]+c+1)]++,t.dyn_dtree[2*F(e)]++),t.last_lit===t.lit_bufsize-1},ln._tr_align=function(t){P(t,2,3),z(t,_,M),16===(t=t).bi_valid?(r(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}),ln;function t(t){for(var e=t.length;0<=--e;)t[e]=0}function O(t,e,i,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}function I(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function F(t){return t<256?E[t]:E[256+(t>>>7)]}function r(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,i){t.bi_valid>n-i?(t.bi_buf|=e<<t.bi_valid&65535,r(t,t.bi_buf),t.bi_buf=e>>n-t.bi_valid,t.bi_valid+=i-n):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function z(t,e,i){P(t,i[2*e],i[2*e+1])}function U(t,e){for(var i=0;i|=1&t,t>>>=1,i<<=1,0<--e;);return i>>>1}function q(t,e,i){for(var n,s=new Array(L+1),r=0,a=1;a<=L;a++)s[a]=r=r+i[a-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=U(s[o]++,o))}}function V(t){for(var e=0;e<h;e++)t.dyn_ltree[2*e]=0;for(e=0;e<l;e++)t.dyn_dtree[2*e]=0;for(e=0;e<p;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*_]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){8<t.bi_valid?r(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function a(t,e,i,n){var s=2*e,r=2*i;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[i]}function G(t,e,i){for(var n=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&a(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!a(e,n,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=n}function $(t,e,i){var n,s,r,a,o=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],s=t.pending_buf[t.l_buf+o],o++,0==n?z(t,s,e):(z(t,(r=A[s])+c+1,e),0!==(a=v[r])&&P(t,s-=C[r],a),z(t,r=F(--n),i),0!==(a=b[r])&&P(t,n-=j[r],a)),o<t.last_lit;);z(t,_,e)}function B(t,e){var i,n,s,r=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=S,i=0;i<h;i++)0!==r[2*i]?(t.heap[++t.heap_len]=l=i,t.depth[i]=0):r[2*i+1]=0;for(;t.heap_len<2;)r[2*(s=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[s]=0,t.opt_len--,o&&(t.static_len-=a[2*s+1]);for(e.max_code=l,i=t.heap_len>>1;1<=i;i--)G(t,r,i);for(s=h;i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,r[2*s]=r[2*i]+r[2*n],t.depth[s]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,r[2*i+1]=r[2*n+1]=s,t.heap[1]=s++,G(t,r,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1];for(var d,u,c,p,f,_=t,g=e.dyn_tree,m=e.max_code,y=e.stat_desc.static_tree,v=e.stat_desc.has_stree,b=e.stat_desc.extra_bits,w=e.stat_desc.extra_base,x=e.stat_desc.max_length,M=0,k=0;k<=L;k++)_.bl_count[k]=0;for(g[2*_.heap[_.heap_max]+1]=0,d=_.heap_max+1;d<S;d++)x<(k=g[2*g[2*(u=_.heap[d])+1]+1]+1)&&(k=x,M++),g[2*u+1]=k,m<u||(_.bl_count[k]++,p=0,w<=u&&(p=b[u-w]),f=g[2*u],_.opt_len+=f*(k+p),v&&(_.static_len+=f*(y[2*u+1]+p)));if(0!==M){do{for(k=x-1;0===_.bl_count[k];)k--}while(_.bl_count[k]--,_.bl_count[k+1]+=2,_.bl_count[x]--,0<(M-=2));for(k=x;0!==k;k--)for(u=_.bl_count[k];0!==u;)m<(c=_.heap[--d])||(g[2*c+1]!==k&&(_.opt_len+=(k-g[2*c+1])*g[2*c],g[2*c+1]=k),u--)}q(r,l,t.bl_count)}function Z(t,e,i){var n,s,r=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)s=a,a=e[2*(n+1)+1],++o<h&&s===a||(o<l?t.bl_tree[2*s]+=o:0!==s?(s!==r&&t.bl_tree[2*s]++,t.bl_tree[2*g]++):o<=10?t.bl_tree[2*m]++:t.bl_tree[2*y]++,r=s,l=(o=0)===a?(h=138,3):s===a?(h=6,3):(h=7,4))}function H(t,e,i){var n,s,r=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),n=0;n<=i;n++)if(s=a,a=e[2*(n+1)+1],!(++o<h&&s===a)){if(o<l)for(;z(t,s,t.bl_tree),0!=--o;);else 0!==s?(s!==r&&(z(t,s,t.bl_tree),o--),z(t,g,t.bl_tree),P(t,o-3,2)):o<=10?(z(t,m,t.bl_tree),P(t,o-3,3)):(z(t,y,t.bl_tree),P(t,o-11,7));r=s,l=(o=0)===a?(h=138,3):s===a?(h=6,3):(h=7,4)}}function J(t,e,i,n){P(t,0+(n?1:0),3),n=e,e=i,W(i=t),r(i,e),r(i,~e),s.arraySet(i.pending_buf,i.window,n,e,i.pending),i.pending+=e}}function un(){return tn||(tn=1,Yi=function(t,e,i,n){for(var s=65535&t|0,r=t>>>16&65535|0,a=0;0!==i;){for(i-=a=2e3<i?2e3:i;r=r+(s=s+e[n++]|0)|0,--a;);s%=65521,r%=65521}return s|r<<16|0}),Yi}function cn(){var o;return nn||(nn=1,o=(()=>{for(var t=[],e=0;e<256;e++){for(var i=e,n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}return t})(),en=function(t,e,i,n){var s=o,r=n+i;t^=-1;for(var a=n;a<r;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}),en}function pn(){return rn||(rn=1,sn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),sn}function fn(){var u,o,c,p,i,h,l,d,f,_,g,n,m,y,t,e,z,G,B,v,b,w,x,M,k,S,L,E,A;return an||(an=1,u=Xi(),o=dn(),c=un(),p=cn(),i=pn(),f=-2,0,0,_=-1,y=9,m=8,e=30,z=19,G=(n=2)*(t=286)+1,B=15,w=(b=258)+(v=3)+1,x=42,M=113,k=1,S=2,E=g=l=4,L=3,A=[new a(d=h=0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(P(t),0===t.lookahead&&e===h)return k;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,N(t,!1),0===t.strm.avail_out))return k;if(t.w_size-w<=t.strstart-t.block_start&&(N(t,!1),0===t.strm.avail_out))return k}return t.insert=0,e===l?(N(t,!0),0===t.strm.avail_out?L:E):(t.block_start<t.strstart&&(N(t,!1),t.strm.avail_out),k)}),new a(4,4,8,4,s),new a(4,5,16,8,s),new a(4,6,32,32,s),new a(4,4,16,16,r),new a(8,16,32,32,r),new a(8,16,128,128,r),new a(8,32,128,256,r),new a(32,128,258,1024,r),new a(32,258,258,4096,r)],hn.deflateInit=function(t,e){return V(t,e,m,15,8,0)},hn.deflateInit2=V,hn.deflateReset=q,hn.deflateResetKeep=U,hn.deflateSetHeader=function(t,e){return!t||!t.state||2!==t.state.wrap?f:(t.state.gzhead=e,d)},hn.deflate=function(t,e){var i,n,s,r;if(!t||!t.state||5<e||e<0)return t?C(t,f):f;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||666===n.status&&e!==l)return C(t,0===t.avail_out?-5:f);if(n.strm=t,i=n.last_flush,n.last_flush=e,n.status===x&&(2===n.wrap?(t.adler=0,O(n,31),O(n,139),O(n,8),n.gzhead?(O(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),O(n,255&n.gzhead.time),O(n,n.gzhead.time>>8&255),O(n,n.gzhead.time>>16&255),O(n,n.gzhead.time>>24&255),O(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),O(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(O(n,255&n.gzhead.extra.length),O(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=p(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(O(n,0),O(n,0),O(n,0),O(n,0),O(n,0),O(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),O(n,3),n.status=M)):(a=m+(n.w_bits-8<<4)<<8,a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=M,I(n,a),0!==n.strstart&&(I(n,t.adler>>>16),I(n,65535&t.adler)),t.adler=1)),69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),T(t),s=n.pending,n.pending!==n.pending_buf_size));)O(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),T(t),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}}while(r=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,O(n,r),0!==r);n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),0===r&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),T(t),s=n.pending,n.pending===n.pending_buf_size)){r=1;break}}while(r=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,O(n,r),0!==r);n.gzhead.hcrc&&n.pending>s&&(t.adler=p(t.adler,n.pending_buf,n.pending-s,s)),0===r&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&T(t),n.pending+2<=n.pending_buf_size&&(O(n,255&t.adler),O(n,t.adler>>8&255),t.adler=0,n.status=M)):n.status=M),0!==n.pending){if(T(t),0===t.avail_out)return n.last_flush=-1,d}else if(0===t.avail_in&&R(e)<=R(i)&&e!==l)return C(t,-5);if(666===n.status&&0!==t.avail_in)return C(t,-5);if(0!==t.avail_in||0!==n.lookahead||e!==h&&666!==n.status){var a=2===n.strategy?((t,e)=>{for(var i;;){if(0===t.lookahead&&(P(t),0===t.lookahead)){if(e===h)return k;break}if(t.match_length=0,i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return k}return t.insert=0,e===l?(N(t,!0),0===t.strm.avail_out?L:E):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?k:S})(n,e):3===n.strategy?((t,e)=>{for(var i,n,s,r,a=t.window;;){if(t.lookahead<=b){if(P(t),t.lookahead<=b&&e===h)return k;if(0===t.lookahead)break}if(t.match_length=0,v<=t.lookahead&&0<t.strstart&&(n=a[s=t.strstart-1])===a[++s]&&n===a[++s]&&n===a[++s]){for(r=t.strstart+b;n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<r;);t.match_length=b-(r-s),t.lookahead<t.match_length&&(t.match_length=t.lookahead)}if(v<=t.match_length?(i=o._tr_tally(t,1,t.match_length-v),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(N(t,!1),0===t.strm.avail_out))return k}return t.insert=0,e===l?(N(t,!0),0===t.strm.avail_out?L:E):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?k:S})(n,e):A[n.level].func(n,e);if(a!==L&&a!==E||(n.status=666),a===k||a===L)return 0===t.avail_out&&(n.last_flush=-1),d;if(a===S&&(1===e?o._tr_align(n):5!==e&&(o._tr_stored_block(n,0,0,!1),3===e)&&(j(n.head),0===n.lookahead)&&(n.strstart=0,n.block_start=0,n.insert=0),T(t),0===t.avail_out))return n.last_flush=-1,d}return e!==l||!(n.wrap<=0)&&(2===n.wrap?(O(n,255&t.adler),O(n,t.adler>>8&255),O(n,t.adler>>16&255),O(n,t.adler>>24&255),O(n,255&t.total_in),O(n,t.total_in>>8&255),O(n,t.total_in>>16&255),O(n,t.total_in>>24&255)):(I(n,t.adler>>>16),I(n,65535&t.adler)),T(t),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending)?d:1},hn.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==x&&69!==e&&73!==e&&91!==e&&103!==e&&e!==M&&666!==e?C(t,f):(t.state=null,e===M?C(t,-3):d):f},hn.deflateSetDictionary=function(t,e){var i,n,s,r,a,o,h,l=e.length;if(!t||!t.state)return f;if(2===(r=(i=t.state).wrap)||1===r&&i.status!==x||i.lookahead)return f;for(1===r&&(t.adler=c(t.adler,e,l,0)),i.wrap=0,i.w_size<=l&&(0===r&&(j(i.head),i.strstart=0,i.block_start=0,i.insert=0),h=new u.Buf8(i.w_size),u.arraySet(h,e,l-i.w_size,i.w_size,0),e=h,l=i.w_size),h=t.avail_in,a=t.next_in,o=t.input,t.avail_in=l,t.next_in=0,t.input=e,P(i);i.lookahead>=v;){for(n=i.strstart,s=i.lookahead-(v-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+v-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--s;);i.strstart=n,i.lookahead=v-1,P(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=v-1,i.match_available=0,t.next_in=a,t.input=o,t.avail_in=h,i.wrap=r,d},hn.deflateInfo="pako deflate (from Nodeca project)"),hn;function C(t,e){return t.msg=i[e],e}function R(t){return(t<<1)-(4<t?9:0)}function j(t){for(var e=t.length;0<=--e;)t[e]=0}function T(t){var e=t.state,i=e.pending;0!==(i=t.avail_out<i?t.avail_out:i)&&(u.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending)&&(e.pending_out=0)}function N(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,T(t.strm)}function O(t,e){t.pending_buf[t.pending++]=e}function I(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function D(t,e){var i,n,s=t.max_chain_length,r=t.strstart,a=t.prev_length,o=t.nice_match,h=t.w_size-w<t.strstart?t.strstart-(t.w_size-w):0,l=t.window,d=t.w_mask,u=t.prev,c=t.strstart+b,p=l[r+a-1],f=l[r+a];t.good_match<=t.prev_length&&(s>>=2),t.lookahead<o&&(o=t.lookahead);do{if(l[(i=e)+a]===f&&l[i+a-1]===p&&l[i]===l[r]&&l[++i]===l[r+1]){for(r+=2,i++;l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<c;);if(n=b-(c-r),r=c-b,a<n){if(t.match_start=e,o<=(a=n))break;p=l[r+a-1],f=l[r+a]}}}while((e=u[e&d])>h&&0!=--s);return a<=t.lookahead?a:t.lookahead}function P(t){var e,i,n,s,r,a,o,h,l,d=t.w_size;do{if(h=t.window_size-t.lookahead-t.strstart,d+(d-w)<=t.strstart){for(u.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=i=t.hash_size;n=t.head[--e],t.head[e]=d<=n?n-d:0,--i;);for(e=i=d;n=t.prev[--e],t.prev[e]=d<=n?n-d:0,--i;);h+=d}if(0===t.strm.avail_in)break;if(a=t.window,o=t.strstart+t.lookahead,h=h,l=void 0,l=(r=t.strm).avail_in,i=0===(l=h<l?h:l)?0:(r.avail_in-=l,u.arraySet(a,r.input,r.next_in,l,o),1===r.state.wrap?r.adler=c(r.adler,a,l,o):2===r.state.wrap&&(r.adler=p(r.adler,a,l,o)),r.next_in+=l,r.total_in+=l,l),t.lookahead+=i,v<=t.lookahead+t.insert)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+v-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<v)););}while(t.lookahead<w&&0!==t.strm.avail_in)}function s(t,e){for(var i,n;;){if(t.lookahead<w){if(P(t),t.lookahead<w&&e===h)return k;if(0===t.lookahead)break}if(i=0,v<=t.lookahead&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-w&&(t.match_length=D(t,i)),v<=t.match_length)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-v),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=v){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(N(t,!1),0===t.strm.avail_out))return k}return t.insert=t.strstart<v-1?t.strstart:v-1,e===l?(N(t,!0),0===t.strm.avail_out?L:E):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?k:S}function r(t,e){for(var i,n,s;;){if(t.lookahead<w){if(P(t),t.lookahead<w&&e===h)return k;if(0===t.lookahead)break}if(i=0,v<=t.lookahead&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=v-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-w&&(t.match_length=D(t,i),t.match_length<=5)&&(1===t.strategy||t.match_length===v&&4096<t.strstart-t.match_start)&&(t.match_length=v-1),v<=t.prev_length&&t.match_length<=t.prev_length){for(s=t.strstart+t.lookahead-v,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-v),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+v-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=v-1,t.strstart++,n&&(N(t,!1),0===t.strm.avail_out))return k}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return k}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<v-1?t.strstart:v-1,e===l?(N(t,!0),0===t.strm.avail_out?L:E):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?k:S}function a(t,e,i,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=s}function F(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*G),this.dyn_dtree=new u.Buf16(2*(2*e+1)),this.bl_tree=new u.Buf16(2*(2*z+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(B+1),this.heap=new u.Buf16(2*t+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*t+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function U(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?x:M,t.adler=2===e.wrap?0:1,e.last_flush=h,o._tr_init(e),d):C(t,f)}function q(t){var e=U(t);return e===d&&((t=t.state).window_size=2*t.w_size,j(t.head),t.max_lazy_match=A[t.level].max_lazy,t.good_match=A[t.level].good_length,t.nice_match=A[t.level].nice_length,t.max_chain_length=A[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=v-1,t.match_available=0,t.ins_h=0),e}function V(t,e,i,n,s,r){if(!t)return f;var a=1;if(e===_&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||y<s||i!==m||n<8||15<n||e<0||9<e||r<0||g<r)return C(t,f);8===n&&(n=9);var o=new F;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+v-1)/v),o.window=new u.Buf8(2*o.w_size),o.head=new u.Buf16(o.hash_size),o.prev=new u.Buf16(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new u.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=r,o.method=i,q(t)}}var _n,gn,mn,yn,vn={};function bn(){if(!_n){_n=1;var h=Xi(),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var l=new h.Buf8(256),t=0;t<256;t++)l[t]=252<=t?6:248<=t?5:240<=t?4:224<=t?3:192<=t?2:1;l[254]=l[254]=1,vn.string2buf=function(t){for(var e,i,n,s,r=t.length,a=0,o=0;o<r;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),a+=i<128?1:i<2048?2:i<65536?3:4;for(e=new h.Buf8(a),o=s=0;s<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<r&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?e[s++]=i:(i<2048?e[s++]=192|i>>>6:(i<65536?e[s++]=224|i>>>12:(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63),e[s++]=128|i>>>6&63),e[s++]=128|63&i);return e},vn.buf2binstring=function(t){return d(t,t.length)},vn.binstring2buf=function(t){for(var e=new h.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},vn.buf2string=function(t,e){for(var i,n,s=e||t.length,r=new Array(2*s),a=0,o=0;o<s;)if((i=t[o++])<128)r[a++]=i;else if(4<(n=l[i]))r[a++]=65533,o+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&o<s;)i=i<<6|63&t[o++],n--;1<n?r[a++]=65533:i<65536?r[a++]=i:(i-=65536,r[a++]=55296|i>>10&1023,r[a++]=56320|1023&i)}return d(r,a)},vn.utf8border=function(t,e){for(var i=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=i&&128==(192&t[i]);)i--;return!(i<0)&&0!==i&&i+l[t[i]]>e?i:e}}return vn;function d(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&s))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}}function wn(){return mn||(mn=1,gn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}),gn}function xn(){var a,o,h,i,n,l;return yn||(yn=1,a=fn(),o=Xi(),h=bn(),i=pn(),n=wn(),l=Object.prototype.toString,0,0,s.prototype.push=function(t,e){var i,n,s=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=h.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(r),s.next_out=0,s.avail_out=r),1!==(i=a.deflate(s,n))&&0!==i)return this.onEnd(i),!(this.ended=!0)}while(0!==s.avail_out&&(0!==s.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out))),(0<s.avail_in||0===s.avail_out)&&1!==i);return 4===n?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==n||(this.onEnd(0),!(s.avail_out=0))},s.prototype.onData=function(t){this.chunks.push(t)},s.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},on.Deflate=s,on.deflate=r,on.deflateRaw=function(t,e){return(e=e||{}).raw=!0,r(t,e)},on.gzip=function(t,e){return(e=e||{}).gzip=!0,r(t,e)}),on;function s(t){if(!(this instanceof s))return new s(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,(this.strm.avail_out=0)!==(e=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy)))throw new Error(i[e]);if(t.header&&a.deflateSetHeader(this.strm,t.header),t.dictionary){var e,t="string"==typeof t.dictionary?h.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if(0!==(e=a.deflateSetDictionary(this.strm,t)))throw new Error(i[e]);this._dict_set=!0}}function r(t,e){e=new s(e);if(e.push(t,!0),e.err)throw e.msg||i[e.err];return e.result}}var Mn,kn,Sn,Ln,En,An,Cn,jn,Tn,Nn,On,In,Pn,zn,Gn={},Bn={};function Rn(){var T,N,O,I,E,A,P,z,G,B,R,D,F,U,q,V,W,$,Z,H,J,K,X,i,n,Q,Y,tt;return En||(En=1,T=Xi(),N=un(),O=cn(),kn||(kn=1,E=30,A=12,Mn=function(t,e){var i,n,s,r,a,o,h=t.state,l=t.next_in,d=t.input,u=l+(t.avail_in-5),c=t.next_out,p=t.output,f=c-(e-t.avail_out),_=c+(t.avail_out-257),g=h.dmax,m=h.wsize,y=h.whave,v=h.wnext,b=h.window,w=h.hold,x=h.bits,M=h.lencode,k=h.distcode,S=(1<<h.lenbits)-1,L=(1<<h.distbits)-1;t:do{for(x<15&&(w+=d[l++]<<x,x+=8,w+=d[l++]<<x,x+=8),i=M[w&S];;){if(w>>>=n=i>>>24,x-=n,0===(n=i>>>16&255))p[c++]=65535&i;else{if(!(16&n)){if(0==(64&n)){i=M[(65535&i)+(w&(1<<n)-1)];continue}if(32&n){h.mode=A;break t}t.msg="invalid literal/length code",h.mode=E;break t}for(s=65535&i,(n&=15)&&(x<n&&(w+=d[l++]<<x,x+=8),s+=w&(1<<n)-1,w>>>=n,x-=n),x<15&&(w+=d[l++]<<x,x+=8,w+=d[l++]<<x,x+=8),i=k[w&L];;){if(w>>>=n=i>>>24,x-=n,!(16&(n=i>>>16&255))){if(0==(64&n)){i=k[(65535&i)+(w&(1<<n)-1)];continue}t.msg="invalid distance code",h.mode=E;break t}if(r=65535&i,x<(n&=15)&&(w+=d[l++]<<x,(x+=8)<n)&&(w+=d[l++]<<x,x+=8),g<(r+=w&(1<<n)-1)){t.msg="invalid distance too far back",h.mode=E;break t}if(w>>>=n,x-=n,(n=c-f)<r){if(y<(n=r-n)&&h.sane){t.msg="invalid distance too far back",h.mode=E;break t}if(o=b,(a=0)===v){if(a+=m-n,n<s){for(s-=n;p[c++]=b[a++],--n;);a=c-r,o=p}}else if(v<n){if(a+=m+v-n,(n-=v)<s){for(s-=n;p[c++]=b[a++],--n;);if(a=0,v<s){for(s-=n=v;p[c++]=b[a++],--n;);a=c-r,o=p}}}else if(a+=v-n,n<s){for(s-=n;p[c++]=b[a++],--n;);a=c-r,o=p}for(;2<s;)p[c++]=o[a++],p[c++]=o[a++],p[c++]=o[a++],s-=3;s&&(p[c++]=o[a++],1<s)&&(p[c++]=o[a++])}else{for(a=c-r;p[c++]=p[a++],p[c++]=p[a++],p[c++]=p[a++],2<(s-=3););s&&(p[c++]=p[a++],1<s)&&(p[c++]=p[a++])}break}}break}}while(l<u&&c<_);w&=(1<<(x-=(s=x>>3)<<3))-1,t.next_in=l-=s,t.next_out=c,t.avail_in=l<u?u-l+5:5-(l-u),t.avail_out=c<_?_-c+257:257-(c-_),h.hold=w,h.bits=x}),I=Mn,Ln||(Ln=1,z=Xi(),B=852,R=592,q=[3,4,5,6,7,8,9,10,11,13,G=15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,D=0,0],V=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],W=[F=1,U=2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],$=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Sn=function(t,e,i,n,s,r,a,o){for(var h,l,d,u,c,p,f,_,g,m=o.bits,y=0,v=0,b=0,w=0,x=0,M=0,k=0,S=0,L=0,E=0,A=null,C=0,j=new z.Buf16(G+1),T=new z.Buf16(G+1),N=null,O=0,y=0;y<=G;y++)j[y]=0;for(v=0;v<n;v++)j[e[i+v]]++;for(x=m,w=G;1<=w&&0===j[w];w--);if(w<x&&(x=w),0===w)s[r++]=20971520,s[r++]=20971520,o.bits=1;else{for(b=1;b<w&&0===j[b];b++);for(x<b&&(x=b),y=S=1;y<=G;y++)if((S=(S<<=1)-j[y])<0)return-1;if(0<S&&(t===D||1!==w))return-1;for(T[1]=0,y=1;y<G;y++)T[y+1]=T[y]+j[y];for(v=0;v<n;v++)0!==e[i+v]&&(a[T[e[i+v]]++]=v);if(p=t===D?(A=N=a,19):t===F?(A=q,C-=257,N=V,O-=257,256):(A=W,N=$,-1),y=b,c=r,k=v=E=0,d=-1,u=(L=1<<(M=x))-1,t===F&&B<L||t===U&&R<L)return 1;for(;;){for(g=a[v]<p?(_=0,a[v]):a[v]>p?(_=N[O+a[v]],A[C+a[v]]):(_=96,0),h=1<<(f=y-k),b=l=1<<M;s[c+(E>>k)+(l-=h)]=f<<24|_<<16|g|0,0!==l;);for(h=1<<y-1;E&h;)h>>=1;if(E=0!==h?(E&h-1)+h:0,v++,0==--j[y]){if(y===w)break;y=e[i+a[v]]}if(x<y&&(E&u)!==d){for(c+=b,S=1<<(M=y-(k=0===k?x:k));M+k<w&&!((S-=j[M+k])<=0);)M++,S<<=1;if(L+=1<<M,t===F&&B<L||t===U&&R<L)return 1;s[d=E&u]=x<<24|M<<16|c-r|0}}0!==E&&(s[c+E]=y-k<<24|64<<16|0),o.bits=x}return 0}),P=Sn,K=-(H=2),0,0,X=Z=1,0,0,i=852,n=592,0,Q=!(J=0),Bn.inflateReset=a,Bn.inflateReset2=o,Bn.inflateResetKeep=r,Bn.inflateInit=function(t){return e(t,15)},Bn.inflateInit2=e,Bn.inflate=function(t,e){var i,n,s,r,a,o,h,l,d,u,c,p,f,_,g,m,y,v,b,w,x,M,k,S,L=0,E=new T.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return K;12===(i=t.state).mode&&(i.mode=13),a=t.next_out,s=t.output,r=t.next_in,n=t.input,l=i.hold,d=i.bits,u=o=t.avail_in,c=h=t.avail_out,M=J;t:for(;;)switch(i.mode){case X:if(0===i.wrap)i.mode=13;else{for(;d<16;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(2&i.wrap&&35615===l)E[i.check=0]=255&l,E[1]=l>>>8&255,i.check=O(i.check,E,2,0),d=l=0,i.mode=2;else if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&l)<<8)+(l>>8))%31)t.msg="incorrect header check",i.mode=30;else if(8!=(15&l))t.msg="unknown compression method",i.mode=30;else{if(d-=4,x=8+(15&(l>>>=4)),0===i.wbits)i.wbits=x;else if(x>i.wbits){t.msg="invalid window size",i.mode=30;break}i.dmax=1<<x,t.adler=i.check=1,i.mode=512&l?10:12,d=l=0}}break;case 2:for(;d<16;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(i.flags=l,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=l>>8&1),512&i.flags&&(E[0]=255&l,E[1]=l>>>8&255,i.check=O(i.check,E,2,0)),d=l=0,i.mode=3;case 3:for(;d<32;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.head&&(i.head.time=l),512&i.flags&&(E[0]=255&l,E[1]=l>>>8&255,E[2]=l>>>16&255,E[3]=l>>>24&255,i.check=O(i.check,E,4,0)),d=l=0,i.mode=4;case 4:for(;d<16;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.head&&(i.head.xflags=255&l,i.head.os=l>>8),512&i.flags&&(E[0]=255&l,E[1]=l>>>8&255,i.check=O(i.check,E,2,0)),d=l=0,i.mode=5;case 5:if(1024&i.flags){for(;d<16;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.length=l,i.head&&(i.head.extra_len=l),512&i.flags&&(E[0]=255&l,E[1]=l>>>8&255,i.check=O(i.check,E,2,0)),d=l=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((p=o<(p=i.length)?o:p)&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),T.arraySet(i.head.extra,n,r,p,x)),512&i.flags&&(i.check=O(i.check,n,p,r)),o-=p,r+=p,i.length-=p),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===o)break t;for(p=0;x=n[r+p++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x)),x&&p<o;);if(512&i.flags&&(i.check=O(i.check,n,p,r)),o-=p,r+=p,x)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===o)break t;for(p=0;x=n[r+p++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x)),x&&p<o;);if(512&i.flags&&(i.check=O(i.check,n,p,r)),o-=p,r+=p,x)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;d<16;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(l!==(65535&i.check)){t.msg="header crc mismatch",i.mode=30;break}d=l=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=12;break;case 10:for(;d<32;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}t.adler=i.check=et(l),d=l=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=d,2;t.adler=i.check=1,i.mode=12;case 12:if(5===e||6===e)break t;case 13:if(i.last)l>>>=7&d,d-=7&d,i.mode=27;else{for(;d<3;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}switch(i.last=1&l,--d,3&(l>>>=1)){case 0:i.mode=14;break;case 1:C=j=void 0;var C,j=i;if(Q){for(Y=new T.Buf32(512),tt=new T.Buf32(32),C=0;C<144;)j.lens[C++]=8;for(;C<256;)j.lens[C++]=9;for(;C<280;)j.lens[C++]=7;for(;C<288;)j.lens[C++]=8;for(P(Z,j.lens,0,288,Y,0,j.work,{bits:9}),C=0;C<32;)j.lens[C++]=5;P(H,j.lens,0,32,tt,0,j.work,{bits:5}),Q=!1}if(j.lencode=Y,j.lenbits=9,j.distcode=tt,j.distbits=5,i.mode=20,6!==e)break;l>>>=2,d-=2;break t;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=30}l>>>=2,d-=2}break;case 14:for(l>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&l,d=l=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(p=i.length){if(0===(p=h<(p=o<p?o:p)?h:p))break t;T.arraySet(s,n,r,p,a),o-=p,r+=p,h-=p,a+=p,i.length-=p}else i.mode=12;break;case 17:for(;d<14;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(i.nlen=257+(31&l),l>>>=5,d-=5,i.ndist=1+(31&l),l>>>=5,d-=5,i.ncode=4+(15&l),l>>>=4,d-=4,286<i.nlen||30<i.ndist){t.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;d<3;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.lens[A[i.have++]]=7&l,l>>>=3,d-=3}for(;i.have<19;)i.lens[A[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,k={bits:i.lenbits},M=P(0,i.lens,0,19,i.lencode,0,i.work,k),i.lenbits=k.bits,M){t.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;m=(L=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,y=65535&L,!((g=L>>>24)<=d);){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(y<16)l>>>=g,d-=g,i.lens[i.have++]=y;else{if(16===y){for(S=g+2;d<S;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(l>>>=g,d-=g,0===i.have){t.msg="invalid bit length repeat",i.mode=30;break}x=i.lens[i.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===y){for(S=g+3;d<S;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}x=0,p=3+(7&(l>>>=g)),l>>>=3,d=d-g-3}else{for(S=g+7;d<S;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}x=0,p=11+(127&(l>>>=g)),l>>>=7,d=d-g-7}if(i.have+p>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=30;break}for(;p--;)i.lens[i.have++]=x}}if(30===i.mode)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,k={bits:i.lenbits},M=P(Z,i.lens,0,i.nlen,i.lencode,0,i.work,k),i.lenbits=k.bits,M){t.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,k={bits:i.distbits},M=P(H,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,k),i.distbits=k.bits,M){t.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=d,I(t,c),a=t.next_out,s=t.output,h=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,l=i.hold,d=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;m=(L=i.lencode[l&(1<<i.lenbits)-1])>>>16&255,y=65535&L,!((g=L>>>24)<=d);){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(m&&0==(240&m)){for(v=g,b=m,w=y;m=(L=i.lencode[w+((l&(1<<v+b)-1)>>v)])>>>16&255,y=65535&L,!(v+(g=L>>>24)<=d);){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}l>>>=v,d-=v,i.back+=v}if(l>>>=g,d-=g,i.back+=g,i.length=y,0===m){i.mode=26;break}if(32&m){i.back=-1,i.mode=12;break}if(64&m){t.msg="invalid literal/length code",i.mode=30;break}i.extra=15&m,i.mode=22;case 22:if(i.extra){for(S=i.extra;d<S;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.length+=l&(1<<i.extra)-1,l>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;m=(L=i.distcode[l&(1<<i.distbits)-1])>>>16&255,y=65535&L,!((g=L>>>24)<=d);){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(0==(240&m)){for(v=g,b=m,w=y;m=(L=i.distcode[w+((l&(1<<v+b)-1)>>v)])>>>16&255,y=65535&L,!(v+(g=L>>>24)<=d);){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}l>>>=v,d-=v,i.back+=v}if(l>>>=g,d-=g,i.back+=g,64&m){t.msg="invalid distance code",i.mode=30;break}i.offset=y,i.extra=15&m,i.mode=24;case 24:if(i.extra){for(S=i.extra;d<S;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}i.offset+=l&(1<<i.extra)-1,l>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===h)break t;if(i.offset>(p=c-h)){if((p=i.offset-p)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=30;break}f=p>i.wnext?(p-=i.wnext,i.wsize-p):i.wnext-p,p>i.length&&(p=i.length),_=i.window}else _=s,f=a-i.offset,p=i.length;for(h-=p=h<p?h:p,i.length-=p;s[a++]=_[f++],--p;);0===i.length&&(i.mode=21);break;case 26:if(0===h)break t;s[a++]=i.length,h--,i.mode=21;break;case 27:if(i.wrap){for(;d<32;){if(0===o)break t;o--,l|=n[r++]<<d,d+=8}if(c-=h,t.total_out+=c,i.total+=c,c&&(t.adler=i.check=(i.flags?O:N)(i.check,s,c,a-c)),c=h,(i.flags?l:et(l))!==i.check){t.msg="incorrect data check",i.mode=30;break}d=l=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;d<32;){if(0===o)break t;o--,l+=n[r++]<<d,d+=8}if(l!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=30;break}d=l=0}i.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;default:return K}return t.next_out=a,t.avail_out=h,t.next_in=r,t.avail_in=o,i.hold=l,i.bits=d,(i.wsize||c!==t.avail_out&&i.mode<30&&(i.mode<27||4!==e))&&it(t,t.output,t.next_out,c-t.avail_out),c-=t.avail_out,t.total_in+=u-=t.avail_in,t.total_out+=c,i.total+=c,i.wrap&&c&&(t.adler=i.check=(i.flags?O:N)(i.check,s,c,t.next_out-c)),t.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),M=(0==u&&0===c||4===e)&&M===J?-5:M},Bn.inflateEnd=function(t){var e;return t&&t.state?((e=t.state).window&&(e.window=null),t.state=null,J):K},Bn.inflateGetHeader=function(t,e){return!t||!t.state||0==(2&(t=t.state).wrap)?K:((t.head=e).done=!1,J)},Bn.inflateSetDictionary=function(t,e){var i,n=e.length;return!t||!t.state||0!==(i=t.state).wrap&&11!==i.mode?K:11===i.mode&&N(1,e,n,0)!==i.check?-3:it(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,J)},Bn.inflateInfo="pako inflate (from Nodeca project)"),Bn;function et(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new T.Buf16(320),this.work=new T.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=X,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new T.Buf32(i),e.distcode=e.distdyn=new T.Buf32(n),e.sane=1,e.back=-1,J):K}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,r(t)):K}function o(t,e){var i,n;return!t||!t.state||(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e))?K:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,a(t))}function e(t,e){var i;return t?(i=new s,(t.state=i).window=null,(i=o(t,e))!==J&&(t.state=null),i):K}function it(t,e,i,n){var s,t=t.state;return null===t.window&&(t.wsize=1<<t.wbits,t.wnext=0,t.whave=0,t.window=new T.Buf8(t.wsize)),t.wsize<=n?(T.arraySet(t.window,e,i-t.wsize,t.wsize,0),t.wnext=0,t.whave=t.wsize):(n<(s=t.wsize-t.wnext)&&(s=n),T.arraySet(t.window,e,i-n,s,t.wnext),(n-=s)?(T.arraySet(t.window,e,i-n,n,0),t.wnext=n,t.whave=t.wsize):(t.wnext+=s,t.wnext===t.wsize&&(t.wnext=0),t.whave<t.wsize&&(t.whave+=s))),0}}function Dn(){return An=Cn?An:{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:Cn=1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}function Fn(){var u,c,p,f,i,n,s,_;return Nn||(Nn=1,u=Rn(),c=Xi(),p=bn(),f=Dn(),i=pn(),n=wn(),Tn||(Tn=1,jn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}),s=jn,_=Object.prototype.toString,r.prototype.push=function(t,e){var i,n,s,r,a,o=this.strm,h=this.options.chunkSize,l=this.options.dictionary,d=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof t?o.input=p.binstring2buf(t):"[object ArrayBuffer]"===_.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new c.Buf8(h),o.next_out=0,o.avail_out=h),(i=(i=u.inflate(o,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&l?u.inflateSetDictionary(this.strm,l):i)===f.Z_BUF_ERROR&&!0===d&&(i=f.Z_OK,d=!1),i!==f.Z_STREAM_END&&i!==f.Z_OK)return this.onEnd(i),!(this.ended=!0)}while(!o.next_out||0!==o.avail_out&&i!==f.Z_STREAM_END&&(0!==o.avail_in||n!==f.Z_FINISH&&n!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(s=p.utf8border(o.output,o.next_out),r=o.next_out-s,a=p.buf2string(o.output,s),o.next_out=r,o.avail_out=h-r,r&&c.arraySet(o.output,o.output,s,r,0),this.onData(a)):this.onData(c.shrinkBuf(o.output,o.next_out))),0===o.avail_in&&0===o.avail_out&&(d=!0),(0<o.avail_in||0===o.avail_out)&&i!==f.Z_STREAM_END);return(n=i===f.Z_STREAM_END?f.Z_FINISH:n)===f.Z_FINISH?(i=u.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f.Z_OK):n!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(o.avail_out=0))},r.prototype.onData=function(t){this.chunks.push(t)},r.prototype.onEnd=function(t){t===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},Gn.Inflate=r,Gn.inflate=a,Gn.inflateRaw=function(t,e){return(e=e||{}).raw=!0,a(t,e)},Gn.ungzip=a),Gn;function r(t){if(!(this instanceof r))return new r(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options,t=(e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits)&&(e.windowBits=-15),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0,u.inflateInit2(this.strm,e.windowBits));if(t!==f.Z_OK)throw new Error(i[t]);if(this.header=new s,u.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=p.string2buf(e.dictionary):"[object ArrayBuffer]"===_.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw)&&(t=u.inflateSetDictionary(this.strm,e.dictionary))!==f.Z_OK)throw new Error(i[t])}function a(t,e){e=new r(e);if(e.push(t,!0),e.err)throw e.msg||i[e.err];return e.result}}function Un(){var t,i,e,n,s,r;return Pn||(Pn=1,t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,In||(In=1,e={},(0,Xi().assign)(e,xn(),Fn(),Dn()),On=e),i=On,n=M(),s=k(),r=t?"uint8array":"array",Ji.magic="\b\0",n.inherits(a,s),a.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(n.transformTo(r,t.data),!1)},a.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},a.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},Ji.compressWorker=function(t){return new a("Deflate",t)},Ji.uncompressWorker=function(){return new a("Inflate",{})}),Ji;function a(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}}function qn(){var t;return zn||(zn=1,t=k(),Hi.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},Hi.DEFLATE=Un()),Hi}var Vn,Wn,$n,Zn,Hn,Jn,Kn,Xn,Qn,Yn,ts,es,is,ns,ss,rs,as,os,hs,ls,ds,us,cs,ps,fs,_s,gs,ms={};function ys(){return Vn||(Vn=1,ms.LOCAL_FILE_HEADER="PK",ms.CENTRAL_FILE_HEADER="PK",ms.CENTRAL_DIRECTORY_END="PK",ms.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",ms.ZIP64_CENTRAL_DIRECTORY_END="PK",ms.DATA_DESCRIPTOR="PK\b"),ms}function vs(){var y,s,v,b,w,x,n;return $n||($n=1,y=M(),s=k(),v=Si(),b=qi(),w=ys(),x=function(t,e){for(var i="",n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},n=function(t,e,i,n,s,r){var a=t.file,o=t.compression,h=r!==v.utf8encode,l=y.transformTo("string",r(a.name)),d=y.transformTo("string",v.utf8encode(a.name)),u=a.comment,r=y.transformTo("string",r(u)),c=y.transformTo("string",v.utf8encode(u)),p=d.length!==a.name.length,u=c.length!==u.length,f="",_=a.dir,g=a.date,m={crc32:0,compressedSize:0,uncompressedSize:0},i=(e&&!i||(m.crc32=t.crc32,m.compressedSize=t.compressedSize,m.uncompressedSize=t.uncompressedSize),0),t=(e&&(i|=8),h||!p&&!u||(i|=2048),0),e=0,g=(_&&(t|=16),"UNIX"===s?(e=798,t|=(h=a.unixPermissions,s=_,(65535&(h?h:s?16893:33204))<<16)):(e=20,t|=63&(a.dosPermissions||0)),_=g.getUTCHours(),_<<=6,_=(_=(_|g.getUTCMinutes())<<5)|g.getUTCSeconds()/2,h=g.getUTCFullYear()-1980,h<<=4,h=(h=(h|g.getUTCMonth()+1)<<5)|g.getUTCDate(),p&&(s=x(1,1)+x(b(l),4)+d,f+="up"+x(s.length,2)+s),u&&(a=x(1,1)+x(b(r),4)+c,f+="uc"+x(a.length,2)+a),""),g=(g=(g=(g=(g=(g=(g=(g=(g=(g+="\n\0")+x(i,2))+o.magic)+x(_,2))+x(h,2))+x(m.crc32,4))+x(m.compressedSize,4))+x(m.uncompressedSize,4))+x(l.length,2))+x(f.length,2);return{fileRecord:w.LOCAL_FILE_HEADER+g+l+f,dirRecord:w.CENTRAL_FILE_HEADER+x(e,2)+g+x(r.length,2)+"\0\0\0\0"+x(t,4)+x(n,4)+l+f+r}},y.inherits(t,s),t.prototype.push=function(t){var e=t.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:i?(e+100*(i-n-1))/i:100}}))},t.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;e?(t=n(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:t.fileRecord,meta:{percent:0}})):this.accumulate=!0},t.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,i=n(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),e)this.push({data:(e=t,w.DATA_DESCRIPTOR+x(e.crc32,4)+x(e.compressedSize,4)+x(e.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},t.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var i=this.bytesWritten-t,i=((t,e,i,n,s)=>(s=y.transformTo("string",s(n)),w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+x(t,2)+x(t,2)+x(e,4)+x(i,4)+x(s.length,2)+s))(this.dirRecords.length,i,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},t.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},t.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},t.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},t.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var i=0;i<e.length;i++)try{e[i].error(t)}catch(t){}return!0},t.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},Wn=t),Wn;function t(t,e,i,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}}function bs(){var l,i;return Zn||(Zn=1,l=qn(),i=vs(),Zi.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach(function(t,e){h++;var i=((t,e)=>{if(e=l[t=t||e])return e;throw new Error(t+" is not a valid compression method !")})(e.options.compression,a.compression),n=e.options.compressionOptions||a.compressionOptions||{},s=e.dir,r=e.date;e._compressWorker(i,n).withStreamInfo("file",{name:t,dir:s,date:r,comment:e.comment||"",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(t){o.error(t)}return o}),Zi}function ws(){var s,a,o,r,h,l,d,u,c,p,t,i,f,_,g,m;return Xn||(Xn=1,s=Si(),a=M(),o=k(),r=Li(),h=Fi(),l=Wi(),d=(()=>{if(!Ri){Ri=1;for(var r=Li(),t=Ui(),a=Si(),n=Wi(),o=k(),e=function(t,e,i){this.name=t,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=e,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}},i=(e.prototype={internalStream:function(t){var e=null,i="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(i=t.toLowerCase())||"text"===i,s=("binarystring"!==i&&"text"!==i||(i="string"),e=this._decompressWorker(),!this._dataBinary);s&&!n&&(e=e.pipe(new a.Utf8EncodeWorker)),!s&&n&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new o("error")).error(t)}return new r(e,i,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){var i;return this._data instanceof n&&this._data.compression.magic===t.magic?this._data.getCompressedWorker():(i=this._decompressWorker(),this._dataBinary||(i=i.pipe(new a.Utf8EncodeWorker)),n.createWorkerFrom(i,t,e))},_decompressWorker:function(){return this._data instanceof n?this._data.getContentWorker():this._data instanceof o?this._data:new t(this._data)}},["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"]),s=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<i.length;h++)e.prototype[i[h]]=s;Bi=e}return Bi})(),u=bs(),c=hi(),Jn||(Jn=1,t=M(),i=k(),t.inherits(e,i),e.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},e.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Hn=e),p=Hn,f=function(t,e,i){var n=a.getTypeOf(e),s=a.extend(i||{},h),r=(s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(r=_(t))&&m.call(this,r,!0),"string"===n&&!1===s.binary&&!1===s.base64);i&&void 0!==i.binary||(s.binary=!r);(e instanceof l&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE");n=null,n=e instanceof l||e instanceof o?e:c.isNode&&c.isStream(e)?new p(t,e):a.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64),i=new d(t,n,s);this.files[t]=i},_=function(t){var e=(t="/"===t.slice(-1)?t.substring(0,t.length-1):t).lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:h.createFolders,t=g(t),this.files[t]||f.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},Kn={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,i,n;for(e in this.files)n=this.files[e],(i=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(i,n)},filter:function(i){var n=[];return this.forEach(function(t,e){i(t,e)&&n.push(e)}),n},file:function(t,e,i){var n,s;return 1===arguments.length?y(t)?(n=t,this.filter(function(t,e){return!e.dir&&n.test(t)})):(s=this.files[this.root+t])&&!s.dir?s:null:(t=this.root+t,f.call(this,t,e,i),this)},folder:function(i){var t,e;return i?y(i)?this.filter(function(t,e){return e.dir&&i.test(t)}):(t=this.root+i,t=m.call(this,t),(e=this.clone()).root=t.name,e):this},remove:function(i){i=this.root+i;var t=this.files[i];if(t||("/"!==i.slice(-1)&&(i+="/"),t=this.files[i]),t&&!t.dir)delete this.files[i];else for(var e=this.filter(function(t,e){return e.name.slice(0,i.length)===i}),n=0;n<e.length;n++)delete this.files[e[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e={};try{if((e=a.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=e.type.toLowerCase(),e.compression=e.compression.toUpperCase(),"binarystring"===e.type&&(e.type="string"),!e.type)throw new Error("No output type specified.");a.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var i=e.comment||this.comment||"",n=u.generateWorker(this,e,i)}catch(t){(n=new o("error")).error(t)}return new r(n,e.type||"string",e.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}}),Kn;function e(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}}function xs(){var e;return Yn||(Yn=1,e=M(),t.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){return e.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},Qn=t),Qn;function t(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}}function Ms(){var i;return es||(es=1,i=xs(),M().inherits(t,i),t.prototype.byteAt=function(t){return this.data[this.zero+t]},t.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),s=t.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===e&&this.data[r+1]===i&&this.data[r+2]===n&&this.data[r+3]===s)return r-this.zero;return-1},t.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1),n=t.charCodeAt(2),t=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&i===s[1]&&n===s[2]&&t===s[3]},t.prototype.readData=function(t){var e;return this.checkOffset(t),0===t?[]:(e=this.data.slice(this.zero+this.index,this.zero+this.index+t),this.index+=t,e)},ts=t),ts;function t(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}}function ks(){var e;return rs||(rs=1,e=Ms(),M().inherits(t,e),t.prototype.readData=function(t){var e;return this.checkOffset(t),0===t?new Uint8Array(0):(e=this.data.subarray(this.zero+this.index,this.zero+this.index+t),this.index+=t,e)},ss=t),ss;function t(t){e.call(this,t)}}function Ss(){var i,n,s,r,e,a,o,h;return ls||(ls=1,i=M(),n=Ke(),s=Ms(),ns||(ns=1,e=xs(),M().inherits(t,e),t.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},t.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},t.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},t.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},is=t),r=is,os||(os=1,o=ks(),M().inherits(l,o),l.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},as=l),a=as,h=ks(),hs=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||n.uint8array?"nodebuffer"===e?new a(t):n.uint8array?new h(i.transformTo("uint8array",t)):new s(i.transformTo("array",t)):new r(t)}),hs;function t(t){e.call(this,t)}function l(t){o.call(this,t)}}function Ls(){var i,n,s,r,a,o,h;return us||(us=1,i=Ss(),n=M(),s=Wi(),r=qi(),a=Si(),o=qn(),h=Ke(),t.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e;if(t.skip(22),this.fileNameLength=t.readInt(2),e=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(e),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=(t=>{for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)&&o[e].magic===t)return o[e];return null})(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){var t;this.extraFields[1]&&(t=i(this.extraFields[1].value),this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS)&&(this.diskNumberStart=t.readInt(4))},readExtraFields:function(t){var e,i,n,s=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<s;)e=t.readInt(2),i=t.readInt(2),n=t.readData(i),this.extraFields[e]={id:e,length:i,value:n};t.setIndex(s)},handleUTF8:function(){var t,e=h.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment)):(null!==(t=this.findExtraFieldUnicodePath())?this.fileNameStr=t:(t=n.transformTo(e,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(t)),null!==(t=this.findExtraFieldUnicodeComment())?this.fileCommentStr=t:(t=n.transformTo(e,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(t)))},findExtraFieldUnicodePath:function(){var t,e=this.extraFields[28789];return!e||1!==(t=i(e.value)).readInt(1)||r(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))},findExtraFieldUnicodeComment:function(){var t,e=this.extraFields[25461];return!e||1!==(t=i(e.value)).readInt(1)||r(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}},ds=t),ds;function t(t,e){this.options=t,this.loadOptions=e}}function Es(){var h,s,e,i,n,r,a,o,l,d,u;return _s||(_s=1,h=M(),s=ui(),e=Si(),ps||(ps=1,n=Ss(),r=M(),a=ys(),o=Ls(),l=Ke(),t.prototype={checkSignature:function(t){var e;if(!this.reader.readAndCheckSignature(t))throw this.reader.index-=4,e=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")},isSignature:function(t,e){var i=this.reader.index;this.reader.setIndex(t);t=this.reader.readString(4)===e;return this.reader.setIndex(i),t},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=l.uint8array?"uint8array":"array",e=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(e)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var t,e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}t=this.centralDirOffset+this.centralDirSize,t=e-(t=this.zip64?t+20+(12+this.zip64EndOfCentralSize):t);if(0<t)this.isSignature(e,a.CENTRAL_FILE_HEADER)||(this.reader.zero=t);else if(t<0)throw new Error("Corrupted zip: missing "+Math.abs(t)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},cs=t),i=cs,d=Vi(),u=hi(),fs=function(t,a){var o=this;return a=h.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),u.isNode&&u.isStream(t)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):h.prepareContent("the loaded zip file",t,!0,a.optimizedBinaryString,a.base64).then(function(t){var e=new i(a);return e.load(t),e}).then(function(t){var e=[s.Promise.resolve(t)],i=t.files;if(a.checkCRC32)for(var n=0;n<i.length;n++)e.push((n=>new s.Promise(function(t,e){var i=n.decompressed.getContentWorker().pipe(new d);i.on("error",function(t){e(t)}).on("end",function(){i.streamInfo.crc32!==n.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()}))(i[n]));return s.Promise.all(e)}).then(function(t){for(var t=t.shift(),e=t.files,i=0;i<e.length;i++){var n=e[i],s=n.fileNameStr,r=h.resolve(n.fileNameStr);o.file(r,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:a.createFolders}),n.dir||(o.file(r).unsafeOriginalName=s)}return t.zipComment.length&&(o.comment=t.zipComment),o})}),fs;function t(t){this.files=[],this.loadOptions=t}}function As(){if(!(this instanceof As))return new As;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t,e=new As;for(t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}Gr||(Gr=1,(As.prototype=ws()).loadAsync=Es(),As.support=Ke(),As.defaults=Fi(),As.version="3.10.1",As.loadAsync=function(t,e){return(new As).loadAsync(t,e)},As.external=ui(),gs=As);var Cs=Qt(gs);function js(t){return t.toLowerCase().substring(t.lastIndexOf(".")+1,t.length)||""}var Ts,Ns,Os=Xt.extend({initialize:function(t){Xt.prototype.initialize.call(this,t)},loadDataAsync:(Ts=C(G().mark(function t(e){var i,n,s,r,a,o,h,l,d,u,c,p,f,_,g;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={},n={},t.next=4,Cs.loadAsync(e);case 4:s=t.sent,t.t0=G().keys(s.files);case 6:(t.t1=t.t0()).done?t.next=24:(r=t.t1.value,a=js(r),o=s.files[r],t.t2=a,t.next="kml"===t.t2?13:"jpg"===t.t2||"jpeg"===t.t2?17:22);break;case 13:return t.next=15,o.async("arraybuffer");case 15:return i[r]=t.sent,t.abrupt("break",22);case 17:return t.next=19,o.async("base64");case 19:return h=t.sent,n[r]="data:image/".concat(a,";base64,").concat(h),t.abrupt("break",22);case 22:t.next=6;break;case 24:t.t3=G().keys(i);case 25:if((t.t4=t.t3()).done){t.next=53;break}h=t.t4.value,l=this.toXml(i[h]),this.addKmlData(l),l=l.getElementsByTagName("GroundOverlay"),d=0;case 31:if(d<l.length){if(u=l[d],c=L.latLngBounds([u.getElementsByTagName("south")[0].childNodes[0].nodeValue,u.getElementsByTagName("west")[0].childNodes[0].nodeValue],[u.getElementsByTagName("north")[0].childNodes[0].nodeValue,u.getElementsByTagName("east")[0].childNodes[0].nodeValue]),void 0!==(p=u.getElementsByTagName("rotation")[0])&&(p=parseFloat(p.childNodes[0].nodeValue)),f=u.getElementsByTagName("href")[0],_=u.getElementsByTagName("Icon")[0],!(f=(f=!f&&_?_.getElementsByTagName("href")[0]:f).childNodes[0].nodeValue)in n)return t.abrupt("continue",48);t.next=42}else t.next=51;break;case 42:_={},(g=u.getElementsByTagName("color")[0])&&(g=g.childNodes[0].nodeValue,_.opacity=parseInt(g.substring(0,2),16)/255,_.color="#"+g.substring(6,8)+g.substring(4,6)+g.substring(2,4)),p&&(_.rotation=p),g=new Is(n[f],c,{opacity:_.opacity,rotation:_.rotation}),this.addLayer(g);case 48:d++,t.next=31;break;case 51:t.next=25;break;case 53:case"end":return t.stop()}},t,this)})),function(t){return Ts.apply(this,arguments)})}),Is=L.ImageOverlay.extend({options:{rotation:0},_reset:function(){L.ImageOverlay.prototype._reset.call(this),this._rotate()},_animateZoom:function(t){L.ImageOverlay.prototype._animateZoom.call(this,t),this._rotate()},_rotate:function(){this._image.style[L.DomUtil.TRANSFORM]+=" rotate("+this.options.rotation+"deg)"},getBounds:function(){return this._bounds}}),Ps=dt.extend({initialize:function(t){dt.prototype.initialize.call(this,t)},loadDataAsync:(Ns=C(G().mark(function t(e){var i,n,s,r;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.toString(e).split("\n"),n=4;case 2:if(n<i.length){if(0==(s=i[n].trim()).length)return t.abrupt("continue",10);t.next=6}else t.next=13;break;case 6:if((r=s.split(",")).length<4)return t.abrupt("continue",10);t.next=9;break;case 9:this.addWaypoint(this.getFieldValue(r[1]),this.getFieldFloatValue(r[2]),this.getFieldFloatValue(r[3]),this.getFieldFloatValue(r[14]),this.getFieldValue(r[10]));case 10:n++,t.next=2;break;case 13:case"end":return t.stop()}},t,this)})),function(t){return Ns.apply(this,arguments)}),getFieldValue:function(t){return void 0===t?null:t.trim()},getFieldFloatValue:function(t){t=parseFloat(this.getFieldValue(t));return isNaN(t)?null:t},addWaypoint:function(t,e,i,n,s){if(null==e)throw new Error("Waypoint latitude is missing");if(null==i)throw new Error("Waypoint longitude is missing");e=L.marker(L.latLng(e,i));e.bindTooltip(t),this.addLayer(e)}}),zs=(()=>{function l(t,e){var r=this,t=(X(this,l),this.container=e,this.map=t,this.layers=[],e.querySelector("button#button-geographic-file-add")),i=e.querySelector("button#button-geographic-file-remove"),a=e.querySelector("input#input-geographic-file");this.containerLayers=e.querySelector("#geographic-file-layers"),t.addEventListener("click",function(t){a.click()}),i.addEventListener("click",function(t){r.layers.forEach(function(t){t.remove()}),r.layers=[],r.containerLayers.innerHTML=""}),a.addEventListener("change",function(t){var i,n,s;t.target.files&&0!=t.target.files.length&&(i=t.target.files[0].name,!(n=js(i)).toLowerCase()in l.extensions?Q("File Open Error","Unsupported file extension"):((s=new FileReader).onerror=function(t){Q("File Open Error","Unable to read file!")},s.onloadend=(()=>{var e=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.addFile(i,n,s.result);case 2:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}})(),s.readAsArrayBuffer(t.target.files[0]),a.value=null))})}return r(l,[{key:"addFile",value:(n=C(G().mark(function t(e,i,n){var s,r,a,o,h=this;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=this.layers.length,r=null,t.prev=2,t.t0=i,t.next=t.t0===l.extensions.wpt.extension?6:t.t0===l.extensions.gpx.extension?8:t.t0===l.extensions.json.extension||t.t0===l.extensions.geojson.extension?10:t.t0===l.extensions.kml.extension?12:t.t0===l.extensions.kmz.extension?14:16;break;case 6:return r=new Ps,t.abrupt("break",18);case 8:return r=new Kt,t.abrupt("break",18);case 10:return r=new ut,t.abrupt("break",18);case 12:return r=new Xt,t.abrupt("break",18);case 14:return r=new Os,t.abrupt("break",18);case 16:return Q("File Open Error","Unsupported file format"),t.abrupt("return");case 18:return t.next=20,r.loadDataAsync(n);case 20:this.layers.push(r),r.addTo(this.map),this.map.fitBounds(r.getBounds()),t.next=29;break;case 25:return t.prev=25,t.t1=t.catch(2),Q("File Open Error","Unable to parse file "+e+": "+t.t1),t.abrupt("return");case 29:(a=document.createElement("div")).classList.add("custom-control"),a.classList.add("custom-checkbox"),o='<input type="checkbox" class="custom-control-input" id="file-group-'.concat(s,'" data-filename="').concat(e,'" data-id="').concat(s,'" checked>'),o+='<label class="custom-control-label" for="file-group-'.concat(s,'">').concat(e,"</label></div>"),a.innerHTML=o,this.containerLayers.appendChild(a),a.querySelector("input#file-group-".concat(s)).addEventListener("click",function(t){var e=t.currentTarget.dataset.id;t.currentTarget.checked?h.layers[e].addTo(h.map):h.layers[e].remove()});case 37:case"end":return t.stop()}},t,this,[[2,25]])})),function(t,e,i){return n.apply(this,arguments)})}]);var n})(),m=(zs.extensions={gpx:{extension:"gpx"},wpt:{extension:"wpt"},cup:{extension:"cup"},json:{extension:"json"},geojson:{extension:"geojson"},kmz:{extension:"kmz"},kml:{extension:"kml"}},(()=>{function h(t){if(X(this,h),!t)throw new Error("Invalid data");for(var e,i,n=h._tokenize(t),s=null,r=null,a=0;a<n.length;a++)if(e=n[a].name,i=n[a].value,"group"==e)s=i.match(/^end$/i)?null:this[i]={};else if("object"==e)r=i.toLowerCase();else if("character"==e||"integer"==e||"real"==e||"logical"==e){if(null===s)throw new Gs("Namelist variable '".concat(r,"' is not inside a group section. All properties are expected to be inside a group section starting with '&[GROUPNAME]' and ending with '/'."));null==s[r]?s[r]=i:(Array.isArray(s[r])||(s[r]=[s[r]]),s[r].push(i))}}return r(h,null,[{key:"_tokenize",value:function(t){var e,i,s=[];function n(t,e,i,n){s.push({pos:t,name:e,value:i,index:3<arguments.length&&void 0!==n?n:null})}for(var r,a="initial",o=0;o<t.length;)if(e=t[o],i=t.substr(o),e.match(/!/)){if(!(r=h._re_comment.exec(i))||0!=r.index)break;n(o,"comment",r[1]),o+=r[0].length,a="comment"}else if(e.match(/['"]/)){if(!(r=h._re_string.exec(i))||0!=r.index)break;n(o,"character",r[2]),o+=r[0].length,a="character"}else if(e.match(/\//))"object"==a&&n(o-1,"null",""),n(o,"group","end"),o++,a="group_end";else if(e.match(/[$&]/)){if(!(r=h._re_group.exec(i))||0!=r.index)break;a=r[1].match(/^end$/i)?("object"==a&&n(o-1,"null",""),"group_end"):"group_start",n(o,"group",r[1]),o+=r[0].length}else if(e.match(/\./))if((r=h._re_logical_p.exec(i))&&0==r.index)n(o,"logical",r[1]),o+=r[0].length,a="logical";else{if(!(r=h._re_real.exec(i))||0!=r.index)break;n(o,"real",parseFloat(r[1])),o+=r[0].length,a="real"}else if(e.match(/[[a-zA-Z_]/))"group_end"==a||"initial"==a?(r=h._re_orphan.exec(i))&&0==r.index&&(n(o,"orphan",r[0]),o+=r[0].length,a="orphan"):(r=h._re_object.exec(i))&&0==r.index?("object"==a&&n(o-1,"null",""),n(o,"object",r[1]),o+=r[0].length,a="object"):(r=h._re_array.exec(i))&&0==r.index?(n(o,"array",r[1],r[2]),o+=r[0].length,a="array"):(r=h._re_logical_c.exec(i))&&0==r.index?(n(o,"logical",r[1]),o+=r[0].length,a="logical"):(r=h._re_nondelimited_c.exec(i))&&0==r.index?(n(o,"nondelimited",r[1]),o+=r[0].length,a="nondelimited"):(n(o,"unknown",null),o++);else if(e.match(/\(/)){if(!(r=h._re_complex_start.exec(i))||0!=r.index)break;n(o,"complex","start"),o+=r[0].length,a="complex_start"}else if(e.match(/\)/)){if(!(r=h._re_complex_end.exec(i))||0!=r.index)break;n(o,"complex","end"),o+=r[0].length,a="complex_end"}else if(e.match(/[\+\-]/))if((r=h._re_real.exec(i))&&0==r.index)n(o,"real",parseFloat(r[1])),o+=r[0].length,a="real";else{if(!(r=h._re_integer.exec(i))||0!=r.index)break;n(o,"integer",parseInt(r[1],10)),o+=r[0].length,a="integer"}else if(e.match(/[\d]/))if((r=h._re_repeat.exec(i))&&0==r.index)n(o,"repeat",r[1]),o+=r[0].length,a="repeat";else if((r=h._re_real.exec(i))&&0==r.index)n(o,"real",parseFloat(r[1])),o+=r[0].length,a="real";else if((r=h._re_integer.exec(i))&&0==r.index)n(o,"integer",parseInt(r[1],10)),o+=r[0].length,a="integer";else{if(!(r=h._re_nondelimited_d.exec(i))||0!=r.index)break;n(o,"nondelimited",r[1]),o+=r[0].length,a="nondelimited"}else(r=h._re_null.exec(i))&&0==r.index?(n(o,"null",""),o+=r[0].length,a="null"):o++;return s}},{key:"isReal",value:function(t){t=h._re_real.exec(t);return null!==t&&0==t.index}},{key:"isInteger",value:function(t){t=h._re_integer.exec(t);return null!==t&&0==t.index}},{key:"isLogical",value:function(t){t=h._re_logical_p.exec(t);return null!==t&&0==t.index}},{key:"parseLogicalValue",value:function(t){return".true."===t.toLowerCase()}},{key:"parseValue",value:function(t){return h.isLogical(t)?h.parseLogicalValue(t):h.isReal(t)?parseFloat(t):h.isInteger(t)?parseInt(t):t}},{key:"_formatValue",value:function(t){if(null==t)throw new Error("Undefined value");if(Array.isArray(t)){for(var e=h._formatValue(t[0]),i=1;i<t.length;i++)e+=", "+h._formatValue(t[i]);return e}return"string"==typeof t?"'"+t+"'":"boolean"==typeof t?t?".true.":".false.":h._isInteger(t)?t.toString():t.toFixed(3)}},{key:"_isInteger",value:function(t){return"number"==typeof t&&isFinite(t)&&-9007199254740992<t&&t<9007199254740992&&Math.floor(t)===t}},{key:"formatSection",value:function(t,e,i){var n="&"+t+"\n";console.debug("format namelist section ".concat(t));for(var s=0;s<e.length;s++)if(console.debug("   ".concat(e[s],": ").concat(i[s])),null!==i[s]){if(void 0===i[s])throw new Error("Property ".concat(e[s]," is not defined"));n+=" "+e[s].padEnd(20)+" = "+h._formatValue(i[s])+"\n"}return n+"/\n\n"}},{key:"convertToArray",value:function(t,e){null==t[e]||Array.isArray(t[e])||(t[e]=[].concat(t[e]))}}])})()),Gs=(t(m,"_re_comment",/(!.*)\n\s*/),t(m,"_re_group",/(?:&|\$)\s*([a-zA-Z_][\w]*)\s*/),t(m,"_re_array",/([a-zA-Z_][\w]*)\s*(\(\s*((\s*:\s*(\-|\+)?\d*){1,2}|((\-|\+)?\d+(\s*:\s*(\-|\+)?\d*){0,2}))(\s*,\s*(((\-|\+)?\d*(\s*:\s*(\-|\+)?\d*){0,2})))*\s*\)(\s*\(\s*(:\s*\d*|\d+(\s*:\s*\d*)?)\s*\))?)\s*=\s*/),t(m,"_re_object",/([a-zA-Z_][\w]*)\s*=\s*/),t(m,"_re_repeat",/([0-9]+)\s*\*\s*/),t(m,"_re_complex_start",/\(\s*/),t(m,"_re_complex_end",/\)\s*,?\s*/),t(m,"_re_string",/('((?:[^']+|'')*)'|"((?:[^"]+|"")*)")\s*,?\s*/),t(m,"_re_nondelimited_c",/([^'"\*\s,\/!&\$(=%\.][^\*\s,\/!&\$(=%\.]*)\s*,?\s*/),t(m,"_re_nondelimited_d",/(\d+[^\*\s\d,\/!&\$\(=%\.][^\s,\/!&\$\(=%\.]*)\s*,?\s*/),t(m,"_re_real",/(((\-|\+)?\d*\.\d*([eEdDqQ](\-|\+)?\d+)?)|((\-|\+)?\d+[eEdDqQ](\-|\+)?\d+))\s*,?\s*/),t(m,"_re_integer",/((\-|\+)?\d+)\b\s*,?\s*/),t(m,"_re_logical_c",/([tT][rR][uU][eE]|[tT]|[fF][aA][lL][sS][eE]|[fF])\s*,?\s*/),t(m,"_re_logical_p",/(\.(([tT][rR][uU][eE]|[[fF][aA][lL][sS][eE])\.?|[tTfF]\w*))\s*,?\s*/),t(m,"_re_null",/\s*\b|\s*,\s*/),t(m,"_re_orphan",/[^&]*/),(()=>{function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";X(this,s);for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t=D(this,s,[t].concat(i)),Error.captureStackTrace&&Error.captureStackTrace(t,s),t.name="NamelistError",t}return V(s,it(Error)),r(s)})()),Bs=(()=>{function n(t){X(this,n),this.share={wrf_core:"ARW",max_dom:1,start_year:null,start_month:null,start_day:null,start_hour:null,end_year:null,end_month:null,end_day:null,end_hour:null,start_date:null,end_date:null,interval_seconds:null,active_grid:!0,io_form_geogrid:2,output_from_geogrid:null,debug_level:0},this.geogrid={parent_id:1,parent_grid_ratio:null,i_parent_start:null,j_parent_start:null,s_we:1,e_we:null,s_sn:1,e_sn:null,geog_data_res:"default",dx:null,dy:null,map_proj:"lambert",ref_lat:null,ref_lon:null,ref_x:null,ref_y:null,truelat1:null,truelat2:null,stand_lon:null,pole_lat:90,pole_lon:0,geog_data_path:null,opt_geogrid_tbl_path:"./geogrid/"},this.ungrib={out_format:"WPS",prefix:"FILE",add_lvls:!1,interp_type:0,new_plvl:null,pmin:100},this.metgrid={fg_name:null,constants_name:null,io_form_metgrid:2,opt_output_from_metgrid_path:null,opt_metgrid_tbl_path:"./metgrid",process_only_bdy:0},"string"==typeof t&&("hgridspec"in(t=new m(t))?this._createWRFSI(t):this._create(t),this._validateRequiredVariable(this.geogrid,"geogrid","parent_grid_ratio"),this._validateRequiredVariable(this.geogrid,"geogrid","i_parent_start"),this._validateRequiredVariable(this.geogrid,"geogrid","j_parent_start"),this._validateRequiredVariable(this.geogrid,"geogrid","e_we"),this._validateRequiredVariable(this.geogrid,"geogrid","e_sn"),this._validateRequiredVariable(this.geogrid,"geogrid","dx"),this._validateRequiredVariable(this.geogrid,"geogrid","dy"))}return r(n,[{key:"_validateRequiredVariable",value:function(t,e,i){if(null==t[i])throw new Rs("WPS namelist is missing required variable '".concat(i,"' under group '").concat(e,"'"))}},{key:"_create",value:function(t){"share"in t&&(Object.assign(this.share,t.share),m.convertToArray(this.geogrid,"start_year"),m.convertToArray(this.geogrid,"start_month"),m.convertToArray(this.geogrid,"start_day"),m.convertToArray(this.geogrid,"start_hour"),m.convertToArray(this.geogrid,"end_year"),m.convertToArray(this.geogrid,"end_month"),m.convertToArray(this.geogrid,"end_day"),m.convertToArray(this.geogrid,"end_hour"),m.convertToArray(this.geogrid,"start_date"),m.convertToArray(this.geogrid,"end_date"),m.convertToArray(this.geogrid,"active_grid")),"geogrid"in t&&(Object.assign(this.geogrid,t.geogrid),m.convertToArray(this.geogrid,"parent_id"),m.convertToArray(this.geogrid,"parent_grid_ratio"),m.convertToArray(this.geogrid,"i_parent_start"),m.convertToArray(this.geogrid,"J_parent_start"),m.convertToArray(this.geogrid,"s_we"),m.convertToArray(this.geogrid,"e_we"),m.convertToArray(this.geogrid,"s_sn"),m.convertToArray(this.geogrid,"e_sn"),m.convertToArray(this.geogrid,"geog_data_res")),"ungrib"in t&&Object.assign(this.ungrib,t.ungrib),"metgrid"in t&&Object.assign(this.metgrid,t.metgrid)}},{key:"_createWRFSI",value:function(t){this.share.wrf_core="ARW",this.share.max_dom=t.hgridspec.num_domains;var e=new Date,i=new Date(e);i.setDate(i.getDate()+1),this.share.start_date=[],this.share.end_date=[];for(var n=0;n<this.share.max_dom;n++)this.share.start_date.push(e.getFullYear().toString()+"-"+e.getMonth().toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+"_03:00:00"),this.share.end_date.push(i.getFullYear().toString()+"-"+i.getMonth().toString().padStart(2,"0")+"-"+i.getDate().toString().padStart(2,"0")+"_03:00:00");this.geogrid.parent_id=[],this.geogrid.parent_grid_ratio=[],this.geogrid.i_parent_start=[],this.geogrid.j_parent_start=[],this.geogrid.e_we=[],this.geogrid.e_sn=[],this.geogrid.geog_data_res=[];for(n=0;n<this.share.max_dom;n++){this.geogrid.parent_id.push(t.hgridspec.parent_id[n]),this.geogrid.parent_grid_ratio.push(t.hgridspec.ratio_to_parent[n]),this.geogrid.i_parent_start.push(t.hgridspec.domain_origin_lli[n]),this.geogrid.j_parent_start.push(t.hgridspec.domain_origin_llj[n]);var s=(t.hgridspec.domain_origin_uri[n]-t.hgridspec.domain_origin_lli[n])*t.hgridspec.ratio_to_parent[n]+1,r=(t.hgridspec.domain_origin_urj[n]-t.hgridspec.domain_origin_llj[n])*t.hgridspec.ratio_to_parent[n]+1;this.geogrid.e_we.push(s),this.geogrid.e_sn.push(r),this.geogrid.geog_data_res.push("default")}this.geogrid.dx=t.hgridspec.moad_delta_x,this.geogrid.dy=t.hgridspec.moad_delta_y,this.geogrid.map_proj=t.hgridspec.map_proj_name,this.geogrid.ref_lat=t.hgridspec.moad_known_lat,this.geogrid.ref_lon=t.hgridspec.moad_known_lon,Array.isArray(t.hgridspec.moad_stand_lats)?(this.geogrid.truelat1=t.hgridspec.moad_stand_lats[0],this.geogrid.truelat2=t.hgridspec.moad_stand_lats[1]):(this.geogrid.truelat1=t.hgridspec.moad_stand_lats,this.geogrid.truelat2=0),Array.isArray(t.hgridspec.moad_stand_lons)?this.geogrid.stand_lon=t.hgridspec.moad_stand_lons[0]:this.geogrid.stand_lon=t.hgridspec.moad_stand_lons,this.geogrid.geog_data_path="/home/wrf/geog",this.share.interval_seconds=10800,this.share.io_form_geogrid=2,this.ungrib.out_format="WPS",this.ungrib.prefix="UNGRIB",this.metgrid.fg_name="UNGRIB",this.metgrid.io_form_metgrid=2,this.metgrid.opt_metgrid_tbl_path="/home/wrf"}},{key:"_setDefaults",value:function(){if(!this.share.start_date||!this.share.end_date){var t=new Date,e=n._formarDate(t)+"_03:00:00",i=n._formarDate(t)+"_18:00:00";for(this.share.start_date=[],this.share.end_date=[];this.share.start_date.length<this.share.max_dom;)this.share.start_date.push(e),this.share.end_date.push(i)}null===this.share.interval_seconds&&(this.share.interval_seconds=21600),null===this.share.debug_level&&(this.share.debug_level=0),null===this.geogrid.geog_data_path&&(this.geogrid.geog_data_path="geog"),null===this.geogrid.opt_geogrid_tbl_path&&(this.geogrid.opt_geogrid_tbl_path="geogrid"),null===this.metgrid.fg_name&&(this.metgrid.fg_name="FILE")}},{key:"toString",value:function(){this._setDefaults();var t="";return(t+=m.formatSection("share",["wrf_core","max_dom","start_date","end_date","interval_seconds","io_form_geogrid","debug_level"],[this.share.wrf_core,this.share.max_dom,this.share.start_date,this.share.end_date,this.share.interval_seconds,this.share.io_form_geogrid,this.share.debug_level]))+m.formatSection("geogrid",["parent_id","parent_grid_ratio","i_parent_start","j_parent_start","e_we","e_sn","geog_data_res","dx","dy","map_proj","ref_lat","ref_lon","truelat1","truelat2","pole_lat","pole_lon","stand_lon","geog_data_path","opt_geogrid_tbl_path"],[this.geogrid.parent_id,this.geogrid.parent_grid_ratio,this.geogrid.i_parent_start,this.geogrid.j_parent_start,this.geogrid.e_we,this.geogrid.e_sn,this.geogrid.geog_data_res,this.geogrid.dx,this.geogrid.dy,this.geogrid.map_proj,this.geogrid.ref_lat,this.geogrid.ref_lon,this.geogrid.truelat1,this.geogrid.truelat2,this.geogrid.pole_lat,this.geogrid.pole_lon,this.geogrid.stand_lon,this.geogrid.geog_data_path,this.geogrid.opt_geogrid_tbl_path])+m.formatSection("ungrib",["out_format","prefix"],[this.ungrib.out_format,this.ungrib.prefix])+m.formatSection("metgrid",["fg_name","io_form_metgrid","opt_metgrid_tbl_path"],[this.metgrid.fg_name,this.metgrid.io_form_metgrid,this.metgrid.opt_metgrid_tbl_path])}}],[{key:"_formarDate",value:function(t){return t.getFullYear().toString()+"-"+t.getMonth().toString().padStart(2,"0")+"-"+t.getDay().toString().padStart(2,"0")}}])})(),Rs=(()=>{function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";X(this,s);for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return t=D(this,s,[t].concat(i)),Error.captureStackTrace&&Error.captureStackTrace(t,s),t.name="WPSNamelistError",t}return V(s,it(Error)),r(s)})(),l=637e4,Ds="lambert",Fs="mercator",Us="polar",Y="lat-lon";function qs(t){return t<0?Math.ceil(t):Math.floor(t)}function Vs(t){return t*l*Math.PI*2/360}function Ws(t,e){if(void 0===t)throw new Error("Invalid map_proj argument");if(isNaN(e))throw new Error("Invalid distance argument");return t===Y?Vs(e):e}var $s=1,Zs=2,Hs=3,Js=4,Ks=5,Xs=6378137,Qs=6356752.314,Ys=.0066943799901413165,tr=484813681109536e-20,g=Math.PI/2,er=.16666666666666666,ir=.04722222222222222,nr=.022156084656084655,v=1e-10,b=.017453292519943295,sr=57.29577951308232,w=Math.PI/4,rr=2*Math.PI,d=3.14159265359,ar={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},or={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},hr=/[\s_\-\/\(\)]/g;function lr(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),s=e.toLowerCase().replace(hr,""),r=-1;++r<n.length;)if((i=n[r]).toLowerCase().replace(hr,"")===s)return t[i]}function dr(t){var e,i,n,s={},r=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){e=e.split("=");return e.push(!0),t[e[0].toLowerCase()]=e[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*b},lat_1:function(t){s.lat1=t*b},lat_2:function(t){s.lat2=t*b},lat_ts:function(t){s.lat_ts=t*b},lon_0:function(t){s.long0=t*b},lon_1:function(t){s.long1=t*b},lon_2:function(t){s.long2=t*b},alpha:function(t){s.alpha=parseFloat(t)*b},gamma:function(t){s.rectified_grid_angle=parseFloat(t)},lonc:function(t){s.longc=t*b},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r:function(t){s.a=s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){t=lr(or,s.units=t);t&&(s.to_meter=t.to_meter)},from_greenwich:function(t){s.from_greenwich=t*b},pm:function(t){var e=lr(ar,t);s.from_greenwich=(e||parseFloat(t))*b},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(e in r)i=r[e],e in a?"function"==typeof(n=a[e])?n(i):s[n]=i:s[e]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var ur=1,cr=/\s/,pr=/[A-Za-z]/,fr=/[A-Za-z84_]/,_r=/[,\]]/,gr=/[\d\.E\-\+]/;function mr(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ur}function yr(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);i=i.reduce(function(t,e){return vr(e,t),t},e?{}:t);e&&(t[e]=i)}function vr(t,e){if(Array.isArray(t)){var i,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void vr(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"===n)e[n]=t;else if("AXIS"===n)n in e||(e[n]=[]),e[n].push(t);else switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&vr(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&vr(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void yr(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return vr(t,e[n]);return yr(e,n,t)}else e[n]=!0}else e[t]=!0}mr.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;cr.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case ur:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},mr.prototype.afterquote=function(t){if('"'===t)this.word+='"',this.state=4;else{if(!_r.test(t))throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place);this.word=this.word.trim(),this.afterItem(t)}},mr.prototype.afterItem=function(t){","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,this.state=ur):"]"===t&&(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=ur,this.currentObject=this.stack.pop(),this.currentObject||(this.state=-1))},mr.prototype.number=function(t){if(gr.test(t))this.word+=t;else{if(!_r.test(t))throw new Error("havn't handled \""+t+'" in number yet, index '+this.place);this.word=parseFloat(this.word),this.afterItem(t)}},mr.prototype.quoted=function(t){'"'===t?this.state=5:this.word+=t},mr.prototype.keyword=function(t){var e;if(fr.test(t))this.word+=t;else if("["===t)(e=[]).push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=ur;else{if(!_r.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},mr.prototype.neutral=function(t){if(pr.test(t))this.word=t,this.state=2;else if('"'===t)this.word="",this.state=4;else if(gr.test(t))this.word=t,this.state=3;else{if(!_r.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)}},mr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var br=.017453292519943295;function wr(t){return t*br}function xr(s){if("GEOGCS"===s.type?s.projName="longlat":"LOCAL_CS"===s.type?(s.projName="identity",s.local=!0):"object"==typeof s.PROJECTION?s.projName=Object.keys(s.PROJECTION)[0]:s.projName=s.PROJECTION,s.AXIS){for(var t="",e=0,i=s.AXIS.length;e<i;++e){var n=[s.AXIS[e][0].toLowerCase(),s.AXIS[e][1].toLowerCase()];-1!==n[0].indexOf("north")||("y"===n[0]||"lat"===n[0])&&"north"===n[1]?t+="n":-1!==n[0].indexOf("south")||("y"===n[0]||"lat"===n[0])&&"south"===n[1]?t+="s":-1!==n[0].indexOf("east")||("x"===n[0]||"lon"===n[0])&&"east"===n[1]?t+="e":-1===n[0].indexOf("west")&&("x"!==n[0]&&"lon"!==n[0]||"west"!==n[1])||(t+="w")}2===t.length&&(t+="u"),3===t.length&&(s.axis=t)}s.UNIT&&(s.units=s.UNIT.name.toLowerCase(),"metre"===s.units&&(s.units="meter"),s.UNIT.convert)&&("GEOGCS"===s.type?s.DATUM&&s.DATUM.SPHEROID&&(s.to_meter=s.UNIT.convert*s.DATUM.SPHEROID.a):s.to_meter=s.UNIT.convert);var r=s.GEOGCS;function a(t){return t*(s.to_meter||1)}(r="GEOGCS"===s.type?s:r)&&(r.DATUM?s.datumCode=r.DATUM.name.toLowerCase():s.datumCode=r.name.toLowerCase(),"d_"===s.datumCode.slice(0,2)&&(s.datumCode=s.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==s.datumCode&&"new_zealand_1949"!==s.datumCode||(s.datumCode="nzgd49"),"wgs_1984"!==s.datumCode&&"world_geodetic_system_1984"!==s.datumCode||("Mercator_Auxiliary_Sphere"===s.PROJECTION&&(s.sphere=!0),s.datumCode="wgs84"),"_ferro"===s.datumCode.slice(-6)&&(s.datumCode=s.datumCode.slice(0,-6)),"_jakarta"===s.datumCode.slice(-8)&&(s.datumCode=s.datumCode.slice(0,-8)),~s.datumCode.indexOf("belge")&&(s.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(s.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===s.ellps.toLowerCase().slice(0,13)&&(s.ellps="intl"),s.a=r.DATUM.SPHEROID.a,s.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(s.datum_params=r.DATUM.TOWGS84),~s.datumCode.indexOf("osgb_1936")&&(s.datumCode="osgb36"),~s.datumCode.indexOf("osni_1952")&&(s.datumCode="osni52"),(~s.datumCode.indexOf("tm65")||~s.datumCode.indexOf("geodetic_datum_of_1965"))&&(s.datumCode="ire65"),"ch1903+"===s.datumCode&&(s.datumCode="ch1903"),~s.datumCode.indexOf("israel"))&&(s.datumCode="isr93"),s.b&&!isFinite(s.b)&&(s.b=s.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",wr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",wr],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",wr],["lat0","latitude_of_origin",wr],["lat0","standard_parallel_1",wr],["lat1","standard_parallel_1",wr],["lat2","standard_parallel_2",wr],["azimuth","Azimuth"],["alpha","azimuth",wr],["srsCode","name"]].forEach(function(t){var e,i,n;e=s,i=(t=t)[0],n=t[1],!(i in e)&&n in e&&(e[i]=e[n],3===t.length)&&(e[i]=t[2](e[i]))}),s.long0||!s.longc||"Albers_Conic_Equal_Area"!==s.projName&&"Lambert_Azimuthal_Equal_Area"!==s.projName||(s.long0=s.longc),s.lat_ts||!s.lat1||"Stereographic_South_Pole"!==s.projName&&"Polar Stereographic (variant B)"!==s.projName?!s.lat_ts&&s.lat0&&"Polar_Stereographic"===s.projName&&(s.lat_ts=s.lat0,s.lat0=wr(0<s.lat0?90:-90)):(s.lat0=wr(0<s.lat1?90:-90),s.lat_ts=s.lat1)}function Mr(t){var t=new mr(t).output(),e=t.shift(),i=t.shift(),i=(t.unshift(["name",i]),t.unshift(["type",e]),{});return vr(t,i),xr(i),i}function a(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?a[t]=dr(arguments[1]):a[t]=Mr(arguments[1]):a[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?a.apply(e,t):a(t)});if("string"==typeof t){if(t in a)return a[t]}else"EPSG"in t?a["EPSG:"+t.EPSG]=t:"ESRI"in t?a["ESRI:"+t.ESRI]=t:"IAU2000"in t?a["IAU2000:"+t.IAU2000]=t:console.log(t)}}(e=a)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"];var kr=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Sr=["3857","900913","3785","102113"];function Lr(t){var e,i,n;return"string"==typeof t?t in a?a[t]:(n=t,kr.some(function(t){return-1<n.indexOf(t)})?(t=>(t=(t=lr(t,"authority"))&&lr(t,"epsg"))&&-1<Sr.indexOf(t))(e=Mr(t))?a["EPSG:3857"]:(i=(t=>{if(t=lr(t,"extension"))return lr(t,"proj4")})(e))?dr(i):e:"+"===t[0]?dr(t):void 0):t}function Er(t,e){var i,n;if(t=t||{},e)for(n in e)void 0!==(i=e[n])&&(t[n]=i)}function Ar(t,e,i){t*=e;return i/Math.sqrt(1-t*t)}function Cr(t){return t<0?-1:1}function x(t){return Math.abs(t)<=d?t:t-Cr(t)*rr}function jr(t,e,i){i*=t,i=Math.pow((1-i)/(1+i),.5*t);return Math.tan(.5*(g-e))/i}function Tr(t,e){for(var i,n=.5*t,s=g-2*Math.atan(e),r=0;r<=15;r++)if(i=t*Math.sin(s),s+=i=g-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-s,Math.abs(i)<=1e-10)return s;return-9999}function Nr(t){return t}var Or=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ar(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,s=t.y;return 90<s*sr&&s*sr<-90&&180<n*sr&&n*sr<-180||Math.abs(Math.abs(s)-g)<=v?null:(i=this.sphere?(e=this.x0+this.a*this.k0*x(n-this.long0),this.y0+this.a*this.k0*Math.log(Math.tan(w+.5*s))):(i=Math.sin(s),s=jr(this.e,s,i),e=this.x0+this.a*this.k0*x(n-this.long0),this.y0-this.a*this.k0*Math.log(s)),t.x=e,t.y=i,t)},inverse:function(t){var e=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=g-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var n,i=Math.exp(-i/(this.a*this.k0));if(-9999===(n=Tr(this.e,i)))return null}return i=x(this.long0+e/(this.a*this.k0)),t.x=i,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Nr,inverse:Nr,names:["longlat","identity"]}],Ir={},Pr=[];function zr(t,e){var i=Pr.length;return t.names?((Pr[i]=t).names.forEach(function(t){Ir[t.toLowerCase()]=i}),this):(console.log(e),!0)}var Gr={start:function(){Or.forEach(zr)},add:zr,get:function(t){return!!t&&(t=t.toLowerCase(),void 0!==Ir[t]&&Pr[Ir[t]]?Pr[Ir[t]]:void 0)}},Br={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Rr=Br.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Br.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var _={};_.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},_.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},_.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},_.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},_.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},_.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},_.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},_.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},_.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},_.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},_.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},_.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},_.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},_.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},_.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},_.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},_.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},_.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var Dr={};function Fr(t){var e;return 0===t.length?null:"null"===(t=(e="@"===t[0])?t.slice(1):t)?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Dr[t]||null,isNull:!1}}function Ur(t){return t/3600*Math.PI/180}function qr(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function Vr(t,e){if(!(this instanceof Vr))return new Vr(t);e=e||function(t){if(t)throw t};var i,n,s,r,a,o,h,l,d,u,c,p,f=Lr(t);"object"!=typeof f?e("Could not parse to valid json: "+t):(i=Vr.projections.get(f.projName))?(f.datumCode&&"none"!==f.datumCode&&(n=lr(_,f.datumCode))&&(f.datum_params=f.datum_params||(n.towgs84?n.towgs84.split(","):null),f.ellps=n.ellipse,f.datumName=n.datumName||f.datumCode),f.k0=f.k0||1,f.axis=f.axis||"enu",f.ellps=f.ellps||"wgs84",f.lat1=f.lat1||f.lat0,n=f.a,r=f.b,o=f.rf,s=f.ellps,h=f.sphere,n||(n=(s=(s=lr(Br,s))||Rr).a,r=s.b,o=s.rf),o&&!r&&(r=(1-1/o)*n),(0===o||Math.abs(n-r)<v)&&(h=!0,r=n),r=(s={a:n,b:r,rf:o,sphere:h}).a,o=s.b,h=f.R_A,l=((a=r*r)-(o=o*o))/a,c=0,h?(a=(r*=1-l*(er+l*(ir+l*nr)))*r,l=0):c=Math.sqrt(l),r={es:l,e:c,ep2:h=(a-o)/o},c=void 0===(l=f.nadgrids)?null:l.split(",").map(Fr),a=f.datum||(a=f.datumCode,o=f.datum_params,h=s.a,l=s.b,d=r.es,u=r.ep2,c=c,(p={}).datum_type=void 0===a||"none"===a?Ks:Js,o&&(p.datum_params=o.map(parseFloat),0===p.datum_params[0]&&0===p.datum_params[1]&&0===p.datum_params[2]||(p.datum_type=$s),3<p.datum_params.length)&&(0===p.datum_params[3]&&0===p.datum_params[4]&&0===p.datum_params[5]&&0===p.datum_params[6]||(p.datum_type=Zs,p.datum_params[3]*=tr,p.datum_params[4]*=tr,p.datum_params[5]*=tr,p.datum_params[6]=p.datum_params[6]/1e6+1)),c&&(p.datum_type=Hs,p.grids=c),p.a=h,p.b=l,p.es=d,p.ep2=u,p),Er(this,f),Er(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=a,this.init(),e(null,this)):e("Could not get projection name from: "+t)}function Wr(t,e,i){var n=t.x,s=t.y,r=t.z||0;if(s<-g&&-1.001*g<s)s=-g;else if(g<s&&s<1.001*g)s=g;else{if(s<-g)return{x:-1/0,y:-1/0,z:t.z};if(g<s)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),t=Math.sin(s),s=Math.cos(s),{x:((i=i/Math.sqrt(1-e*(t*t)))+r)*s*Math.cos(n),y:(i+r)*s*Math.sin(n),z:(i*(1-e)+r)*t}}function $r(t,e,i,n){var s,r,a,o,h,l,d,u,c,p,f,_=t.x,g=t.y,m=t.z||0,y=Math.sqrt(_*_+g*g),v=Math.sqrt(_*_+g*g+m*m);if(y/i<1e-12){if(p=0,v/i<1e-12)return f=-n,{x:t.x,y:t.y,z:t.z}}else p=Math.atan2(g,_);for(s=m/v,o=(r=y/v)*(1-e)*(a=1/Math.sqrt(1-e*(2-e)*r*r)),h=s*a,c=0;c++,u=e*(u=i/Math.sqrt(1-e*h*h))/(u+(f=y*o+m*h-u*(1-e*h*h))),u=(d=s*(a=1/Math.sqrt(1-u*(2-u)*r*r)))*o-(l=r*(1-u)*a)*h,o=l,h=d,1e-24<u*u&&c<30;);return{x:p,y:Math.atan(d/Math.abs(l)),z:f}}function Zr(t){return t===$s||t===Zs}function Hr(t,e,i){if((s=e,(n=t).datum_type!==s.datum_type||n.a!==s.a||5e-11<Math.abs(n.es-s.es)||(n.datum_type===$s?n.datum_params[0]!==s.datum_params[0]||n.datum_params[1]!==s.datum_params[1]||n.datum_params[2]!==s.datum_params[2]:n.datum_type===Zs&&(n.datum_params[0]!==s.datum_params[0]||n.datum_params[1]!==s.datum_params[1]||n.datum_params[2]!==s.datum_params[2]||n.datum_params[3]!==s.datum_params[3]||n.datum_params[4]!==s.datum_params[4]||n.datum_params[5]!==s.datum_params[5]||n.datum_params[6]!==s.datum_params[6])))&&(t.datum_type!==Ks&&e.datum_type!==Ks)){var n=t.a,s=t.es;if(t.datum_type===Hs){if(0!==Jr(t,!1,i))return;n=Xs,s=Ys}var r,a,o,h,l=e.a,d=e.b,u=e.es;if(e.datum_type===Hs&&(l=Xs,d=Qs,u=Ys),s!==u||n!==l||Zr(t.datum_type)||Zr(e.datum_type))if(i=Wr(i,s,n),Zr(t.datum_type)&&(s=i,n=t.datum_type,t=t.datum_params,i=n===$s?{x:s.x+t[0],y:s.y+t[1],z:s.z+t[2]}:n===Zs?(n=t[0],{x:(a=t[6])*(s.x-(r=t[5])*s.y+(o=t[4])*s.z)+n,y:a*(r*s.x+s.y-(n=t[3])*s.z)+t[1],z:a*(-o*s.x+n*s.y+s.z)+t[2]}):void 0),Zr(e.datum_type)&&(r=i,a=e.datum_type,o=e.datum_params,i=a===$s?{x:r.x-o[0],y:r.y-o[1],z:r.z-o[2]}:a===Zs?(a=o[0],{x:(n=(r.x-a)/(a=o[6]))+(s=o[5])*(t=(r.y-o[1])/a)-(h=o[4])*(r=(r.z-o[2])/a),y:-s*n+t+(a=o[3])*r,z:h*n-a*t+r}):void 0),i=$r(i,u,l,d),e.datum_type===Hs)if(0!==Jr(e,!0,i))return}return i}function Jr(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},r=[];t:for(var a=0;a<t.grids.length;a++){var o=t.grids[a];if(r.push(o.name),o.isNull){s=n;break}if(o.mandatory,null===o.grid){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}else for(var h=o.grid.subgrids,l=0,d=h.length;l<d;l++){var u=h[l],c=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,p=u.ll[0]-c,f=u.ll[1]-c,_=u.ll[0]+(u.lim[0]-1)*u.del[0]+c,c=u.ll[1]+(u.lim[1]-1)*u.del[1]+c;if(!(n.y<f||n.x<p||c<n.y||_<n.x)&&(s=((t,e,i)=>{var n={x:Number.NaN,y:Number.NaN};if(!isNaN(t.x)){var s={x:t.x,y:t.y},r=(s.x-=i.ll[0],s.y-=i.ll[1],s.x=x(s.x-Math.PI)+Math.PI,Kr(s,i));if(e){if(isNaN(r.x))return n;r.x=s.x-r.x,r.y=s.y-r.y;var a,o=9;do{if(a=Kr(r,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}}while(a={x:s.x-(a.x+r.x),y:s.y-(a.y+r.y)},r.x+=a.x,r.y+=a.y,o--&&1e-12<Math.abs(a.x)&&1e-12<Math.abs(a.y));if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=x(r.x+i.ll[0]),n.y=r.y+i.ll[1]}else isNaN(r.x)||(n.x=t.x+r.x,n.y=t.y+r.y)}return n})(n,e,u),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*sr+" "+n.y*sr+" tried: '"+r+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function Kr(t,e){var i,n,s,r,a,o,t={x:t.x/e.del[0],y:t.y/e.del[1]},h=Math.floor(t.x),l=Math.floor(t.y),d=t.x-+h,t=t.y-+l,u={x:Number.NaN,y:Number.NaN};return h<0||h>=e.lim[0]||l<0||l>=e.lim[1]||(l=l*e.lim[0]+h,h=e.cvs[l][0],i=e.cvs[l][1],o=e.cvs[++l][0],n=e.cvs[l][1],l+=e.lim[0],s=e.cvs[l][0],r=e.cvs[l][1],a=e.cvs[--l][0],e=e.cvs[l][1],u.x=(l=(1-d)*(1-t))*h+(h=d*(1-t))*o+(o=(1-d)*t)*a+(a=d*t)*s,u.y=l*i+h*n+o*e+a*r),u}function Xr(t,e,i){for(var n,s,r=i.x,a=i.y,o=i.z||0,h={},l=0;l<3;l++)if(!e||2!==l||void 0!==i.z)switch(s=0===l?(n=r,-1!=="ew".indexOf(t.axis[l])?"x":"y"):1===l?(n=a,-1!=="ns".indexOf(t.axis[l])?"y":"x"):(n=o,"z"),t.axis[l]){case"e":h[s]=n;break;case"w":h[s]=-n;break;case"n":h[s]=n;break;case"s":h[s]=-n;break;case"u":void 0!==i[s]&&(h.z=n);break;case"d":void 0!==i[s]&&(h.z=-n);break;default:return null}return h}function Qr(t){var e={x:t[0],y:t[1]};return 2<t.length&&(e.z=t[2]),3<t.length&&(e.m=t[3]),e}function Yr(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ta(t,e,i,n){var s,r,a=void 0!==(i=Array.isArray(i)?Qr(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(Yr((r=i).x),Yr(r.y),t.datum&&e.datum&&(r=e,((s=t).datum.datum_type===$s||s.datum.datum_type===Zs||s.datum.datum_type===Hs)&&"WGS84"!==r.datumCode||(r.datum.datum_type===$s||r.datum.datum_type===Zs||r.datum.datum_type===Hs)&&"WGS84"!==s.datumCode)&&(i=ta(t,r=new Vr("WGS84"),i,n),t=r),n&&"enu"!==t.axis&&(i=Xr(t,!1,i)),"longlat"===t.projName)i={x:i.x*b,y:i.y*b,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=Hr(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*sr,y:i.y*sr,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?Xr(e,!0,i):(i&&!a&&delete i.z,i)}(Vr.projections=Gr).start();var ea=Vr("WGS84");function ia(e,i,n,t){var s,r;return Array.isArray(n)?(r=ta(e,i,n,t)||{x:NaN,y:NaN},2<n.length?void 0!==e.name&&"geocent"===e.name||void 0!==i.name&&"geocent"===i.name?("number"==typeof r.z?[r.x,r.y,r.z]:[r.x,r.y,n[2]]).concat(n.slice(3)):[r.x,r.y].concat(n.slice(2)):[r.x,r.y]):(s=ta(e,i,n,t),2!==(r=Object.keys(n)).length&&r.forEach(function(t){if(void 0!==e.name&&"geocent"===e.name||void 0!==i.name&&"geocent"===i.name){if("x"===t||"y"===t||"z"===t)return}else if("x"===t||"y"===t)return;s[t]=n[t]}),s)}function na(t){return t instanceof Vr?t:t.oProj||Vr(t)}function h(i,n,t){i=na(i);var e=!1;return void 0===n?(n=i,i=ea,e=!0):void 0===n.x&&!Array.isArray(n)||(t=n,n=i,i=ea,e=!0),n=na(n),t?ia(i,n,t):(t={forward:function(t,e){return ia(i,n,t,e)},inverse:function(t,e){return ia(n,i,t,e)}},e&&(t.oProj=n),t)}var sa=6,ra="AJSAJS",aa="AFAFAF",oa=65,S=73,E=79,ha=86,la=90,e={forward:da,inverse:function(t){t=fa(ga(t.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:ua};function da(t,e){return e=e||5,t=(t=>{var e,i,n,s,r,a=t.lat,t=t.lon,o=.00669438,h=ca(a),l=ca(t);return r=Math.floor((t+180)/6)+1,180===t&&(r=60),56<=a&&a<64&&3<=t&&t<12&&(r=32),72<=a&&a<84&&(0<=t&&t<9?r=31:9<=t&&t<21?r=33:21<=t&&t<33?r=35:33<=t&&t<42&&(r=37)),t=ca(6*(r-1)-180+3),e=o/(1-o),i=6378137/Math.sqrt(1-o*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),s=e*Math.cos(h)*Math.cos(h),l=Math.cos(h)*(l-t),t=6378137*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-35*o*o*o/3072*Math.sin(6*h)),o=.9996*i*(l+(1-n+s)*l*l*l/6+(5-18*n+n*n+72*s-58*e)*l*l*l*l*l/120)+5e5,t=.9996*(t+i*Math.tan(h)*(l*l/2+(5-n+9*s+4*s*s)*l*l*l*l/24+(61-58*n+n*n+600*s-330*e)*l*l*l*l*l*l/720)),a<0&&(t+=1e7),{northing:Math.round(t),easting:Math.round(o),zoneNumber:r,zoneLetter:(t=>{var e="Z";return t<=84&&72<=t?e="X":t<72&&64<=t?e="W":t<64&&56<=t?e="V":t<56&&48<=t?e="U":t<48&&40<=t?e="T":t<40&&32<=t?e="S":t<32&&24<=t?e="R":t<24&&16<=t?e="Q":t<16&&8<=t?e="P":t<8&&0<=t?e="N":t<0&&-8<=t?e="M":t<-8&&-16<=t?e="L":t<-16&&-24<=t?e="K":t<-24&&-32<=t?e="J":t<-32&&-40<=t?e="H":t<-40&&-48<=t?e="G":t<-48&&-56<=t?e="F":t<-56&&-64<=t?e="E":t<-64&&-72<=t?e="D":t<-72&&-80<=t&&(e="C"),e})(a)}})({lat:t[1],lon:t[0]}),e=e,i="00000"+t.easting,n="00000"+t.northing,t.zoneNumber+t.zoneLetter+((t,e,i)=>{i=_a(i),t=Math.floor(t/1e5),e=Math.floor(e/1e5)%20;var i=(i=i)-1,n=ra.charCodeAt(i),i=aa.charCodeAt(i),s=!1;return la<(t=n+t-1)&&(t=t-la+oa-1,s=!0),(t===S||n<S&&S<t||(S<t||n<S)&&s)&&t++,(t===E||n<E&&E<t||(E<t||n<E)&&s)&&++t===S&&t++,la<t&&(t=t-la+oa-1),s=ha<(e=i+e)&&(e=e-ha+oa-1,!0),(e===S||i<S&&S<e||(S<e||i<S)&&s)&&e++,(e===E||i<E&&E<e||(E<e||i<E)&&s)&&++e===S&&e++,ha<e&&(e=e-ha+oa-1),String.fromCharCode(t)+String.fromCharCode(e)})(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e);var i,n}function ua(t){t=fa(ga(t.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function ca(t){return t*(Math.PI/180)}function pa(t){return t/Math.PI*180}function fa(t){var e,i,n,s,r,a,o=t.northing,h=t.zoneNumber;return h<0||60<h?null:(r=t.easting-5e5,o=o,t.zoneLetter<"N"&&(o-=1e7),h=6*(h-1)-180+3,e=(a=.00669438)/(1-a),i=(o=o/.9996/6367449.145945056)+(3*(i=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)))/2-27*i*i*i/32)*Math.sin(2*o)+(21*i*i/16-55*i*i*i*i/32)*Math.sin(4*o)+151*i*i*i/96*Math.sin(6*o),o=6378137/Math.sqrt(1-a*Math.sin(i)*Math.sin(i)),n=Math.tan(i)*Math.tan(i),s=e*Math.cos(i)*Math.cos(i),a=6378137*(1-a)/Math.pow(1-a*Math.sin(i)*Math.sin(i),1.5),r=r/(.9996*o),o=pa(o=i-o*Math.tan(i)/a*(r*r/2-(5+3*n+10*s-4*s*s-9*e)*r*r*r*r/24+(61+90*n+298*s+45*n*n-252*e-3*s*s)*r*r*r*r*r*r/720)),a=h+pa(a=(r-(1+2*n+s)*r*r*r/6+(5-2*s+28*n-3*s*s+8*e+24*n*n)*r*r*r*r*r/120)/Math.cos(i)),t.accuracy?{top:(h=fa({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber})).lat,right:h.lon,bottom:o,left:a}:{lat:o,lon:a})}function _a(t){t%=sa;return t=0===t?sa:t}function ga(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,s="",r=0;!/[A-Z]/.test(e=t.charAt(r));){if(2<=r)throw"MGRSPoint bad conversion from: "+t;s+=e,r++}var a=parseInt(s,10);if(0===r||i<r+3)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(r++);if(o<="A"||"B"===o||"Y"===o||"Z"<=o||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;for(var n=t.substring(r,r+=2),h=_a(a),l=((t,e)=>{for(var i=ra.charCodeAt(e-1),n=1e5,s=!1;i!==t.charCodeAt(0);){if(++i===S&&i++,i===E&&i++,la<i){if(s)throw"Bad character: "+t;i=oa,s=!0}n+=1e5}return n})(n.charAt(0),h),d=((t,e)=>{if("V"<t)throw"MGRSPoint given invalid Northing "+t;for(var i=aa.charCodeAt(e-1),n=0,s=!1;i!==t.charCodeAt(0);){if(++i===S&&i++,i===E&&i++,ha<i){if(s)throw"Bad character: "+t;i=oa,s=!0}n+=1e5}return n})(n.charAt(1),h);d<(t=>{var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(0<=e)return e;throw"Invalid zone letter: "+t})(o);)d+=2e6;n=i-r;if(n%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,c,h=n/2,i=0,n=0;return 0<h&&(u=1e5/Math.pow(10,h),c=t.substring(r,r+h),i=parseFloat(c)*u,c=t.substring(r+h),n=parseFloat(c)*u),{easting:i+l,northing:n+d,zoneLetter:o,zoneNumber:a,accuracy:u}}function ma(t,e,i){if(!(this instanceof ma))return new ma(t,e,i);var n;Array.isArray(t)?(this.x=t[0],this.y=t[1],this.z=t[2]||0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z||0):"string"==typeof t&&void 0===e?(n=t.split(","),this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0):(this.x=t,this.y=e,this.z=i||0),console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ma.fromMGRS=function(t){return new ma(ua(t))},ma.prototype.toMGRS=function(t){return da([this.x,this.y],t)};var ya=1,va=.25,ba=.046875,wa=.01953125,xa=.01068115234375,Ma=.75,ka=.46875,Sa=.013020833333333334,La=.007120768229166667,Ea=.3645833333333333,Aa=.005696614583333333,Ca=.3076171875;function ja(t){var e=[],i=(e[0]=ya-t*(va+t*(ba+t*(wa+t*xa))),e[1]=t*(Ma-t*(ba+t*(wa+t*xa))),t*t);return e[2]=i*(ka-t*(Sa+t*La)),e[3]=(i*=t)*(Ea-t*Aa),e[4]=i*t*Ca,e}function Ta(t,e,i,n){return n[0]*t-(i*=e)*(n[1]+(e*=e)*(n[2]+e*(n[3]+e*n[4])))}var Na=20;function Oa(t,e,i){for(var n=1/(1-e),s=t,r=Na;r;--r){var a=Math.sin(s),o=1-e*a*a;if(s-=o=(Ta(s,a,Math.cos(s),i)-t)*(o*Math.sqrt(o))*n,Math.abs(o)<v)return s}return s}var Ia={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ja(this.es),this.ml0=Ta(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e=t.x,i=t.y,e=x(e-this.long0),n=Math.sin(i),s=Math.cos(i);if(this.es)var r=s*e,a=Math.pow(r,2),o=this.ep2*Math.pow(s,2),h=Math.pow(o,2),l=Math.abs(s)>v?Math.tan(i):0,l=Math.pow(l,2),d=Math.pow(l,2),u=1-this.es*Math.pow(n,2),u=(r/=Math.sqrt(u),Ta(i,n,s,this.en)),c=this.a*(this.k0*r*(1+a/6*(1-l+o+a/20*(5-18*l+d+14*o-58*l*o+a/42*(61+179*d-d*l-479*l)))))+this.x0,u=this.a*(this.k0*(u-this.ml0+n*e*r/2*(1+a/12*(5-l+9*o+4*h+a/30*(61+d-58*l+270*o-330*l*o+a/56*(1385+543*d-d*l-3111*l))))))+this.y0;else{n=s*Math.sin(e);if(Math.abs(Math.abs(n)-1)<v)return 93;if(c=.5*this.a*this.k0*Math.log((1+n)/(1-n))+this.x0,u=s*Math.cos(e)/Math.sqrt(1-Math.pow(n,2)),1<=(n=Math.abs(u))){if(v<n-1)return 93;u=0}else u=Math.acos(u);u=this.a*this.k0*((u=i<0?-u:u)-this.lat0)+this.y0}return t.x=c,t.y=u,t},inverse:function(t){var e,i,n,s,r,a,o,h,l,d=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);return n=this.es?(o=Oa(h=this.ml0+u/this.k0,this.es,this.en),Math.abs(o)<g?(r=Math.sin(o),e=Math.cos(o),l=Math.abs(e)>v?Math.tan(o):0,a=this.ep2*Math.pow(e,2),s=Math.pow(a,2),i=Math.pow(l,2),n=Math.pow(i,2),h=1-this.es*Math.pow(r,2),r=d*Math.sqrt(h)/this.k0,l=o-(h*=l)*(o=Math.pow(r,2))/(1-this.es)*.5*(1-o/12*(5+3*i-9*a*i+a-4*s-o/30*(61+90*i-252*a*i+45*n+46*a-o/56*(1385+3633*i+4095*n+1574*n*i)))),x(this.long0+r*(1-o/6*(1+2*i+a-o/20*(5+28*i+24*n+8*a*i+6*a-o/42*(61+662*i+1320*n+720*n*i))))/e)):(l=g*Cr(u),0)):(r=.5*((s=Math.exp(d/this.k0))-1/s),a=this.lat0+u/this.k0,o=Math.cos(a),h=Math.sqrt((1-Math.pow(o,2))/(1+Math.pow(r,2))),l=Math.asin(h),u<0&&(l=-l),0==r&&0===o?0:x(Math.atan2(r,o)+this.long0)),t.x=n,t.y=l,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Pa(t){t=Math.exp(t);return(t-1/t)/2}function u(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),t=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(t,2))}function za(t){var e,i,n,s=Math.abs(t);return e=s*(1+s/(u(1,s)+1)),s=0==(n=(i=1+e)-1)?e:e*Math.log(i)/n,t<0?-s:s}function Ga(t,e){for(var i,n=2*Math.cos(2*e),s=t.length-1,r=t[s],a=0;0<=--s;)i=n*r-a+t[s],a=r,r=i;return e+i*Math.sin(2*e)}function Ba(t,e,i){for(var n,s,r=Math.sin(e),e=Math.cos(e),a=Pa(i),i=(i=i,((i=Math.exp(i))+1/i)/2),o=2*e*i,h=-2*r*a,l=t.length-1,d=t[l],u=0,c=0,p=0;0<=--l;)n=c,s=u,d=o*(c=d)-n-h*(u=p)+t[l],p=h*c-s+o*u;return[(o=r*i)*d-(h=e*a)*p,o*p+h*d]}var Ra={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ia.init.apply(this),this.forward=Ia.forward,this.inverse=Ia.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=e=(e=this.es/(1+Math.sqrt(1-this.es)))/(2-e),e=(this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+-2854/675*e))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+4642/4725*e))))-2),this.cgb[1]=(t*=e)*(7/3+e*(e*(-227/45+e*(2704/315+2323/945*e))-1.6)),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+-1522/945*e)))),this.cgb[2]=(t*=e)*(56/15+e*(-136/35+e*(-1262/105+73814/2835*e))),this.cbg[2]=t*(-26/15+e*(34/21+e*(1.6+-12686/2835*e))),this.cgb[3]=(t*=e)*(4279/630+e*(-332/35+-399572/14175*e)),this.cbg[3]=t*(1237/630+e*(-24832/14175*e-2.4)),this.cgb[4]=(t*=e)*(4174/315+-144838/6237*e),this.cbg[4]=t*(-734/315+109598/31185*e),this.cgb[5]=601676/22275*(t*=e),this.cbg[5]=444337/155925*t,t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(.25+t*(1/64+t/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+-96199/604800*e))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+7891/37800*e))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+1118711/3870720*e)))),this.gtu[1]=t*(13/48+e*(e*(557/1440+e*(281/630+-1983433/1935360*e))-.6)),this.utg[2]=(t*=e)*(-17/480+e*(37/840+e*(209/4480+-5569/90720*e))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+167603/181440*e))),this.utg[3]=(t*=e)*(-4397/161280+e*(11/504+830251/7257600*e)),this.gtu[3]=t*(49561/161280+e*(-179/168+6601661/7257600*e)),this.utg[4]=(t*=e)*(-4583/161280+108847/3991680*e),this.gtu[4]=t*(34729/80640+-3418889/1995840*e),this.utg[5]=-.03233083094085698*(t*=e),this.gtu[5]=.6650675310896665*t,Ga(this.cbg,this.lat0));this.Zb=-this.Qn*(e+((t,e)=>{for(var i,n=2*Math.cos(e),s=t.length-1,r=t[s],a=0;0<=--s;)i=n*r-a+t[s],a=r,r=i;return Math.sin(e)*i})(this.gtu,2*e))},forward:function(t){var e,i=x(t.x-this.long0),n=Ga(this.cbg,n=t.y),s=Math.sin(n),r=Math.cos(n),a=Math.sin(i),o=Math.cos(i),a=(n=Math.atan2(s,o*r),i=Math.atan2(a*r,u(s,r*o)),i=za(Math.tan(i)),Ba(this.gtu,2*n,2*i));return n+=a[0],i+=a[1],s=Math.abs(i)<=2.623395162778?(e=this.a*(this.Qn*i)+this.x0,this.a*(this.Qn*n+this.Zb)+this.y0):e=1/0,t.x=e,t.y=s,t},inverse:function(t){var e,i,n,s,r=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);return a=(a-this.Zb)/this.Qn,r/=this.Qn,s=Math.abs(r)<=2.623395162778?(a+=(n=Ba(this.utg,2*a,2*r))[0],r+=n[1],r=Math.atan(Pa(r)),n=Math.sin(a),e=Math.cos(a),s=Math.sin(r),i=Math.cos(r),a=Math.atan2(n*i,u(s,i*e)),n=x((r=Math.atan2(s,i*e))+this.long0),Ga(this.cgb,a)):n=1/0,t.x=n,t.y=s,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};Gr={init:function(){var t=((t,e)=>{if(void 0===t){if((t=Math.floor(30*(x(e)+Math.PI)/Math.PI)+1)<0)return 0;if(60<t)return 60}return t})(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*b,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ra.init.apply(this),this.forward=Ra.forward,this.inverse=Ra.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Da(t,e){return Math.pow((1-t)/(1+t),e)}var Fa={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+w)/(Math.pow(Math.tan(.5*this.lat0+w),this.C)*Da(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+w),this.C)*Da(this.e*Math.sin(i),this.ratexp))-g,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+w)/this.K,1/this.C),s=20;0<s&&(i=2*Math.atan(n*Da(this.e*Math.sin(t.y),-.5*this.e))-g,!(Math.abs(i-t.y)<1e-14));--s)t.y=i;return s?(t.x=e,t.y=i,t):null},names:["gauss"]};var Ua={init:function(){Fa.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,s;return t.x=x(t.x-this.long0),Fa.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=(s=u(t.x,t.y))?(i=2*Math.atan2(s,this.R2),e=Math.sin(i),i=Math.cos(i),n=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)):(n=this.phic0,0),t.x=s,t.y=n,Fa.inverse.apply(this,[t]),t.x=x(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var qa={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=v&&(this.k0=.5*(1+Cr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=v&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=v&&Math.abs(Math.cos(this.lat_ts))>v&&(this.k0=.5*this.cons*Ar(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/jr(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ar(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-g,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n=t.x,s=t.y,r=Math.sin(s),a=Math.cos(s),o=x(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=v&&Math.abs(s+this.lat0)<=v?(t.x=NaN,t.y=NaN):this.sphere?(e=2*this.k0/(1+this.sinlat0*r+this.coslat0*a*Math.cos(o)),t.x=this.a*e*a*Math.sin(o)+this.x0,t.y=this.a*e*(this.coslat0*r-this.sinlat0*a*Math.cos(o))+this.y0):(a=2*Math.atan(this.ssfn_(s,r,this.e))-g,i=Math.cos(a),a=Math.sin(a),Math.abs(this.coslat0)<=v?(s=jr(this.e,s*this.con,this.con*r),r=2*this.a*this.k0*s/this.cons,t.x=this.x0+r*Math.sin(n-this.long0),t.y=this.y0-this.con*r*Math.cos(n-this.long0)):(Math.abs(this.sinlat0)<v?(e=2*this.a*this.k0/(1+i*Math.cos(o)),t.y=e*a):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*i*Math.cos(o))),t.y=e*(this.cosX0*a-this.sinX0*i*Math.cos(o))+this.y0),t.x=e*i*Math.sin(o)+this.x0)),t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,s,r=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere)i=2*Math.atan(r/(2*this.a*this.k0)),n=this.long0,s=this.lat0,r<=v||(s=Math.asin(Math.cos(i)*this.sinlat0+t.y*Math.sin(i)*this.coslat0/r),n=Math.abs(this.coslat0)<v?0<this.lat0?x(this.long0+Math.atan2(t.x,-1*t.y)):x(this.long0+Math.atan2(t.x,t.y)):x(this.long0+Math.atan2(t.x*Math.sin(i),r*this.coslat0*Math.cos(i)-t.y*this.sinlat0*Math.sin(i))));else if(Math.abs(this.coslat0)<=v){if(r<=v)return s=this.lat0,n=this.long0,t.x=n,t.y=s,t;t.x*=this.con,t.y*=this.con,i=r*this.cons/(2*this.a*this.k0),s=this.con*Tr(this.e,i),n=this.con*x(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,r<=v?e=this.X0:(e=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/r),n=x(this.long0+Math.atan2(t.x*Math.sin(i),r*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),s=-1*Tr(this.e,Math.tan(.5*(g+e)));return t.x=n,t.y=s,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(g+t))*Math.pow((1-e)/(1+e),.5*i)}};var Va={init:function(){var t=this.lat0,e=(this.lambda0=this.long0,Math.sin(t)),i=this.a,n=2*(n=1/this.rf)-Math.pow(n,2),s=this.e=Math.sqrt(n),i=(this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha),Math.log(Math.tan(Math.PI/4+this.b0/2))),n=Math.log(Math.tan(Math.PI/4+t/2)),t=Math.log((1+s*e)/(1-s*e));this.K=i-this.alpha*n+this.alpha*s/2*t},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),e=-this.alpha*(e+i)+this.K,i=2*(Math.atan(Math.exp(e))-Math.PI/4),e=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(e))),i=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(e));return t.y=this.R/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var e,i=t.x-this.x0,n=t.y-this.y0,i=i/this.R,n=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),i=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),n=this.lambda0+i/this.alpha,r=s,a=-1e3,o=0;1e-7<Math.abs(r-a);){if(20<++o)return;e=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(r))/2)),a=r,r=2*Math.atan(Math.exp(e))-Math.PI/2}return t.x=n,t.y=r,t},names:["somerc"]},Wa=1e-7;var $a={init:function(){var t,e,i,n,s,r=0,a=0,o=0,h=0,l=0,d=0,u=0,c=(this.no_off=(p="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)),this.no_rot="no_rot"in this,!1),p=("alpha"in this&&(c=!0),!1);if("rectified_grid_angle"in this&&(p=!0),c&&(u=this.alpha),p&&(r=this.rectified_grid_angle*b),c||p)a=this.longc;else if(o=this.long1,l=this.lat1,h=this.long2,d=this.lat2,Math.abs(l-d)<=Wa||(t=Math.abs(l))<=Wa||Math.abs(t-g)<=Wa||Math.abs(Math.abs(this.lat0)-g)<=Wa||Math.abs(Math.abs(d)-g)<=Wa)throw new Error;var f=1-this.es,_=Math.sqrt(f);Math.abs(this.lat0)>v?(n=Math.sin(this.lat0),e=Math.cos(this.lat0),t=1-this.es*n*n,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/f),this.A=this.B*this.k0*_/t,(i=(e=this.B*_/(e*Math.sqrt(t)))*e-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=e,this.E*=Math.pow(jr(this.e,this.lat0,n),this.B)):(this.B=1/_,this.A=this.k0,this.E=e=i=1),c||p?(c?(s=Math.asin(Math.sin(u)/e),p||(r=u)):(s=r,u=Math.asin(e*Math.sin(s))),this.lam0=a-Math.asin(.5*(i-1/i)*Math.tan(s))/this.B):(f=Math.pow(jr(this.e,l,Math.sin(l)),this.B),n=Math.pow(jr(this.e,d,Math.sin(d)),this.B),i=this.E/f,_=(n-f)/(n+f),c=this.E*this.E,(t=o-h)<-Math.pi?h-=rr:t>Math.pi&&(h+=rr),this.lam0=x(.5*(o+h)-Math.atan((c-n*f)/(c+n*f)*Math.tan(.5*this.B*(o-h))/_)/this.B),s=Math.atan(2*Math.sin(this.B*x(o-this.lam0))/(i-1/i)),r=u=Math.asin(e*Math.sin(s))),this.singam=Math.sin(s),this.cosgam=Math.cos(s),this.sinrot=Math.sin(r),this.cosrot=Math.cos(r),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(e*e-1)/Math.cos(u))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*s,this.v_pole_n=this.ArB*Math.log(Math.tan(w-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(w+i))},forward:function(t){var e,i,n,s,r={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-g)>v){if(n=.5*((s=this.E/Math.pow(jr(this.e,t.y,Math.sin(t.y)),this.B))-(i=1/s)),s=.5*(s+i),e=Math.sin(this.B*t.x),s=(n*this.singam-e*this.cosgam)/s,Math.abs(Math.abs(s)-1)<v)throw new Error;s=.5*this.ArB*Math.log((1-s)/(1+s)),i=Math.cos(this.B*t.x),n=Math.abs(i)<Wa?this.A*t.x:this.ArB*Math.atan2(n*this.cosgam+e*this.singam,i)}else s=0<t.y?this.v_pole_n:this.v_pole_s,n=this.ArB*t.y;return this.no_rot?(r.x=n,r.y=s):(n-=this.u_0,r.x=s*this.cosrot+n*this.sinrot,r.y=n*this.cosrot-s*this.sinrot),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r},inverse:function(t){var e,i,n,s={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),t=this.no_rot?(n=t.y,t.x):(n=t.x*this.cosrot-t.y*this.sinrot,t.y*this.cosrot+t.x*this.sinrot+this.u_0),e=.5*((n=Math.exp(-this.BrA*n))-1/n),n=.5*(n+1/n),n=((i=Math.sin(this.BrA*t))*this.cosgam+e*this.singam)/n,Math.abs(Math.abs(n)-1)<v)s.x=0,s.y=n<0?-g:g;else{if(s.y=this.E/Math.sqrt((1+n)/(1-n)),s.y=Tr(this.e,Math.pow(s.y,1/this.B)),s.y===1/0)throw new Error;s.x=-this.rB*Math.atan2(e*this.cosgam-i*this.singam,Math.cos(this.BrA*t))}return s.x+=this.lam0,s},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var Za={init:function(){var t,e,i,n,s,r;this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,Math.abs(this.lat1+this.lat2)<v||(t=this.b/this.a,this.e=Math.sqrt(1-t*t),t=Math.sin(this.lat1),e=Math.cos(this.lat1),e=Ar(this.e,t,e),i=jr(this.e,this.lat1,t),s=Math.sin(this.lat2),n=Math.cos(this.lat2),n=Ar(this.e,s,n),s=jr(this.e,this.lat2,s),r=jr(this.e,this.lat0,Math.sin(this.lat0)),Math.abs(this.lat1-this.lat2)>v?this.ns=Math.log(e/n)/Math.log(i/s):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=e/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(r,this.ns),this.title)||(this.title="Lambert Conformal Conic")},forward:function(t){var e,i=t.x,n=t.y,s=(Math.abs(2*Math.abs(n)-Math.PI)<=v&&(n=Cr(n)*(g-2*v)),Math.abs(Math.abs(n)-g));if(v<s)s=jr(this.e,n,Math.sin(n)),e=this.a*this.f0*Math.pow(s,this.ns);else{if(n*this.ns<=0)return null;e=0}return s=this.ns*x(i-this.long0),t.x=this.k0*(e*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-e*Math.cos(s))+this.y0,t},inverse:function(t){var e,i,n=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0,r=0<this.ns?(e=Math.sqrt(n*n+s*s),1):(e=-Math.sqrt(n*n+s*s),-1),a=0;if(0!==e&&(a=Math.atan2(r*n,r*s)),0!==e||0<this.ns){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=Tr(this.e,n)))return null}else i=-g;return s=x(a/this.ns+this.long0),t.x=s,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Ha={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e=t.x,i=t.y,e=x(e-this.long0),n=Math.pow((1+this.e*Math.sin(i))/(1-this.e*Math.sin(i)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(i/2+this.s45),this.alfa)/n)-this.s45),n=-e*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),i=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),n=this.n*i,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n);return t.y=i*Math.cos(n),t.x=i*Math.sin(n),this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){for(var e,i,n,s,r=t.x,a=(t.x=t.y,t.y=r,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),r=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,n=e,s=0);t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-t.y)<1e-10&&(s=1),n=t.y,a+=1,0===s&&a<15;);return 15<=a?null:t},names:["Krovak","krovak"]};function A(t,e,i,n,s){return t*s-e*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)}function Ja(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Ka(t){return.375*t*(1+.25*t*(1+.46875*t))}function Xa(t){return.05859375*t*t*(1+.75*t)}function Qa(t){return t*t*t*(35/3072)}function Ya(t,e,i){e*=i;return t/Math.sqrt(1-e*e)}function to(t){return Math.abs(t)<g?t:t-Cr(t)*Math.PI}function eo(t,e,i,n,s){for(var r,a=t/e,o=0;o<15;o++)if(a+=r=(t-(e*a-i*Math.sin(2*a)+n*Math.sin(4*a)-s*Math.sin(6*a)))/(e-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*s*Math.cos(6*a)),Math.abs(r)<=1e-10)return a;return NaN}var io={init:function(){this.sphere||(this.e0=Ja(this.es),this.e1=Ka(this.es),this.e2=Xa(this.es),this.e3=Qa(this.es),this.ml0=this.a*A(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n,s,r,a,o=t.x,h=t.y,o=x(o-this.long0);return h=this.sphere?(a=this.a*Math.asin(Math.cos(h)*Math.sin(o)),this.a*(Math.atan2(Math.tan(h),Math.cos(o))-this.lat0)):(e=Math.sin(h),i=Math.cos(h),n=Ya(this.a,this.e,e),s=Math.tan(h)*Math.tan(h),a=n*(o=o*Math.cos(h))*(1-(o=o*o)*s*(1/6-(8-s+8*(r=this.es*i*i/(1-this.es)))*o/120)),this.a*A(this.e0,this.e1,this.e2,this.e3,h)-this.ml0+n*e/i*o*(.5+(5-s+6*r)*o/24)),t.x=a+this.x0,t.y=h+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a;if(this.sphere)var n=i+this.lat0,s=Math.asin(Math.sin(n)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(n));else{var r=eo(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-g)<=v)return t.x=this.long0,t.y=g,i<0&&(t.y*=-1),t;var i=Ya(this.a,this.e,Math.sin(r)),a=i*i*i/this.a/this.a*(1-this.es),o=Math.pow(Math.tan(r),2),e=e*this.a/i,h=e*e;s=r-i*Math.tan(r)/a*e*e*(.5-(1+3*o)*e*e/24),n=e*(1-h*(o/3+(1+3*o)*o*h/15))/Math.cos(r)}return t.x=x(n+this.long0),t.y=to(s),t},names:["Cassini","Cassini_Soldner","cass"]};function no(t,e){var i;return 1e-7<t?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var so=.3333333333333333,ro=.17222222222222222,ao=.10257936507936508,oo=.06388888888888888,ho=.0664021164021164,lo=.016415012942191543;var uo={init:function(){var t,e,i,n=Math.abs(this.lat0);if(Math.abs(n-g)<v?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<v?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=no(this.e,1),this.mmf=.5/(1-this.es),this.apa=(n=this.es,(i=[])[0]=n*so,i[0]+=(e=n*n)*ro,i[1]=e*oo,i[0]+=(e*=n)*ao,i[1]+=e*ho,i[2]=e*lo,i),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=no(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,s,r,a,o,h,l,d,u=t.x,c=t.y,u=x(u-this.long0);if(this.sphere){if(r=Math.sin(c),d=Math.cos(c),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+d*n:1+this.sinph0*r+this.cosph0*d*n)<=v)return null;e=(i=Math.sqrt(2/i))*d*Math.sin(u),i*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(c+this.lat0)<v)return null;i=w-.5*c,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(u),i*=n}}else{switch(l=h=o=0,n=Math.cos(u),s=Math.sin(u),r=Math.sin(c),a=no(this.e,r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=a/this.qp,h=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:l=1+this.sinb1*o+this.cosb1*h*n;break;case this.EQUIT:l=1+h*n;break;case this.N_POLE:l=g+c,a=this.qp-a;break;case this.S_POLE:l=c-g,a=this.qp+a}if(Math.abs(l)<v)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*o-this.sinb1*h*n):(l=Math.sqrt(2/(1+h*n)))*o*this.ymf,e=this.xmf*l*h*s;break;case this.N_POLE:case this.S_POLE:0<=a?(e=(l=Math.sqrt(a))*s,i=n*(this.mode===this.S_POLE?l:-l)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,s,r,a,o=t.x/this.a,h=t.y/this.a;if(this.sphere){var l,d=0,u=0,c=Math.sqrt(o*o+h*h);if(1<(l=.5*c))return null;switch(l=2*Math.asin(l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=Math.sin(l),d=Math.cos(l)),this.mode){case this.EQUIT:l=Math.abs(c)<=v?0:Math.asin(h*u/c),o*=u,h=d*c;break;case this.OBLIQ:l=Math.abs(c)<=v?this.lat0:Math.asin(d*this.sinph0+h*u*this.cosph0/c),o*=u*this.cosph0,h=(d-Math.sin(l)*this.sinph0)*c;break;case this.N_POLE:h=-h,l=g-l;break;case this.S_POLE:l-=g}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(o,h):0}else{if(n=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o/=this.dd,h*=this.dd,(r=Math.sqrt(o*o+h*h))<v)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*r/this.rq),a=Math.cos(s),o*=s=Math.sin(s),h=this.mode===this.OBLIQ?(n=a*this.sinb1+h*s*this.cosb1/r,i=this.qp*n,r*this.cosb1*a-h*this.sinb1*s):(i=this.qp*(n=h*s/r),r*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(!(i=o*o+(h=this.mode===this.N_POLE?-h:h)*h))return t.x=this.long0,t.y=this.lat0,t;n=1-i/this.qp,this.mode===this.S_POLE&&(n=-n)}e=Math.atan2(o,h),s=Math.asin(n),r=this.apa,a=s+s,l=s+r[0]*Math.sin(a)+r[1]*Math.sin(a+a)+r[2]*Math.sin(a+a+a)}return t.x=x(this.long0+e),t.y=l,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function co(t){return 1<Math.abs(t)&&(t=1<t?1:-1),Math.asin(t)}var po={init:function(){Math.abs(this.lat1+this.lat2)<v||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ar(this.e3,this.sin_po,this.cos_po),this.qs1=no(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ar(this.e3,this.sin_po,this.cos_po),this.qs2=no(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=no(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>v?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y,i=(this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i),no(this.e3,this.sin_phi)),i=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,e=this.ns0*x(e-this.long0),n=i*Math.sin(e)+this.x0,i=this.rh-i*Math.cos(e)+this.y0;return t.x=n,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,n=0<=this.ns0?(i=Math.sqrt(t.x*t.x+t.y*t.y),1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),-1),(e=0)!==i&&(e=Math.atan2(n*t.x,n*t.y)),n=i*this.ns0/this.a,n=this.sphere?Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,this.phi1z(this.e3,i)),i=x(e/this.ns0+this.long0),t.x=i,t.y=n,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,s,r=co(.5*e);if(t<v)return r;for(var a=t*t,o=1;o<=25;o++)if(r+=s=.5*(n=1-(i=t*(s=Math.sin(r)))*i)*n/Math.cos(r)*(e/(1-a)-s/n+.5/t*Math.log((1-i)/(1+i))),Math.abs(s)<=1e-7)return r;return null}};var fo={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i=t.x,n=t.y,i=x(i-this.long0),s=Math.sin(n),n=Math.cos(n),r=Math.cos(i),a=0<(a=this.sin_p14*s+this.cos_p14*n*r)||Math.abs(a)<=v?(e=this.x0+ +this.a*n*Math.sin(i)/a,this.y0+ +this.a*(this.cos_p14*s-this.sin_p14*n*r)/a):(e=this.x0+this.infinity_dist*n*Math.sin(i),this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*n*r));return t.x=e,t.y=a,t},inverse:function(t){var e,i,n,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,n=(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),i=Math.sin(n),s=co((n=Math.cos(n))*this.sin_p14+t.y*i*this.cos_p14/e),n=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),x(this.long0+n)):(s=this.phic0,0),t.x=n,t.y=s,t},names:["gnom"]};var _o={init:function(){this.sphere||(this.k0=Ar(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i=t.x,n=t.y,i=x(i-this.long0);return i=this.sphere?(e=this.x0+this.a*i*Math.cos(this.lat_ts),this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts)):(n=no(this.e,Math.sin(n)),e=this.x0+this.a*this.k0*i,this.y0+this.a*n*.5/this.k0),t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=x(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=((t,e)=>{var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*g:g;for(var n,s,r,a=Math.asin(.5*e),o=0;o<30;o++)if(n=Math.sin(a),s=Math.cos(a),r=t*n,a+=s=Math.pow(1-r*r,2)/(2*s)*(e/(1-t*t)-n/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-10)return a;return NaN})(this.e,2*t.y*this.k0/this.a),e=x(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]};var go={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,e=x(e-this.long0),i=to(i-this.lat0);return t.x=this.x0+this.a*e*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,i=t.y;return t.x=x(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=to(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var mo={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ja(this.es),this.e1=Ka(this.es),this.e2=Xa(this.es),this.e3=Qa(this.es),this.ml0=this.a*A(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i=t.x,n=t.y,s=(i=x(i-this.long0))*Math.sin(n);return n=this.sphere?Math.abs(n)<=v?(e=this.a*i,-1*this.a*this.lat0):(e=this.a*Math.sin(s)/Math.tan(n),this.a*(to(n-this.lat0)+(1-Math.cos(s))/Math.tan(n))):Math.abs(n)<=v?(e=this.a*i,-1*this.ml0):(e=(i=Ya(this.a,this.e,Math.sin(n))/Math.tan(n))*Math.sin(s),this.a*A(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+i*(1-Math.cos(s))),t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,i,n,s,r,a,o=t.x-this.x0,h=t.y-this.y0;if(this.sphere)if(Math.abs(h+this.a*this.lat0)<=v)e=x(o/this.a+this.long0),i=0;else{for(var l,d=this.lat0+h/this.a,u=o*o/this.a/this.a+d*d,c=d,p=20;p;--p)if(c+=n=-1*(d*(c*(l=Math.tan(c))+1)-c-.5*(c*c+u)*l)/((c-d)/l-1),Math.abs(n)<=v){i=c;break}e=x(this.long0+Math.asin(o*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=v)i=0,e=x(this.long0+o/this.a);else{for(d=(this.ml0+h)/this.a,u=o*o/this.a/this.a+d*d,c=d,p=20;p;--p)if(a=this.e*Math.sin(c),s=Math.sqrt(1-a*a)*Math.tan(c),a=this.a*A(this.e0,this.e1,this.e2,this.e3,c),r=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=n=(d*(s*(a=a/this.a)+1)-a-.5*s*(a*a+u))/(this.es*Math.sin(2*c)*(a*a+u-2*d*a)/(4*s)+(d-a)*(s*r-2/Math.sin(2*c))-r),Math.abs(n)<=v){i=c;break}s=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=x(this.long0+Math.asin(o*s/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]};var yo={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){for(var e=t.x,i=t.y-this.lat0,e=e-this.long0,n=i/tr*1e-5,i=e,s=1,r=0,a=1;a<=10;a++)r+=this.A[a]*(s*=n);var o,h=r,l=i,d=1,u=0,c=0,p=0;for(a=1;a<=6;a++)o=u*h+d*l,c=c+this.B_re[a]*(d=d*h-u*l)-this.B_im[a]*(u=o),p=p+this.B_im[a]*d+this.B_re[a]*u;return t.x=p*this.a+this.x0,t.y=c*this.a+this.y0,t},inverse:function(t){var e,i=t.x-this.x0,n=(t.y-this.y0)/this.a,s=i/this.a,r=1,a=0,o=0,h=0;for(_=1;_<=6;_++)e=a*n+r*s,o=o+this.C_re[_]*(r=r*n-a*s)-this.C_im[_]*(a=e),h=h+this.C_im[_]*r+this.C_re[_]*a;for(var l=0;l<this.iterations;l++){for(var d,u=o,c=h,p=n,f=s,_=2;_<=6;_++)d=c*o+u*h,u=u*o-c*h,c=d,p+=(_-1)*(this.B_re[_]*u-this.B_im[_]*c),f+=(_-1)*(this.B_im[_]*u+this.B_re[_]*c);var u=1,c=0,g=this.B_re[1],m=this.B_im[1];for(_=2;_<=6;_++)d=c*o+u*h,u=u*o-c*h,c=d,g+=_*(this.B_re[_]*u-this.B_im[_]*c),m+=_*(this.B_im[_]*u+this.B_re[_]*c);var y=g*g+m*m,o=(p*g+f*m)/y,h=(f*g-p*m)/y}var v=o,i=h,b=1,w=0;for(_=1;_<=9;_++)w+=this.D[_]*(b*=v);var x=this.lat0+w*tr*1e5,i=this.long0+i;return t.x=i,t.y=x,t},names:["New_Zealand_Map_Grid","nzmg"]};var vo={init:function(){},forward:function(t){var e=t.x,i=t.y,e=x(e-this.long0),e=this.x0+this.a*e,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=e,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=x(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]};var bo={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ja(this.es)},forward:function(t){var e=t.x,i=t.y,e=x(e-this.long0);if(this.sphere){if(this.m)for(var n=this.n*Math.sin(i),s=20;s;--s){var r=(this.m*i+Math.sin(i)-n)/(this.m+Math.cos(i));if(i-=r,Math.abs(r)<v)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;l=this.a*this.C_x*e*(this.m+Math.cos(i)),h=this.a*this.C_y*i}else var a=Math.sin(i),o=Math.cos(i),h=this.a*Ta(i,a,o,this.en),l=this.a*e*o/Math.sqrt(1-this.es*a*a);return t.x=l,t.y=h,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=co((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=co(Math.sin(e)/this.n)),i=x(i+this.long0),e=to(e)):(e=Oa(t.y/this.a,this.es,this.en),(n=Math.abs(e))<g?(n=Math.sin(e),i=x(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-v<g&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};var wo={init:function(){},forward:function(t){for(var e=t.x,i=t.y,e=x(e-this.long0),n=i,s=Math.PI*Math.sin(i);;){var r=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=r,Math.abs(r)<v)break}return n/=2,Math.PI/2-Math.abs(i)<v&&(e=0),i=.900316316158*this.a*e*Math.cos(n)+this.x0,e=1.4142135623731*this.a*Math.sin(n)+this.y0,t.x=i,t.y=e,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0,e=t.y/(1.4142135623731*this.a),.999999999999<Math.abs(e)&&(e=.999999999999),n=Math.asin(e);var e,i=x(this.long0+t.x/(.900316316158*this.a*Math.cos(n))),n=(i<-Math.PI&&(i=-Math.PI),Math.PI<i&&(i=Math.PI),e=(2*n+Math.sin(2*n))/Math.PI,1<Math.abs(e)&&(e=1),Math.asin(e));return t.x=i,t.y=n,t},names:["Mollweide","moll"]};var xo={init:function(){Math.abs(this.lat1+this.lat2)<v||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ja(this.es),this.e1=Ka(this.es),this.e2=Xa(this.es),this.e3=Qa(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ar(this.e,this.sinphi,this.cosphi),this.ml1=A(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<v?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ar(this.e,this.sinphi,this.cosphi),this.ml2=A(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=A(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e=t.x,i=t.y,e=(i=this.sphere?this.a*(this.g-i):(i=A(this.e0,this.e1,this.e2,this.e3,i),this.a*(this.g-i)),this.ns*x(e-this.long0)),n=this.x0+i*Math.sin(e),i=this.y0+this.rh-i*Math.cos(e);return t.x=n,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0,e=0<=this.ns?(i=Math.sqrt(t.x*t.x+t.y*t.y),1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),-1);var e,i,n,s,r=0;return 0!==i&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere?(s=x(this.long0+r/this.ns),n=to(this.g-i/this.a)):(n=eo(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),s=x(this.long0+r/this.ns)),t.x=s,t.y=n,t},names:["Equidistant_Conic","eqdc"]};var Mo={init:function(){this.R=this.a},forward:function(t){var e,i=t.x,n=t.y,i=x(i-this.long0),s=(Math.abs(n)<=v&&(e=this.x0+this.R*i,d=this.y0),co(2*Math.abs(n/Math.PI))),r=((Math.abs(i)<=v||Math.abs(Math.abs(n)-g)<=v)&&(e=this.x0,d=0<=n?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s)),.5*Math.abs(Math.PI/i-i/Math.PI)),a=r*r,o=Math.sin(s),s=Math.cos(s),h=(o=(s=s/(o+s-1))*(2/o-1))*o,l=Math.PI*this.R*(r*(s-h)+Math.sqrt(a*(s-h)*(s-h)-(h+a)*(s*s-h)))/(h+a),i=(e=this.x0+(l=i<0?-l:l),a+s),l=Math.PI*this.R*(o*i-r*Math.sqrt((h+a)*(1+a)-i*i))/(h+a),d=0<=n?this.y0+l:this.y0-l;return t.x=e,t.y=d,t},inverse:function(t){var e,i,n,s,r,a,o;return t.x-=this.x0,t.y-=this.y0,o=Math.PI*this.R,n=(e=t.x/o)*e+(i=t.y/o)*i,o=3*(i*i/(r=-2*(a=-Math.abs(i)*(1+n))+1+2*i*i+n*n)+(2*(s=a-2*i*i+e*e)*s*s/r/r/r-9*a*s/r/r)/27)/(a=(a-s*s/3/r)/r)/(a=2*Math.sqrt(-a/3)),1<Math.abs(o)&&(o=0<=o?1:-1),o=Math.acos(o)/3,a=0<=t.y?(-a*Math.cos(o+Math.PI/3)-s/3/r)*Math.PI:-(-a*Math.cos(o+Math.PI/3)-s/3/r)*Math.PI,o=Math.abs(e)<v?this.long0:x(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(e*e-i*i)+n*n))/2/e),t.x=o,t.y=a,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var ko={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,s,r,a,o,h=t.x,l=t.y,d=Math.sin(t.y),u=Math.cos(t.y),h=x(h-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=v?(t.x=this.x0+this.a*(g-l)*Math.sin(h),t.y=this.y0-this.a*(g-l)*Math.cos(h)):Math.abs(this.sin_p12+1)<=v?(t.x=this.x0+this.a*(g+l)*Math.sin(h),t.y=this.y0+this.a*(g+l)*Math.cos(h)):(s=this.sin_p12*d+this.cos_p12*u*Math.cos(h),a=(s=Math.acos(s))?s/Math.sin(s):1,t.x=this.x0+this.a*a*u*Math.sin(h),t.y=this.y0+this.a*a*(this.cos_p12*d-this.sin_p12*u*Math.cos(h))):(a=Ja(this.es),e=Ka(this.es),n=Xa(this.es),o=Qa(this.es),Math.abs(this.sin_p12-1)<=v?(r=this.a*A(a,e,n,o,g),i=this.a*A(a,e,n,o,l),t.x=this.x0+(r-i)*Math.sin(h),t.y=this.y0-(r-i)*Math.cos(h)):Math.abs(this.sin_p12+1)<=v?(r=this.a*A(a,e,n,o,g),i=this.a*A(a,e,n,o,l),t.x=this.x0+(r+i)*Math.sin(h),t.y=this.y0+(r+i)*Math.cos(h)):(a=d/u,e=Ya(this.a,this.e,this.sin_p12),n=Ya(this.a,this.e,d),o=Math.atan((1-this.es)*a+this.es*e*this.sin_p12/(n*u)),r=0===(l=Math.atan2(Math.sin(h),this.cos_p12*Math.tan(o)-this.sin_p12*Math.cos(h)))?Math.asin(this.cos_p12*Math.sin(o)-this.sin_p12*Math.cos(o)):Math.abs(Math.abs(l)-Math.PI)<=v?-Math.asin(this.cos_p12*Math.sin(o)-this.sin_p12*Math.cos(o)):Math.asin(Math.sin(h)*Math.cos(o)/Math.sin(l)),i=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),t.x=this.x0+(s=e*r*(1-(a=r*r)*(n=d*d)*(1-n)/6+(u=a*r)/8*(h=i*d)*(1-2*n)+(o=u*r)/120*(n*(4-7*n)-3*i*i*(1-7*n))-o*r/48*h))*Math.sin(l),t.y=this.y0+s*Math.cos(l))),t},inverse:function(t){var e,i,n,s,r,a,o,h;return t.x-=this.x0,t.y-=this.y0,this.sphere?(h=Math.sqrt(t.x*t.x+t.y*t.y))>2*g*this.a?void 0:(s=h/this.a,o=Math.sin(s),s=Math.cos(s),e=this.long0,Math.abs(h)<=v?i=this.lat0:(i=co(s*this.sin_p12+t.y*o*this.cos_p12/h),a=Math.abs(this.lat0)-g,e=Math.abs(a)<=v?0<=this.lat0?x(this.long0+Math.atan2(t.x,-t.y)):x(this.long0-Math.atan2(-t.x,t.y)):x(this.long0+Math.atan2(t.x*o,h*this.cos_p12*s-t.y*this.sin_p12*o))),t.x=e,t.y=i,t):(a=Ja(this.es),s=Ka(this.es),o=Xa(this.es),r=Qa(this.es),Math.abs(this.sin_p12-1)<=v?(i=eo(((n=this.a*A(a,s,o,r,g))-(h=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,a,s,o,r),e=x(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=v?(n=this.a*A(a,s,o,r,g),i=eo(((h=Math.sqrt(t.x*t.x+t.y*t.y))-n)/this.a,a,s,o,r),e=x(this.long0+Math.atan2(t.x,t.y))):(h=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.x,t.y),a=Ya(this.a,this.e,this.sin_p12),s=Math.cos(n),r=-(o=this.e*this.cos_p12*s)*o/(1-this.es),o=3*this.es*(1-r)*this.sin_p12*this.cos_p12*s/(1-this.es),o=1-r*(a=(h=h/a)-r*(1+r)*Math.pow(h,3)/6-o*(1+3*r)*Math.pow(h,4)/24)*a/2-h*a*a*a/6,r=Math.asin(this.sin_p12*Math.cos(a)+this.cos_p12*Math.sin(a)*s),e=x(this.long0+Math.asin(Math.sin(n)*Math.sin(a)/Math.cos(r))),h=Math.sin(r),i=Math.atan2((h-this.es*o*this.sin_p12)*Math.tan(r),h*(1-this.es))),t.x=e,t.y=i,t)},names:["Azimuthal_Equidistant","aeqd"]};var So={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n=t.x,s=t.y,n=x(n-this.long0),r=Math.sin(s),s=Math.cos(s),a=Math.cos(n),o=this.sin_p14*r+this.cos_p14*s*a;return(0<o||Math.abs(o)<=v)&&(e=+this.a*s*Math.sin(n),i=this.y0+ +this.a*(this.cos_p14*r-this.sin_p14*s*a)),t.x=e,t.y=i,t},inverse:function(t){var e,i,n,s,r,a;return t.x-=this.x0,t.y-=this.y0,n=co((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),n=Math.cos(n),r=this.long0,Math.abs(e)<=v?(a=this.lat0,t.x=r,t.y=a):(a=co(n*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-g,r=Math.abs(s)<=v?0<=this.lat0?x(this.long0+Math.atan2(t.x,-t.y)):x(this.long0-Math.atan2(-t.x,t.y)):x(this.long0+Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i)),t.x=r,t.y=a),t},names:["ortho"]},Lo=1,Eo=2,Ao=3,Co=4,jo=5,To=6,c={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function No(t,e,i,n){var s;return t<v?(n.value=c.AREA_0,s=0):(s=Math.atan2(e,i),Math.abs(s)<=w?n.value=c.AREA_0:w<s&&s<=g+w?(n.value=c.AREA_1,s-=g):g+w<s||s<=-(g+w)?(n.value=c.AREA_2,s=0<=s?s-d:s+d):(n.value=c.AREA_3,s+=g)),s}function Oo(t,e){t+=e;return t<-d?t+=rr:+d<t&&(t-=rr),t}function Io(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))}var Po={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=g-w/2?this.face=jo:this.lat0<=-(g-w/2)?this.face=To:Math.abs(this.long0)<=w?this.face=Lo:Math.abs(this.long0)<=g+w?this.face=0<this.long0?Eo:Co:this.face=Ao,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,s,r,a,o={x:0,y:0},h={value:0};return t.x-=this.long0,r=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===jo?(i=g-r,e=w<=n&&n<=g+w?(h.value=c.AREA_0,n-g):g+w<n||n<=-(g+w)?(h.value=c.AREA_1,0<n?n-d:n+d):-(g+w)<n&&n<=-w?(h.value=c.AREA_2,n+g):(h.value=c.AREA_3,n)):this.face===To?(i=g+r,e=w<=n&&n<=g+w?(h.value=c.AREA_0,-n+g):n<w&&-w<=n?(h.value=c.AREA_1,-n):n<-w&&-(g+w)<=n?(h.value=c.AREA_2,-n-g):(h.value=c.AREA_3,0<n?-n+d:-n-d)):(this.face===Eo?n=Oo(n,+g):this.face===Ao?n=Oo(n,+d):this.face===Co&&(n=Oo(n,-g)),s=Math.sin(r),r=Math.cos(r),a=Math.sin(n),n=r*Math.cos(n),r=r*a,a=s,this.face===Lo?e=No(i=Math.acos(n),a,r,h):this.face===Eo?e=No(i=Math.acos(r),a,-n,h):this.face===Ao?e=No(i=Math.acos(-n),a,-r,h):this.face===Co?e=No(i=Math.acos(-r),a,n,h):(i=e=0,h.value=c.AREA_0)),s=Math.atan(12/d*(e+Math.acos(Math.sin(e)*Math.cos(w))-g)),r=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(e))))),h.value===c.AREA_1?s+=g:h.value===c.AREA_2?s+=d:h.value===c.AREA_3&&(s+=1.5*d),o.x=r*Math.cos(s),o.y=r*Math.sin(s),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,t.x=o.x,t.y=o.y,t},inverse:function(t){var e,i,n,s,r,a={lam:0,phi:0},o={value:0};return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),0<=t.x&&t.x>=Math.abs(t.y)?o.value=c.AREA_0:0<=t.y&&t.y>=Math.abs(t.x)?(o.value=c.AREA_1,e-=g):t.x<0&&-t.x>=Math.abs(t.y)?(o.value=c.AREA_2,e=e<0?e+d:e-d):(o.value=c.AREA_3,e+=g),r=d/12*Math.tan(e),s=Math.sin(r)/(Math.cos(r)-1/Math.sqrt(2)),s=Math.atan(s),(n=1-(e=Math.cos(e))*e*(e=Math.tan(n))*e*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?n=-1:1<n&&(n=1),this.face===jo?(i=Math.acos(n),a.phi=g-i,o.value===c.AREA_0?a.lam=s+g:o.value===c.AREA_1?a.lam=s<0?s+d:s-d:o.value===c.AREA_2?a.lam=s-g:a.lam=s):this.face===To?(i=Math.acos(n),a.phi=i-g,o.value===c.AREA_0?a.lam=-s+g:o.value===c.AREA_1?a.lam=-s:o.value===c.AREA_2?a.lam=-s-g:a.lam=s<0?-s-d:-s+d):(i=1<=(r=(e=n)*e)?0:Math.sqrt(1-r)*Math.sin(s),n=1<=(r+=i*i)?0:Math.sqrt(1-r),o.value===c.AREA_1?(r=n,n=-i,i=r):o.value===c.AREA_2?(n=-n,i=-i):o.value===c.AREA_3&&(r=n,n=i,i=-r),this.face===Eo?(r=e,e=-n,n=r):this.face===Ao?(e=-e,n=-n):this.face===Co&&(r=e,e=n,n=-r),a.phi=Math.acos(-i)-g,a.lam=Math.atan2(n,e),this.face===Eo?a.lam=Oo(a.lam,-g):this.face===Ao?a.lam=Oo(a.lam,-d):this.face===Co&&(a.lam=Oo(a.lam,+g))),0!==this.es&&(s=a.phi<0?1:0,o=Math.tan(a.phi),r=this.b/Math.sqrt(o*o+this.one_minus_f_squared),a.phi=Math.atan(Math.sqrt(this.a*this.a-r*r)/(this.one_minus_f*r)),s)&&(a.phi=-a.phi),a.lam+=this.long0,t.x=a.lam,t.y=a.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},zo=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Go=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Bo=sr/5,Ro=1/Bo;var Do={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=x(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*Bo),e=(n<0?n=0:18<=n&&(n=17),{x:Io(zo[n],i=sr*(i-Ro*n))*e,y:Io(Go[n],i)});return t.y<0&&(e.y=-e.y),e.x=e.x*this.a*.8487+this.x0,e.y=e.y*this.a*1.3523+this.y0,e},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(1<=e.y)e.x/=zo[18][0],e.y=t.y<0?-g:g;else{var i=Math.floor(18*e.y);for(i<0?i=0:18<=i&&(i=17);;)if(Go[i][0]>e.y)--i;else{if(!(Go[i+1][0]<=e.y))break;++i}var n=Go[i],s=((t,e,i,n)=>{for(var s=e;n;--n){var r=t(s);if(s-=r,Math.abs(r)<i)break}return s})(function(t){return(Io(n,t)-e.y)/(n[1]+t*(2*n[2]+3*t*n[3]))},5*(e.y-n[0])/(Go[i+1][0]-n[0]),v,100);e.x/=Io(zo[i],s),e.y=(5*i+s)*b,t.y<0&&(e.y=-e.y)}return e.x=x(e.x+this.long0),e},names:["Robinson","robin"]};var Fo={init:function(){this.name="geocent"},forward:function(t){return Wr(t,this.es,this.a)},inverse:function(t){return $r(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Uo=0,qo=1,Vo=2,Wo=3,$o={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var Zo={init:function(){if(Object.keys($o).forEach(function(t){if(void 0===this[t])this[t]=$o[t].def;else{if($o[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);$o[t].num&&(this[t]=parseFloat(this[t]))}$o[t].degrees&&(this[t]=this[t]*b)}.bind(this)),Math.abs(Math.abs(this.lat0)-g)<v?this.mode=this.lat0<0?qo:Uo:Math.abs(this.lat0)<v?this.mode=Vo:(this.mode=Wo,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||1e10<this.pn1)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,s,r=Math.sin(t.y),a=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case Wo:i=this.sinph0*r+this.cosph0*a*o;break;case Vo:i=a*o;break;case qo:i=-r;break;case Uo:i=r}switch(e=(i=this.pn1/(this.p-i))*a*Math.sin(t.x),this.mode){case Wo:i*=this.cosph0*r-this.sinph0*a*o;break;case Vo:i*=r;break;case Uo:i*=-a*o;break;case qo:i*=a*o}return s=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*s,i=n*s,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,i=this.pn1*t.y*this.cw*i,s=(t.x=n*this.cg+i*this.sg,t.y=i*this.cg-n*this.sg,u(t.x,t.y));if(Math.abs(s)<v)e.x=0,e.y=t.y;else{var r,a=1-s*s*this.pfact;switch(a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-a*a),this.mode){case Wo:e.y=Math.asin(r*this.sinph0+t.y*a*this.cosph0/s),t.y=(r-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case Vo:e.y=Math.asin(t.y*a/s),t.y=r*s,t.x*=a;break;case Uo:e.y=Math.asin(r),t.y=-t.y;break;case qo:e.y=-Math.asin(r)}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t},names:["Tilted_Perspective","tpers"]};var Ho={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||1e10<this.radius_g_1)throw new Error;var t,e;this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es?(e=1/(t=1-this.es),this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"):(this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere"),this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i=t.x,n=t.y;if(i-=this.long0,"ellipse"===this.shape){var n=Math.atan(this.radius_p2*Math.tan(n)),s=this.radius_p/u(this.radius_p*Math.cos(n),Math.sin(n)),r=s*Math.cos(i)*Math.cos(n),a=s*Math.sin(i)*Math.cos(n),s=s*Math.sin(n);if((this.radius_g-r)*r-a*a-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/u(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(a/e),t.y=this.radius_g_1*Math.atan(s/u(a,e)))}else"sphere"===this.shape&&(e=Math.cos(n),r=Math.cos(i)*e,a=Math.sin(i)*e,s=Math.sin(n),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/u(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(a/e),t.y=this.radius_g_1*Math.atan(s/u(a,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i=-1,n=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*u(1,s)):(n=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*u(1,n));var r,a,o=s/this.radius_p,o=n*n+o*o+i*i;if((a=(r=2*this.radius_g*i)*r-4*o*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=(-r-Math.sqrt(a))/(2*o),i=this.radius_g+e*i,n*=e,s*=e,t.x=Math.atan2(n,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(n=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),(a=(r=2*this.radius_g*i)*r-4*(o=n*n+s*s+i*i)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=(-r-Math.sqrt(a))/(2*o),i=this.radius_g+e*i,n*=e,s*=e,t.x=Math.atan2(n,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},Jo=1.340264,Ko=-.081106,Xo=893e-6,Qo=.003796,Yo=Math.sqrt(3)/2;var th={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=x(t.x-this.long0),i=Math.asin(Yo*Math.sin(t.y)),n=i*i,s=n*n*n;return t.x=e*Math.cos(i)/(Yo*(Jo+3*Ko*n+s*(7*Xo+9*Qo*n))),t.y=i*(Jo+Ko*n+s*(Xo+Qo*n)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;for(var e,i,n,s=t.y,r=0;r<12&&(s-=n=(s*(Jo+Ko*(e=s*s)+(i=e*e*e)*(Xo+Qo*e))-t.y)/(Jo+3*Ko*e+i*(7*Xo+9*Qo*e)),!(Math.abs(n)<1e-9));++r);return t.x=Yo*t.x*(Jo+3*Ko*(e=s*s)+(i=e*e*e)*(7*Xo+9*Qo*e))/Math.cos(s),t.y=Math.asin(Math.sin(s)/Yo),t.x=x(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},eh=1e-10;function ih(t){var e=x(t.x-(this.long0||0)),i=t.y,n=this.am1+this.m1-Ta(i,s=Math.sin(i),i=Math.cos(i),this.en),s=i*e/(n*Math.sqrt(1-this.es*s*s));return t.x=n*Math.sin(s),t.y=this.am1-n*Math.cos(s),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function nh(t){var e,i,n,s;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,i=u(t.x,t.y=this.am1-t.y),s=Oa(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(s))<g)e=Math.sin(s),n=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else{if(!(Math.abs(e-g)<=eh))throw new Error;n=0}return t.x=x(n+(this.long0||0)),t.y=to(s),t}function sh(t){var e=x(t.x-(this.long0||0)),i=t.y,n=this.cphi1+this.phi1-i;return Math.abs(n)>eh?(t.x=n*Math.sin(e=e*Math.cos(i)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function rh(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e=u(t.x,t.y=this.cphi1-t.y),i=this.cphi1+this.phi1-e;if(Math.abs(i)>g)throw new Error;return e=Math.abs(Math.abs(i)-g)<=eh?0:e*Math.atan2(t.x,t.y)/Math.cos(i),t.x=x(e+(this.long0||0)),t.y=to(i),t}var ah={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<eh)throw new Error;this.es?(this.en=ja(this.es),this.m1=Ta(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=nh,this.forward=ih):(Math.abs(this.phi1)+eh>=g?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=rh,this.forward=sh)},names:["bonne","Bonne (Werner lat_1=90)"]};h.defaultDatum="WGS84",h.Proj=Vr,h.WGS84=new h.Proj("WGS84"),h.Point=ma,h.toPoint=Qr,h.defs=a,h.nadgrid=function(t,e){var i=(t=>11!==t.getInt32(8,!1)&&(11!==t.getInt32(8,!0)&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0))(e=new DataView(e)),n=(s=i,{nFields:(n=e).getInt32(8,s),nSubgridFields:n.getInt32(24,s),nSubgrids:n.getInt32(40,s),shiftType:qr(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,s),fromSemiMinorAxis:n.getFloat64(136,s),toSemiMajorAxis:n.getFloat64(152,s),toSemiMinorAxis:n.getFloat64(168,s)}),s={header:n,subgrids:((t,e,i)=>{for(var n=176,s=[],r=0;r<e.nSubgrids;r++){var a=((t,e,i)=>({name:qr(t,e+8,e+16).trim(),parent:qr(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}))(t,n,i),o=((t,e,i,n)=>{for(var s=e+176,r=[],a=0;a<i.gridNodeCount;a++){var o={latitudeShift:t.getFloat32(s+16*a,n),longitudeShift:t.getFloat32(s+16*a+4,n),latitudeAccuracy:t.getFloat32(s+16*a+8,n),longitudeAccuracy:t.getFloat32(s+16*a+12,n)};r.push(o)}return r})(t,n,a,i),h=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[Ur(a.lowerLongitude),Ur(a.lowerLatitude)],del:[Ur(a.longitudeInterval),Ur(a.latitudeInterval)],lim:[h,l],count:a.gridNodeCount,cvs:(t=>t.map(function(t){return[Ur(t.longitudeShift),Ur(t.latitudeShift)]}))(o)}),n+=176+16*a.gridNodeCount}return s})(e,n,i)};return Dr[t]=s},h.transform=ta,h.mgrs=e,h.version="__VERSION__",(e=h).Proj.projections.add(Ia),e.Proj.projections.add(Ra),e.Proj.projections.add(Gr),e.Proj.projections.add(Ua),e.Proj.projections.add(qa),e.Proj.projections.add(Va),e.Proj.projections.add($a),e.Proj.projections.add(Za),e.Proj.projections.add(Ha),e.Proj.projections.add(io),e.Proj.projections.add(uo),e.Proj.projections.add(po),e.Proj.projections.add(fo),e.Proj.projections.add(_o),e.Proj.projections.add(go),e.Proj.projections.add(mo),e.Proj.projections.add(yo),e.Proj.projections.add(vo),e.Proj.projections.add(bo),e.Proj.projections.add(wo),e.Proj.projections.add(xo),e.Proj.projections.add(Mo),e.Proj.projections.add(ko),e.Proj.projections.add(So),e.Proj.projections.add(Po),e.Proj.projections.add(Do),e.Proj.projections.add(Fo),e.Proj.projections.add(Zo),e.Proj.projections.add(Ho),e.Proj.projections.add(th),e.Proj.projections.add(ah);var oh,hh=(()=>{function n(t){switch(X(this,n),this._params=Object.assign({map_proj:null,ref_lat:null,ref_lon:null,truelat1:null,truelat2:null,stand_lon:null,dx:null,dy:null,e_we:null,e_sn:null},t),this._params.map_proj){case Ds:this._proj4="+units=m +proj=lcc +lat_1="+this._params.truelat1+" +lat_2="+this._params.truelat2+" +lat_0="+this._params.ref_lat+" +lon_0="+this._params.stand_lon+" +a="+l+" +b="+l+" +towgs84=0,0,0 +no_defs=True";break;case Fs:this._proj4="+units=m +proj=merc +lat_ts="+this._params.truelat1+" +lon_0="+this._getValue(this._params.stand_lon,0)+" +a="+l+" +b="+l+" +towgs84=0,0,0 +no_defs=True +nadgrids=null";break;case Us:var e=this._params.truelat1<0?-90:90,i=this._params.truelat1;this._proj4="+units=m +proj=stere +lat_0="+e+" +lon_0="+this._params.stand_lon+" +lat_ts="+i+" +a="+l+" +b="+l;break;case Y:this._proj4="+units=m +proj=eqc +lon_0="+this._params.stand_lon+" +a="+l+" +b="+l+" +nadgrids=null +towgs84=0,0,0 +no_defs=True";break;default:throw"Unsupported projection "+this._wps.map_proj}}return r(n,[{key:"_getValue",value:function(t,e){return isNaN(t)||null==t?e:t}},{key:"latlon_to_ij",value:function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid lat-lon coordinates");return h(n._wrf_proj,this._proj4,[e,t])}},{key:"ij_to_latlon",value:function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid IJ coordinates");t=h(this._proj4,n._wrf_proj,[t,e]);return[t[1],t[0]]}}])})(),lh=(t(hh,"_wrf_proj","+units=m +proj=longlat +a="+l+" +b="+l+"  +towgs84=0,0,0 +no_defs=True"),(()=>r(function t(e,i,n){if(X(this,t),this._wps=Object.assign({map_proj:null,ref_lat:null,ref_lon:null,truelat1:null,truelat2:null,stand_lon:null,pole_lat:null,pole_lon:null,ref_x:null,ref_y:null,dx:null,dy:null,s_we:1,s_sn:1,e_we:null,e_sn:null,parent_grid_ratio:null,i_parent_start:null,j_parent_start:null},i),n){if(this.parent=n,null===this._wps.parent_grid_ratio)throw new Error("parent_grid_ratio must be specified for nested grids");if(null===this._wps.i_parent_start)throw new Error("i_parent_start must be specified for nested grids");if(null===this._wps.j_parent_start)throw new Error("j_parent_start must be specified for nested grids")}else this.parent=null;this.id="Number"==typeof e?"d".concat(e.toString().padStart("0",2)):e.toString(),this._initialize()},[{key:"wps",get:function(){return this._wps}},{key:"projection",get:function(){return this._projection}},{key:"corners",get:function(){return this._corners}},{key:"parent_grid_ratio",get:function(){return this._wps.parent_grid_ratio}},{key:"i_parent_start",get:function(){return this._wps.i_parent_start}},{key:"j_parent_start",get:function(){return this._wps.j_parent_start}},{key:"e_we",get:function(){return this._wps.e_we}},{key:"e_sn",get:function(){return this._wps.e_sn}},{key:"polygonPath",get:function(){return this._polygonPath||(this._polygonPath=this._initPolygonPath()),this._polygonPath}},{key:"_initialize",value:function(){this._proj_ref_lat=this._wps.ref_lat,this._proj_ref_lon=this._wps.ref_lon,this._proj_truelat1=this._wps.truelat1,this._proj_truelat2=this._wps.truelat2,this._proj_stand_lon=this._wps.stand_lon,this._proj_dx=this._wps.dx,this._proj_dy=this._wps.dy,this._proj_e_we=this._wps.e_we,this._proj_e_sn=this._wps.e_sn;var t=0,e=0,i=null!==this.parent;if(console.debug("Initializing grid ".concat(this.id)),console.debug(" WPS:"),console.debug("  ref_lat: ".concat(this._wps.ref_lat)),console.debug("  ref_lon: ".concat(this._wps.ref_lon)),console.debug("  truelat1: ".concat(this._wps.truelat1)),console.debug("  truelat2: ".concat(this._wps.truelat2)),console.debug("  stand_lon: ".concat(this._wps.stand_lon)),console.debug("  pole_lat: ".concat(this._wps.pole_lat)),console.debug("  pole_lon: ".concat(this._wps.pole_lon)),this._wps.map_proj===Y?(console.debug("  dx: ".concat(this._wps.dx," deg")),console.debug("  dy: ".concat(this._wps.dy," deg"))):(console.debug("  dx: ".concat(this._proj_dx,"m")),console.debug("  dy: ".concat(this._proj_dy,"m"))),console.debug("  e_sn: ".concat(this._wps.e_sn)),console.debug("  e_we: ".concat(this._wps.e_we)),this._wps.map_proj===Y){if(isNaN(this._wps.dx)&&isNaN(this._wps.dy)){var n=360/(this._wps.e_we-this._wps.s_we),s=180/(this._wps.e_sn-this._wps.s_sn);this._proj_ref_lon=this._wps.stand_lon+n/2,this._proj_ref_lat=s/2-90,this._proj_dx=l*Math.PI*2/(this._wps.e_we-this._wps.s_we),this._proj_dy=l*Math.PI/(this._wps.e_sn-this._wps.s_sn)}else if(this._proj_dx=Vs(this._wps.dx),this._proj_dy=Vs(this._wps.dy),null===this._wps.ref_lat&&null===this._wps.ref_lon)throw new Error("For lat-lon projection, if dx/dy are specified, a regional domain is assumed, and a ref_lat,ref_lon must also be specified");console.debug("  dx: ".concat(this._proj_dx,"m")),console.debug("  dy: ".concat(this._proj_dy,"m"))}if(i){console.debug(" Nest:"),console.debug("  parent_grid_ratio: ".concat(this.parent_grid_ratio)),console.debug("  i_parent_start: ".concat(this.i_parent_start)),console.debug("  j_parent_start: ".concat(this.j_parent_start));for(var r=1,a=this;null!=a.parent;)r*=a.parent_grid_ratio,t+=(a.i_parent_start-1)*r,e+=(a.j_parent_start-1)*r,a=a.parent;console.debug("  moad_grid_ratio: ".concat(r)),console.debug("  i_moad_start: ".concat(t)),console.debug("  j_moad_start: ".concat(e)),this._proj_dx=this._proj_dx/r,this._proj_dy=this._proj_dy/r,this._proj_e_we=(a.e_we-1)*r+1,this._proj_e_sn=(a.e_sn-1)*r+1,console.debug("  dx: ".concat(this._proj_dx,"m")),console.debug("  dy: ".concat(this._proj_dy,"m")),console.debug("  e_sn: ".concat(this._proj_e_sn)),console.debug("  e_we: ".concat(this._proj_e_we))}this._projection=new hh({map_proj:this._wps.map_proj,ref_lat:this._proj_ref_lat,ref_lon:this._proj_ref_lon,truelat1:this._proj_truelat1,truelat2:this._proj_truelat2,stand_lon:this._proj_stand_lon,dx:this._proj_dx,dy:this._proj_dy,e_we:this._proj_e_we,e_sn:this._proj_e_sn});var n=(this._proj_e_we-2)*this._proj_dx,s=(this._proj_e_sn-2)*this._proj_dy,i=(this._proj_e_we-1)*this._proj_dx,o=(this._proj_e_sn-1)*this._proj_dy,h=(console.debug("  unstaggered_grid_size_i: ".concat(i,"m")),console.debug("  unstaggered_grid_size_j: ".concat(o,"m")),this._projection.latlon_to_ij(this._proj_ref_lat,this._proj_ref_lon));console.debug("  grid_center_ij: [".concat(h[0],", ").concat(h[1],"]")),this._mass_offset_i=h[0]-.5*n,this._mass_offset_j=h[1]-.5*s,this._unstaggered_offset_i=h[0]-.5*i+t*this._proj_dx,this._unstaggered_offset_j=h[1]-.5*o+e*this._proj_dy,console.debug("  unstaggered_offset_i: ".concat(this._unstaggered_offset_i,"m")),console.debug("  unstaggered_offset_j: ".concat(this._unstaggered_offset_j,"m")),this._corners={sw:this.unstaggered_ij_to_latlon(0,0),se:this.unstaggered_ij_to_latlon(this._wps.e_we-1,0),ne:this.unstaggered_ij_to_latlon(this._wps.e_we-1,this._wps.e_sn-1),nw:this.unstaggered_ij_to_latlon(0,this._wps.e_sn-1)}}},{key:"_initPolygonPath",value:function(){var t,e,i=[];for(i.push(this._corners.sw),t=5;t<this._wps.e_we-1-5;t+=5)i.push(this.unstaggered_ij_to_latlon(t,0));for(i.push(this._corners.se),e=5;e<this._wps.e_sn-1-5;e+=5)i.push(this.unstaggered_ij_to_latlon(this._wps.e_we-1,e));for(i.push(this._corners.ne),t=this._wps.e_we-1-5;5<t;t-=5)i.push(this.unstaggered_ij_to_latlon(t,this._wps.e_sn-1));for(i.push(this._corners.nw),e=this._wps.e_sn-1-5;5<e;e-=5)i.push(this.unstaggered_ij_to_latlon(0,e));return i.push(this._corners.sw),i}},{key:"latlon_to_unstaggered_ij",value:function(t,e){t=this._projection.latlon_to_ij(t,e);return t[0]=(t[0]-this._unstaggered_offset_i)/this._proj_dx,t[1]=(t[1]-this._unstaggered_offset_j)/this._proj_dy,t}},{key:"unstaggered_ij_to_latlon",value:function(t,e){return this._projection.ij_to_latlon(t*this._proj_dx+this._unstaggered_offset_i,e*this._proj_dy+this._unstaggered_offset_j)}}]))()),tt=L.Polygon.extend({statics:{minNestGridPoints:5,minGridSize:10,defaultGridRatio:3,minPixelsPerGrid:7,IAxisOpt:Object.freeze({NONE:0,I_PARENT_START:1,E_WE:2}),JAxisOpt:Object.freeze({NONE:0,J_PARENT_START:1,E_SN:2})},options:{showTooltip:!1,showGridLines:!1,editable:!0,showResizeMarkers:!0,opacity:.8,weight:2,color:"#FF0000",fillColor:"#FF0000",fillOpacity:.2,className:"wrf-domain-grid"},domain:null,parent:null,id:null,parent_grid_ratio:1,i_parent_start:1,j_parent_start:1,e_we:0,e_sn:0,geog_data_res:"default",_gridLinesLayer:null,_iGridLines:null,_jGridLines:null,_enableGridLines:!0,_createGridLinesPane:function(){return this._map?(this._map.getPane("gridLinesPane")||this._map.createPane("gridLinesPane"),L.layerGroup(null,{pane:"gridLinesPane"})):null},_cornerMarkers:null,_resizeMarkers:null,_corners:null,_isSelected:!1,nests:null,geogrid:null,_initGeogrid:function(){var t;return new lh(this.id,{map_proj:this.domain.map_proj,ref_lat:this.domain.ref_lat,ref_lon:this.domain.ref_lon,truelat1:this.domain.truelat1,truelat2:this.domain.truelat2,stand_lon:this.domain.stand_lon,dx:this.domain.dx,dy:this.domain.dy,e_we:this.e_we,e_sn:this.e_sn,parent_grid_ratio:this.parent_grid_ratio,i_parent_start:this.i_parent_start,j_parent_start:this.j_parent_start},null==(t=this.parent)?void 0:t.geogrid)},_initCorners:function(){return{sw:L.latLng(this.geogrid.corners.sw),se:L.latLng(this.geogrid.corners.se),ne:L.latLng(this.geogrid.corners.ne),nw:L.latLng(this.geogrid.corners.nw)}},_getResizeMarkerLocations:function(){return{n:L.latLng(this.geogrid.unstaggered_ij_to_latlon((this.geogrid.e_we-1)/2,this.geogrid.e_sn-1)),s:L.latLng(this.geogrid.unstaggered_ij_to_latlon((this.geogrid.e_we-1)/2,0)),e:L.latLng(this.geogrid.unstaggered_ij_to_latlon(this.geogrid.e_we-1,(this.geogrid.e_sn-1)/2)),w:L.latLng(this.geogrid.unstaggered_ij_to_latlon(0,(this.geogrid.e_sn-1)/2))}},_onMapViewChanged:function(){this._isSelected&&this._updateGridLines()},_getTooltipContent:function(t){var e="<table><thead><tr><th>"+this.name+"</th><th></th></tr></thead>",i=(e+="<tbody>",this.geogrid.latlon_to_unstaggered_ij(t.lat,t.lng));return(e+="<tr><td>i,j</td><td>"+Math.ceil(i[0])+", "+Math.ceil(i[1])+"</td></tr>")+("<tr><td>lat,lon</td><td>"+t.lat.toFixed(2)+", "+t.lng.toFixed(2)+"</td></tr>")+"</tbody>"+"</table>"},_updateTooltip:function(t){var e=this.getTooltip();e&&(e=e.getElement())&&(e.innerHTML=this._getTooltipContent(t.latlng))},_onPolygonClick:function(t){t.originalEvent.ctrlKey?this.unselect():this.select()},_bindTooltip:function(t){!0===this.options.showTooltip&&(this.on("mousemove",this._updateTooltip,this),L.Polygon.prototype.bindTooltip.call(this,t&&t.latlng?this._getTooltipContent(t.latlng):"",{sticky:!0,className:"wrf-domain-grid-tooltip"}))},bindTooltip:function(t){this._bindTooltip(t);for(var e=0;e<this.nests.length;e++)this.nests[e].bindTooltip(t)},_unbindTooltip:function(){L.Polygon.prototype.unbindTooltip.call(this),this.off("mousemove",this._updateTooltip,this)},unbindTooltip:function(){this.getTooltip()&&this._unbindTooltip();for(var t=0;t<this.nests.length;t++)this.nests[t].unbindTooltip()},_resizeContext:null,_resizeEnd:function(t){this.domain.grid.bindTooltip(),this._map.dragging.enable(),this._map.off("mousemove",this._resize,this),this._map.off("mouseup",this._resizeEnd,this),this._map.off("mouseout",this._resizeEnd,this),this._resizeContext.resizeStarted&&(this.showGridLines(),this.parent)&&this.parent.hideGridLines(),this._resizeContext=null},_resizeStart:function(t,e,i){var n,s,r,a,o;for(this._map.once("mouseup",this._resizeEnd,this),this._map.once("mouseout",this._resizeEnd,this),this._map.dragging.disable(),this.domain.grid.unbindTooltip(),o=0;o<this.nests.length;o++)a=0==o?(n=this.nests[o].i_parent_start,s=this.nests[o].j_parent_start,r=this.nests[o].i_delta_end,this.nests[o].j_delta_end):(n=Math.min(n,this.nests[o].i_parent_start),s=Math.min(s,this.nests[o].j_parent_start),r=Math.min(r,this.nests[o].i_delta_end),Math.min(a,this.nests[o].j_delta_end));this._resizeContext={resizeStarted:!1,stand_lon_delta:this.domain.stand_lon-this.domain.ref_lon,truelat1_delta:this.domain.truelat1-this.domain.ref_lat,truelat2_delta:this.domain.truelat2-this.domain.ref_lat,min_e_we:r?this.e_we-r+tt.minNestGridPoints:tt.minGridSize,mine_sn:a?this.e_sn-a+tt.minNestGridPoints:tt.minGridSize,max_e_we:this.parent?(this.i_delta_end-tt.minNestGridPoints)*this.parent_grid_ratio+this.e_we:0,maxe_sn:this.parent?(this.j_delta_end-tt.minNestGridPoints)*this.parent_grid_ratio+this.e_sn:0,min_i_parent_start:this.parent?tt.minNestGridPoints-this.i_parent_start+1:0,min_j_parent_start:this.parent?tt.minNestGridPoints-this.j_parent_start+1:0,max_i_parent_start:n?Math.floor((n-tt.minNestGridPoints-1)/this.parent_grid_ratio):this.parent?Math.floor((this.e_we-tt.minGridSize)/this.parent_grid_ratio):this.e_we-tt.minGridSize,max_j_parent_start:s?Math.floor((s-tt.minNestGridPoints-1)/this.parent_grid_ratio):this.parent?Math.floor((this.e_sn-tt.minGridSize)/this.parent_grid_ratio):this.e_sn-tt.minGridSize,mod_delta_i:0,mod_delta_j:0,iAxisOpt:e,jAxisOpt:i,startLatlng:t.latlng}},_resize:function(t){if(this._resizeContext.resizeStarted){var t=this.geogrid.latlon_to_unstaggered_ij(t.latlng.lat,t.latlng.lng),e=qs(t[0]),i=qs(t[1]);if(this._resizeContext.iAxisOpt==tt.IAxisOpt.E_WE&&(e-=this.e_we-1),this._resizeContext.jAxisOpt==tt.JAxisOpt.E_SN&&(i-=this.e_sn-1),this.parent){if(this._resizeContext.iAxisOpt==tt.IAxisOpt.I_PARENT_START){e+=this._resizeContext.mod_delta_i,this._resizeContext.mod_delta_i=e%this.parent_grid_ratio;var n=(e-this._resizeContext.mod_delta_i)/this.parent_grid_ratio;n>this._resizeContext.max_i_parent_start?(n=this._resizeContext.max_i_parent_start,this._resizeContext.max_i_parent_start=0):this._resizeContext.max_i_parent_start-=n,n<this._resizeContext.min_i_parent_start?(this._resizeContext.max_i_parent_start+=n-this._resizeContext.min_i_parent_start,n=this._resizeContext.min_i_parent_start,this._resizeContext.min_i_parent_start=0):this._resizeContext.min_i_parent_start-=n,this.e_we-=n*this.parent_grid_ratio,this.i_parent_start+=n;for(var s=0;s<this.nests.length;s++)this.nests[s].i_parent_start-=n*this.parent_grid_ratio}else this._resizeContext.iAxisOpt==tt.IAxisOpt.E_WE&&(t=Math.max(this.e_we+e,this._resizeContext.min_e_we),t=Math.min(t,this._resizeContext.max_e_we),this.e_we=t-(t-1)%this.parent_grid_ratio);if(this._resizeContext.jAxisOpt==tt.JAxisOpt.J_PARENT_START){i+=this._resizeContext.mod_delta_j,this._resizeContext.mod_delta_j=i%this.parent_grid_ratio;var r=(i-this._resizeContext.mod_delta_j)/this.parent_grid_ratio;r>this._resizeContext.max_j_parent_start?(r=this._resizeContext.max_j_parent_start,this._resizeContext.max_j_parent_start=0):this._resizeContext.max_j_parent_start-=r,r<this._resizeContext.min_j_parent_start?(this._resizeContext.max_j_parent_start+=r-this._resizeContext.min_j_parent_start,r=this._resizeContext.min_j_parent_start,this._resizeContext.min_j_parent_start=0):this._resizeContext.min_j_parent_start-=r,this.e_sn-=r*this.parent_grid_ratio,this.j_parent_start+=r;for(s=0;s<this.nests.length;s++)this.nests[s].j_parent_start-=r*this.parent_grid_ratio}else this._resizeContext.jAxisOpt==tt.JAxisOpt.E_SN&&(t=Math.max(this.e_sn+i,this._resizeContext.mine_sn),t=Math.min(t,this._resizeContext.maxe_sn),this.e_sn=t-(t-1)%this.parent_grid_ratio);this.update()}else{var t=(this.e_we-1)/2,a=(this.e_sn-1)/2,o=this.e_we,h=this.e_sn,t=(this._resizeContext.iAxisOpt==tt.IAxisOpt.I_PARENT_START?(e>this._resizeContext.max_i_parent_start?(e=this._resizeContext.max_i_parent_start,this._resizeContext.max_i_parent_start=0):this._resizeContext.max_i_parent_start-=e,t=(this.e_we-1+e)/2):this._resizeContext.iAxisOpt==tt.IAxisOpt.E_WE&&(t=((o=Math.max(this.e_we+e,this._resizeContext.min_e_we))-1)/2),this._resizeContext.jAxisOpt==tt.JAxisOpt.J_PARENT_START?(i>this._resizeContext.max_j_parent_start?(i=this._resizeContext.max_j_parent_start,this._resizeContext.max_j_parent_start=0):this._resizeContext.max_j_parent_start-=i,a=(this.e_sn-1+i)/2):this._resizeContext.jAxisOpt==tt.JAxisOpt.E_SN&&(a=((h=Math.max(this.e_sn+i,this._resizeContext.mine_sn))-1)/2),this.geogrid.unstaggered_ij_to_latlon(t,a));if(this.domain.ref_lat=t[0],this.domain.ref_lon=t[1],this._resizeContext.iAxisOpt==tt.IAxisOpt.I_PARENT_START){this.e_we-=e;for(s=0;s<this.nests.length;s++)this.nests[s].i_parent_start-=e}else this._resizeContext.iAxisOpt==tt.IAxisOpt.E_WE&&(this.e_we=o);if(this._resizeContext.jAxisOpt==tt.JAxisOpt.J_PARENT_START){this.e_sn-=i;for(s=0;s<this.nests.length;s++)this.nests[s].j_parent_start-=i}else this._resizeContext.jAxisOpt==tt.JAxisOpt.E_SN&&(this.e_sn=h);this.domain.update()}}else this._resizeContext.resizeStarted=!0,this._enableGridLines=!1,this._iGridLines&&this._removeGridLines(),this.parent&&this.parent.showGridLines()},_log:function(t){t&&console.log(t),console.log("  ref_lat: "+this.domain.ref_lat),console.log("  ref_lon: "+this.domain.ref_lon),console.log("  stand_lon: "+this.domain.stand_lon),console.log("  truelat1: "+this.domain.truelat1),console.log("  truelat2: "+this.domain.truelat2),console.log("  i_parent_start: "+this.i_parent_start),console.log("  j_parent_start: "+this.j_parent_start),console.log("  e_we: "+this.e_we),console.log("  e_sn: "+this.e_sn)},_dragContext:null,_dragEnd:function(t){this.domain.grid.bindTooltip(t),this._map.dragging.enable(),this._map.off("mousemove",this._drag,this),this._map.off("mouseup",this._dragEnd,this),this._map.off("mouseout",this._dragEnd,this),this._enableGridLines=!0,this._dragContext.dragStarted&&(this._drawGridLines(),this.parent)&&this.parent.hideGridLines(),this._dragContext=null},_dragStart:function(t){this._map.once("mouseup",this._dragEnd,this),this._map.once("mouseout",this._dragEnd,this),this._map.dragging.disable(),this.domain.grid.unbindTooltip(),this._dragContext={dragStarted:!1,ref_lat:this.domain.ref_lat,ref_lon:this.domain.ref_lon,stand_lon:this.domain.stand_lon,truelat1:this.domain.truelat1,truelat2:this.domain.truelat2,startLatLng:t.latlng,startIJ:this.geogrid.latlon_to_unstaggered_ij(t.latlng.lat,t.latlng.lng),delta_i:0,delta_j:0,max_delta_i:this.i_delta_end-tt.minNestGridPoints,max_delta_j:this.j_delta_end-tt.minNestGridPoints,min_delta_i:tt.minNestGridPoints-this.i_parent_start+1,min_delta_j:tt.minNestGridPoints-this.j_parent_start+1,i_parent_start:this.i_parent_start,j_parent_start:this.j_parent_start},this._map.on("mousemove",this._drag,this)},_drag:function(t){var e,i;this._dragContext.dragStarted||(this._dragContext.dragStarted=!0,this._enableGridLines=!1,this._iGridLines&&this._removeGridLines(),this.parent&&this.parent.showGridLines()),null==this.parent?(this.domain.ref_lat=t.latlng.lat-this._dragContext.startLatLng.lat+this.domain.ref_lat,this.domain.ref_lon=t.latlng.lng-this._dragContext.startLatLng.lng+this.domain.ref_lon,this.domain.drag(this._dragContext),this._dragContext.startLatLng=t.latlng,this.domain.update()):(e=this.geogrid.latlon_to_unstaggered_ij(t.latlng.lat,t.latlng.lng),this._dragContext.delta_i+=(e[0]-this._dragContext.startIJ[0])/this.parent_grid_ratio,this._dragContext.delta_j+=(e[1]-this._dragContext.startIJ[1])/this.parent_grid_ratio,e=Math.min(qs(this._dragContext.delta_i),this._dragContext.max_delta_i),e=Math.max(e,this._dragContext.min_delta_i),i=Math.min(qs(this._dragContext.delta_j),this._dragContext.max_delta_j),i=Math.max(i,this._dragContext.min_delta_j),this.i_parent_start=this._dragContext.i_parent_start+e,this.j_parent_start=this._dragContext.j_parent_start+i,this.update(),this._dragContext.startIJ=this.geogrid.latlon_to_unstaggered_ij(t.latlng.lat,t.latlng.lng))},onAdd:function(t){this._gridLinesLayer=this._createGridLinesPane(),L.Polygon.prototype.onAdd.call(this,t),this.geogrid=this._initGeogrid(),this._corners=this._initCorners(),this.setLatLngs(this.geogrid.polygonPath),this._cornerMarkers={sw:L.marker(this._corners.sw,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-nesw-resize":"wrf-domain-grid-corner"})}),se:L.marker(this._corners.se,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-nwse-resize":"wrf-domain-grid-corner"})}),ne:L.marker(this._corners.ne,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-nesw-resize":"wrf-domain-grid-corner"})}),nw:L.marker(this._corners.nw,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-nwse-resize":"wrf-domain-grid-corner"})})};var e=this._getResizeMarkerLocations();!0===this.options.showResizeMarkers&&(this._resizeMarkers={n:L.marker(e.n,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-ns-resize":"wrf-domain-grid-corner"})}),s:L.marker(e.s,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-ns-resize":"wrf-domain-grid-corner"})}),e:L.marker(e.e,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-ew-resize":"wrf-domain-grid-corner"})}),w:L.marker(e.w,{icon:L.divIcon({className:this.options.editable?"wrf-domain-grid-corner cursor-ew-resize":"wrf-domain-grid-corner"})})}),this.options.editable&&(this._cornerMarkers.sw.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.I_PARENT_START,tt.JAxisOpt.J_PARENT_START),this._map.on("mousemove",this._resize,this)},this),this._cornerMarkers.se.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.E_WE,tt.JAxisOpt.J_PARENT_START),this._map.on("mousemove",this._resize,this)},this),this._cornerMarkers.ne.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.E_WE,tt.JAxisOpt.E_SN),this._map.on("mousemove",this._resize,this)},this),this._cornerMarkers.nw.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.I_PARENT_START,tt.JAxisOpt.E_SN),this._map.on("mousemove",this._resize,this)},this),!0===this.options.showResizeMarkers)&&(this._resizeMarkers.n.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.NONE,tt.JAxisOpt.E_SN),this._map.on("mousemove",this._resize,this)},this),this._resizeMarkers.s.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.NONE,tt.JAxisOpt.J_PARENT_START),this._map.on("mousemove",this._resize,this)},this),this._resizeMarkers.e.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.E_WE,tt.JAxisOpt.NONE),this._map.on("mousemove",this._resize,this)},this),this._resizeMarkers.w.on("mousedown",function(t){this._resizeStart(t,tt.IAxisOpt.I_PARENT_START,tt.JAxisOpt.NONE),this._map.on("mousemove",this._resize,this)},this)),this._map.on("zoomend moveend",this._onMapViewChanged,this),this._bindTooltip(),this.on("click",this._onPolygonClick,this);for(var i=0;i<this.nests.length;i++)this.nests[i].addTo(t)},getBounds:function(){return this._corners||(this.geogrid=this._initGeogrid(),this._corners=this._initCorners(),this.setLatLngs(this.geogrid.polygonPath)),L.Polygon.prototype.getBounds.call(this)},onRemove:function(t){this._map.off("viewreset",this._onMapViewChanged,this),this.options.showTooltip&&this._unbindTooltip(),this.off("click",this._onPolygonClick,this),this._isSelected&&this.unselect();for(var e=0;e<this.nests.length;e++)this.nests[e].remove();L.Polygon.prototype.onRemove.call(this,t),this.fire("wps:remove")},initialize:function(t,e,i,n,s){if(L.Util.setOptions(this,s),this.domain=t,this.parent=e,this.id=i,this.nests=[],this.e_we=tt.minGridSize,this.e_sn=tt.minGridSize,n){if(this.parent_grid_ratio=n.geogrid.parent_grid_ratio[i-1],this.i_parent_start=n.geogrid.i_parent_start[i-1],this.j_parent_start=n.geogrid.j_parent_start[i-1],this.e_we=n.geogrid.e_we[i-1],this.e_sn=n.geogrid.e_sn[i-1],this.geog_data_res=n.geogrid.geog_data_res[i-1],this.geog_data_res||(this.geog_data_res="default"),(this.e_we-1)%this.parent_grid_ratio!=0)throw"invalid e_we value";if((this.e_sn-1)%this.parent_grid_ratio!=0)throw"invalid e_sn value";for(var r=i;r<n.geogrid.parent_id.length;r++)i===n.geogrid.parent_id[r]&&this.nests.push(new tt(t,this,r+1,n,s))}L.Polygon.prototype.initialize.call(this,[])},update:function(){this.geogrid=this._initGeogrid(),this._corners=this._initCorners(),this.setLatLngs(this.geogrid.polygonPath),this._cornerMarkers.sw.setLatLng(this._corners.sw),this._cornerMarkers.se.setLatLng(this._corners.se),this._cornerMarkers.ne.setLatLng(this._corners.ne),this._cornerMarkers.nw.setLatLng(this._corners.nw);var t=this._getResizeMarkerLocations();!0===this.options.showResizeMarkers&&(this._resizeMarkers.n.setLatLng(t.n),this._resizeMarkers.s.setLatLng(t.s),this._resizeMarkers.e.setLatLng(t.e),this._resizeMarkers.w.setLatLng(t.w)),this._iGridLines&&this._removeGridLines(),this._isSelected&&this._drawGridLines();for(var e=0;e<this.nests.length;e++)this.nests[e].update();this.fire("wps:change")},addToNamelist:function(t){t.geogrid.parent_id.push(this.parent?this.parent.id:1),t.geogrid.parent_grid_ratio.push(this.parent_grid_ratio),t.geogrid.i_parent_start.push(this.i_parent_start),t.geogrid.j_parent_start.push(this.j_parent_start),t.geogrid.e_we.push(this.e_we),t.geogrid.e_sn.push(this.e_sn),t.geogrid.geog_data_res.push(this.geog_data_res);for(var e=0;e<this.nests.length;e++)this.nests[e].addToNamelist(t)},unselectAll:function(){if(this._isSelected)this.unselect();else for(var t=0;t<this.nests.length;t++)this.nests[t].unselectAll()},unselect:function(){this._cornerMarkers.sw.remove(),this._cornerMarkers.se.remove(),this._cornerMarkers.ne.remove(),this._cornerMarkers.nw.remove(),this._resizeMarkers&&(this._resizeMarkers.n.remove(),this._resizeMarkers.s.remove(),this._resizeMarkers.e.remove(),this._resizeMarkers.w.remove()),this._isSelected=!1,this._isSelected&&this.options.editable&&this.off("mousedown",this._dragStart,this),this.hideGridLines(),this.fire("wps:unselect")},select:function(){this._isSelected||(this.domain.grid.unselectAll(),this._isSelected=!0,this._cornerMarkers.sw.addTo(this._map),this._cornerMarkers.se.addTo(this._map),this._cornerMarkers.ne.addTo(this._map),this._cornerMarkers.nw.addTo(this._map),this._resizeMarkers&&(this._resizeMarkers.n.addTo(this._map),this._resizeMarkers.s.addTo(this._map),this._resizeMarkers.e.addTo(this._map),this._resizeMarkers.w.addTo(this._map)),this.options.editable&&this.on("mousedown",this._dragStart,this),this.showGridLines(),this.fire("wps:select"),this.domain.setSelectedGrid(this))},updateId:function(t){this.id!=t&&(this.id=t,this.fire("wps:id-change"));for(var e=0;e<this.nests.length;e++)this.nests[e].updateId(this.id+1)},removeNest:function(t){t.remove();t=this.nests.indexOf(t);if(-1==t)throw"Cannot remove a nest which is not a nest of this grid";this.nests.splice(t,1),this.domain.grid.updateId(1),this.fire("wps:removenest")},createNest:function(){var t=new tt(this.domain,this,this.domain.max_dom+1,null,this.options);try{t.parent_grid_ratio=tt.defaultGridRatio,t.i_parent_start=1+tt.minNestGridPoints,t.j_parent_start=1+tt.minNestGridPoints,t.e_we=Math.floor((t.parent.e_we-tt.minNestGridPoints-t.i_parent_start)*t.parent_grid_ratio+1),t.e_sn=Math.floor((t.parent.e_sn-tt.minNestGridPoints-t.j_parent_start)*t.parent_grid_ratio+1)}catch(t){throw"Unable to add a nest grid ("+t+")"}return this.nests.push(t),this.fire("wps:addnest"),this._map&&t.addTo(this._map),t},findGrid:function(t){var e,i;if(this.id==t)return this;if(this.nests&&0<this.nests.length)for(i=0;i<this.nests.length;i++)if(e=this.nests[i].findGrid(t))return e;return e}}),dh=(Object.defineProperties(tt.prototype,{name:{get:function(){return"d"+this.id.toString().padStart(2,"0")}},selected:{get:function(){return this._isSelected}},iPixels:{get:function(){return this.parent?this.parent.iPixels/this.parent_grid_ratio:Math.round(this.domain.dxPixelsMul*Math.pow(2,this._map.getZoom()))}},i_delta_end:{get:function(){return this.parent?this.parent.e_we-(this.e_we-1)/this.parent_grid_ratio-this.i_parent_start:0}},j_delta_end:{get:function(){return this.parent?this.parent.e_sn-(this.e_sn-1)/this.parent_grid_ratio-this.j_parent_start:0}},depth:{get:function(){for(var t=this.parent;t;)t=t.parent;return 0}},count:{get:function(){for(var t=1,e=0;e<this.nests.length;e++)t+=this.nests[e].count;return t}},corners:{get:function(){return this._corners}}}),tt.prototype._getGridLinesBounds=function(){var t=this._map.getBounds(),e=t.getSouthWest(),t=t.getNorthEast(),i=this.geogrid.latlon_to_unstaggered_ij(e.lat,e.lng),n=this.geogrid.latlon_to_unstaggered_ij(t.lat,t.lng),s=this.geogrid.latlon_to_unstaggered_ij(e.lat,t.lng),t=this.geogrid.latlon_to_unstaggered_ij(t.lat,e.lng);return{iLinesStart:Math.max(0,Math.min(Math.floor(i[0]),Math.floor(t[0]),this.e_we-1)),jLinesStart:Math.max(0,Math.min(Math.floor(i[1]),Math.floor(s[1]),this.e_sn-1)),iLinesEnd:Math.min(this.e_we-1,Math.max(Math.ceil(n[0]),Math.ceil(s[0]),0)),jLinesEnd:Math.min(this.e_sn-1,Math.max(Math.ceil(n[1]),Math.ceil(t[1]),0))}},tt.prototype._createGridLinePolyline=function(t){t=L.polyline(t,{pane:"gridLinesPane",color:"grey",weight:1,opacity:.5});return this._gridLinesLayer.addLayer(t),t},tt.prototype._updateGridLines=function(){if(this._iGridLines)if(this.iPixels<tt.minPixelsPerGrid)this._gridLinesLayer.remove();else{var t,e,i,n,s,r,a,o,h;if(this._map.hasLayer(this._gridLinesLayer)||this._gridLinesLayer.addTo(this._map),((i=this._getGridLinesBounds()).iLinesEnd<this._gridLinesBounds.iLinesStart||i.iLinesStart>this._gridLinesBounds.iLinesEnd||i.jLinesEnd<this._gridLinesBounds.jLinesStart||i.jLinesStart>this._gridLinesBounds.jLinesEnd)&&(this._removeGridLines(),this._drawGridLines(i)),i.iLinesStart<this._gridLinesBounds.iLinesStart){for(r=[],h=new Array(this._gridLinesBounds.jLinesEnd-this._gridLinesBounds.jLinesStart+1),t=i.iLinesStart;t<this._gridLinesBounds.iLinesStart;t++){for(n=[],e=this._gridLinesBounds.jLinesStart;e<=this._gridLinesBounds.jLinesEnd;e++)s=this.geogrid.unstaggered_ij_to_latlon(t,e),n.push(s),t==i.iLinesStart&&(h[e-this._gridLinesBounds.jLinesStart]=new Array),h[e-this._gridLinesBounds.jLinesStart].push(s),t==this._gridLinesBounds.iLinesStart-1&&this._jGridLines[e-this._gridLinesBounds.jLinesStart].setLatLngs(h[e-this._gridLinesBounds.jLinesStart].concat(this._jGridLines[e-this._gridLinesBounds.jLinesStart].getLatLngs()));r.push(this._createGridLinePolyline(n))}this._iGridLines=r.concat(this._iGridLines),this._gridLinesBounds.iLinesStart=i.iLinesStart}if(i.jLinesStart<this._gridLinesBounds.jLinesStart){for(a=[],o=new Array(this._gridLinesBounds.iLinesEnd-this._gridLinesBounds.iLinesStart+1),e=i.jLinesStart;e<this._gridLinesBounds.jLinesStart;e++){for(n=[],t=this._gridLinesBounds.iLinesStart;t<=this._gridLinesBounds.iLinesEnd;t++)s=this.geogrid.unstaggered_ij_to_latlon(t,e),n.push(s),e==i.jLinesStart&&(o[t-this._gridLinesBounds.iLinesStart]=new Array),o[t-this._gridLinesBounds.iLinesStart].push(s),e==this._gridLinesBounds.jLinesStart-1&&this._iGridLines[t-this._gridLinesBounds.iLinesStart].setLatLngs(o[t-this._gridLinesBounds.iLinesStart].concat(this._iGridLines[t-this._gridLinesBounds.iLinesStart].getLatLngs()));a.push(this._createGridLinePolyline(n))}this._jGridLines=a.concat(this._jGridLines),this._gridLinesBounds.jLinesStart=i.jLinesStart}if(i.iLinesEnd>this._gridLinesBounds.iLinesEnd){for(t=this._gridLinesBounds.iLinesEnd+1;t<=i.iLinesEnd;t++){for(n=[],e=this._gridLinesBounds.jLinesStart;e<=this._gridLinesBounds.jLinesEnd;e++)s=this.geogrid.unstaggered_ij_to_latlon(t,e),n.push(s),this._jGridLines[e-this._gridLinesBounds.jLinesStart].addLatLng(s);this._iGridLines.push(this._createGridLinePolyline(n))}this._gridLinesBounds.iLinesEnd=i.iLinesEnd}if(i.jLinesEnd>this._gridLinesBounds.jLinesEnd){for(e=this._gridLinesBounds.jLinesEnd+1;e<=i.jLinesEnd;e++){for(n=[],t=this._gridLinesBounds.iLinesStart;t<=this._gridLinesBounds.iLinesEnd;t++)s=this.geogrid.unstaggered_ij_to_latlon(t,e),n.push(s),this._iGridLines[t-this._gridLinesBounds.iLinesStart].addLatLng(s);this._jGridLines.push(this._createGridLinePolyline(n))}this._gridLinesBounds.jLinesEnd=i.jLinesEnd}}else this._drawGridLines()},tt.prototype._drawGridLines=function(t){if(this.iPixels>=tt.minPixelsPerGrid&&this._enableGridLines){var e,i,n,s,r;for(this._gridLinesBounds=t||this._getGridLinesBounds(),this._iGridLines=[],this._jGridLines=[],r=new Array(this._gridLinesBounds.jLinesEnd-this._gridLinesBounds.jLinesStart+1),e=this._gridLinesBounds.iLinesStart;e<=this._gridLinesBounds.iLinesEnd;e++){for(n=[],i=this._gridLinesBounds.jLinesStart;i<=this._gridLinesBounds.jLinesEnd;i++)s=this.geogrid.unstaggered_ij_to_latlon(e,i),n.push(s),e==this._gridLinesBounds.iLinesStart&&(r[i-this._gridLinesBounds.jLinesStart]=new Array(this._gridLinesBounds.iLinesEnd-this._gridLinesBounds.iLinesStart+1)),r[i-this._gridLinesBounds.jLinesStart][e-this._gridLinesBounds.iLinesStart]=s,e==this._gridLinesBounds.iLinesEnd&&this._jGridLines.push(this._createGridLinePolyline(r[i-this._gridLinesBounds.jLinesStart]));this._iGridLines.push(this._createGridLinePolyline(n))}this._map.hasLayer(this._gridLinesLayer)||this._gridLinesLayer.addTo(this._map)}},tt.prototype._removeGridLines=function(){this._gridLinesLayer.clearLayers(),this._iGridLines=null,this._jGridLines=null,this._gridLinesLayer.remove()},tt.prototype.hideGridLines=function(){this._gridLinesLayer.remove(),this._enableGridLines=!1},tt.prototype.showGridLines=function(){this._enableGridLines=!0,this._updateGridLines()},r(function t(e){X(this,t),this.options={jsonBaseUrl:"json"},e&&(this.options=Object.assign(this.options,e));var n,u,i,s,c,r,p,a,f=this,o="".concat(this.options.jsonBaseUrl,"/geog.json");function h(){var t,e,i,n,s,r,a,o,h,l,d={};for(f.geog_data_res.match(/(\w+)/g).forEach(function(t){d[t]=t}),c.body.empty(),t=0;t<u.categories.length;t++){for(i=$("<tr/>"),n=u.categories[t],i.append("<td>"+n.name+"</td>"),s=$('<select class=""></select>'),i.append($("<td />").append(s)),i.append("<td>"+n.default+"</td>"),r=$("<td/>"),i.append(r),c.body.append(i),h=[],a=!(o={}),e=0;e<n.options.length;e++)"default"!==n.options[e].id&&h.push(n.options[e].id),l=null!=d[n.options[e].id],o[n.options[e].id]=$(new Option(n.options[e].id,n.options[e].id,l,l)).data("dirname",n.options[e].dirname),l&&(r.text(n.options[e].dirname),a=!0);a||r.text(o.default.data("dirname")),s.append(o.default),0<h.length?h.sort().forEach(function(t){s.append(o[t])}):s.prop("disabled",!0),s.on("change",{cellFilename:r,selectCategoryOption:s},function(t){var i,n=t.data.selectCategoryOption.val(),s=[],r={};t.data.cellFilename.text($("option:selected",t.data.selectCategoryOption).data("dirname")),$('select option[value="'+n+'"]',c.body).parents().has('option[value="default"]:selected').each(function(t,e){(i=$(e)).val(n),$("td:last-child",i.closest("tr")).text($("option:selected",i).data("dirname"))}),$("select",c.body).each(function(t,e){i=$(e),"default"!=(n=i.val())&&void 0===r[n]&&(r[n]=n,s.push(n))}),0==s.length?p.val("default"):p.val(s.join("+"))})}}i=$("div.modal#geog-data-res-dialog"),e=$("div.modal-header",i),a=$("div.modal-body",i),s=$("div.modal-footer",i),(c=$("table",a)).header=$("thead",c),c.body=$("tbody",c),r=$("select",e),p=$("input",a),e=$("button#button-geog-save",s),a=$("button#button-geog-reset",s),this.show=function(t,e){this.saveHandler=e,this.geog_data_res=t=t||"default",p.val(t),void 0===n?$.getJSON(o,function(t){var e,i;for(n=t,e=0;e<n.geog.length;e++)for(i=0;i<n.geog[e].categories.length;i++)if("HGT_M"==n.geog[e].categories[i].name){n.geog[e].categories[i].options.push({id:"srtm_30m",dirname:"srtm_30m"}),n.geog[e].categories[i].options.push({id:"srtm_90m",dirname:"srtm_90m"});break}for(r.empty(),e=0;e<n.geog.length;e++)r.append('<option value="'+n.geog[e].version+'">'+n.geog[e].version+"</option>");r.on("change",function(t){for(e=0;e<n.geog.length;e++)if(r.val()==n.geog[e].version){u=n.geog[e],h();break}}),u=n.geog[0],r.val(u.version),h()}):h(),i.modal()},a.on("click",function(){p.val("default"),$("select",c.body).each(function(){var t=$(this);t.val("default"),$("td:last-child",t.closest("tr")).text(t.find(":selected").data("dirname"))})}),e.on("click",function(t){t.geog_data_res=p.val(),"function"==typeof f.saveHandler&&f.saveHandler.call(this,t)})})),uh=r(function i(n,u,s,t){var c,e,r,a,p,f,_,g,m,o,h,l,d,y,v,b=this,w=(X(this,i),this);function x(){(h=$('<i class="fas fa-vector-square mx-1"></i>')).insertBefore(a)}u.domain,this.options={minGridDistanceMeters:100,minGridDistanceDegrees:0},t&&(this.options=Object.assign(this.options,t)),null===i._geogDataResDialog&&(i._geogDataResDialog=new dh(t)),null==i.Template&&(i.Template=$("#grid_template",n).html(),$("#grid_template",n).remove()),c=$('<div class="container-grid"></div>').append(i.Template),t=$('button[data-action="remove-nest"]',c),e=$('button[data-action="add-nest"]',c),r=$('button[data-action="geog-data-res-edit"]',c),a=$("label.grid-label",c),p=$('input[name="parent_grid_ratio"]',c),f=$('input[name="i_parent_start"]',c),_=$('input[name="j_parent_start"]',c),g=$('input[name="e_we"]',c),m=$('input[name="e_sn"]',c),o=$('span[data-name="geog_data_res"]',c),v=$("table tbody tr:nth-child(1) td:nth-child(2)",c),y=$("table tbody tr:nth-child(1) td:nth-child(3)",c),l=$("table tbody tr:nth-child(2) td:nth-child(2)",c),d=$("table tbody tr:nth-child(2) td:nth-child(3)",c),n.append(c),$("[title]",c).tooltip(),$("input[name]",c).on("change blur keyup",function(t){w.validate()}),r.on("click",function(t){i._geogDataResDialog.show(u.geog_data_res,function(t){u.geog_data_res=t.geog_data_res,o.text(t.geog_data_res),o.attr("title",t.geog_data_res)})}),u.on("wps:remove",function(t){c.remove()}),u.on("wps:change",S),u.on("wps:id-change",k),u.on("wps:select",function(){h||x()}),u.on("wps:unselect",function(){h&&(h.remove(),h=null)}),$("button[title]",c).on("click",function(t){$(this).tooltip("hide")}),t.on("click",function(t){u.parent.removeNest(u)}),e.on("click",function(t){var e=null;if("localhost"===location.hostname)(e=u.createNest()).gridPanel=new i(n,e,s);else try{(e=u.createNest()).gridPanel=new i(n,e,s)}catch(t){!function(t){"function"==typeof s&&s.call(this,{error:t})}(t)}}),u.parent?(f.prop("min",tt.minNestGridPoints),_.prop("min",tt.minNestGridPoints)):(t.remove(),p.prop("disabled",!0),p.removeAttr("required"),f.prop("disabled",!0),f.removeAttr("required"),_.prop("disabled",!0),_.removeAttr("required"));for(var M=0;M<u.nests.length;M++)u.nests[M].gridPanel=new i(n,u.nests[M],s);function k(){u.parent?a.text(u.name+" (parent: d"+u.parent.id.toString().padStart(2,"0")+")"):a.text(u.name)}function S(){p.val(u.parent_grid_ratio),f.val(u.i_parent_start),_.val(u.j_parent_start),g.val(u.e_we),m.val(u.e_sn),o.text(u.geog_data_res),o.attr("title",u.geog_data_res),o.tooltip(),l.text(u.corners.sw.lat.toFixed(3)+", "+u.corners.sw.lng.toFixed(3)),d.text(u.corners.se.lat.toFixed(3)+", "+u.corners.se.lng.toFixed(3)),y.text(u.corners.ne.lat.toFixed(3)+", "+u.corners.ne.lng.toFixed(3)),v.text(u.corners.nw.lat.toFixed(3)+", "+u.corners.nw.lng.toFixed(3)),w.validate()}function L(){var t,e,i,n,s;1<u.id&&(t=parseInt(p.val(),10),n=parseInt(f.val(),10),s=parseInt(_.val(),10),e=tt.minNestGridPoints*t+1,i=tt.minNestGridPoints*t+1,n=Math.floor((u.parent.e_we-tt.minNestGridPoints-n)*t+1),s=Math.floor((u.parent.e_sn-tt.minNestGridPoints-s)*t+1),g.prop("min",e),m.prop("min",i),g.prop("max",n),m.prop("max",s),g.prop("step",t),m.prop("step",t),f.prop("min",tt.minNestGridPoints+1),_.prop("min",tt.minNestGridPoints+1),f.prop("max",u.parent.e_we-2*tt.minNestGridPoints),_.prop("max",u.parent.e_sn-2*tt.minNestGridPoints))}function E(t,e){$('div[data-val-for="'+t.prop("name")+'"]',c).show().append("<p>"+e+"</p>"),t.addClass(".is-invalid")}function A(t){return!!t[0].checkValidity()||(E(t,t[0].validationMessage.replace(/[v,V]alue|(this field)/,t.prop("name"))),!1)}p.on("change",function(t){var e,i,n=parseInt(p.val());isNaN(n)||(e=(u.e_we-1)/u.parent_grid_ratio,i=(u.e_sn-1)/u.parent_grid_ratio,L(),g.val(e*n+1),m.val(i*n+1),b.validate())}),this.validate=function(){var t,e,i,n,s,r,a,o,h,l=!0;null!=u.parent&&($(".invalid-feedback",c).hide().empty(),$(".is-invalid, .is-valid",c).removeClass(".is-invalid").removeClass(".is-valid"),L(),l=A(p),l=A(f)&&l,l=A(_)&&l,l=A(g)&&l,l=A(m)&&l)&&(t=parseInt(p.val(),10),e=parseInt(f.val(),10),i=parseInt(_.val(),10),n=parseInt(g.val(),10),s=parseInt(m.val(),10),r=u.parent.e_we,a=u.parent.e_sn,e<tt.minNestGridPoints&&(E(f,"Min i_parent_start = "+tt.minNestGridPoints+". "),l=!1),i<tt.minNestGridPoints&&(E(_,"Min j_parent_start = "+tt.minNestGridPoints+". "),l=!1),e>r-tt.minNestGridPoints&&(E(f,"Max i_parent_start = "+(r-tt.minNestGridPoints)+". "),l=!1),i>a-tt.minNestGridPoints&&(E(_,"Max j_parent_start = "+(a-tt.minNestGridPoints)+". "),l=!1),(n-1)%t!=0&&(E(g,"e_we must be one greater than an integer multiple of the nest's parent_grid_ratio (e_we = n*parent_grid_ratio + 1)."),l=!1),(s-1)%t!=0&&(E(m,"e_sn must be one greater than an integer multiple of the nest's parent_grid_ratio (e_sn = n*parent_grid_ratio + 1)."),l=!1),o=Math.floor((r-tt.minNestGridPoints-e)*t+1),h=Math.floor((a-tt.minNestGridPoints-i)*t+1),(o<n||h<s)&&(E(m,"Nest edge outside of parent. "),l=!1),o<n&&(o=Math.floor((r-e-tt.minNestGridPoints)*t+1),E(g,"Max e_we = "+o+". "),l=!1),h<s)&&(h=Math.floor((a-i-tt.minNestGridPoints)*t+1),E(m,"Max e_sn = "+h+". "),l=!1);for(var d=0;d<u.nests.length;d++)l=l&&u.nests[d].gridPanel.validate();return l},this.setGridValues=function(){u.parent_grid_ratio=parseInt(p.val(),10),u.i_parent_start=parseInt(f.val(),10),u.j_parent_start=parseInt(_.val(),10),u.e_we=parseInt(g.val(),10),u.e_sn=parseInt(m.val(),10),u.geog_data_res=o.text();for(var t=0;t<u.nests.length;t++)u.nests[t].gridPanel.setGridValues()},k(),S(),u.selected&&x()}),ch=(t(uh,"_geogDataResDialog",null),uh.Template=null,L.Layer.extend({options:{editable:!0,showTooltip:!0},_map:null,_mainGrid:null,_selectedGrid:null,setSelectedGrid:function(t){this._selectedGrid=t},map_proj:null,truelat1:null,truelat2:null,stand_lon:null,ref_lat:null,ref_lon:null,pole_lat:null,pole_lon:null,dx:null,dy:null,_centerMarker:null,_gridsByDepth:null,_orderGrids:function(t){var e,i;for(this._gridsByDepth&&!t||(this._gridsByDepth=[],this._walkGrids(this._mainGrid,function(t){this._gridsByDepth[t.depth]?this._gridsByDepth[t.depth].push(t):this._gridsByDepth[t.depth]=[t]},this)),e=0;e<this._gridsByDepth.length;e++)for(i=0;i<this._gridsByDepth[e].length;i++)this._gridsByDepth[e][i].bringToFront()},_walkGrids:function(t,e,i){if(e.call(i,t),t.nests&&0<t.nests.length)for(var n=0;n<t.nests.length;n++)this._walkGrids(t.nests[n],e,i)},getGrid:function(t){return this._mainGrid.findGrid(t)},_dragContext:null,_onCenterMarkerDrag:function(t){this.ref_lat=t.latlng.lat,this.ref_lon=t.latlng.lng,this.drag(this._dragContext),this.update()},drag:function(t){switch(this.map_proj){case Ds:this.stand_lon=this.ref_lon+t.stand_lon-t.ref_lon,this.truelat1=this.ref_lat+t.truelat1-t.ref_lat,this.truelat2=this.ref_lat+t.truelat2-t.ref_lat;break;case Fs:this.stand_lon=0,this.truelat1=this.ref_lat+t.truelat1-t.ref_lat;break;case Us:this.stand_lon=this.ref_lon+t.stand_lon-t.ref_lon,this.truelat1=this.ref_lat+t.truelat1-t.ref_lat;break;case Y:this._setDefaultProjValues()}},_onMapClick:function(t){this._map.getContainer()==t.originalEvent.target&&this._selectedGrid&&(this._selectedGrid.unselect(),this._selectedGrid=null)},onAdd:function(t){this._map=t,this._map.on("click",this._onMapClick,this),this._centerMarker=L.marker([this.ref_lat,this.ref_lon],{draggable:this.options.editable,title:"Domain Center"}).addTo(t),this._mainGrid.addTo(t),this._orderGrids(),!0===this.options.editable&&(this._centerMarker.on("dragstart",function(t){this._dragContext={ref_lat:this.ref_lat,ref_lon:this.ref_lon,truelat1:this.truelat1,truelat2:this.truelat2,stand_lon:this.stand_lon,pole_lat:this.pole_lat,pole_lon:this.pole_lon},this._mainGrid.unbindTooltip(),this._selectedGrid&&this._selectedGrid.hideGridLines()},this),this._centerMarker.on("drag",this._onCenterMarkerDrag,this),this._centerMarker.on("dragend",function(t){t.latlng=this._centerMarker.getLatLng(),this._onCenterMarkerDrag(t),this._mainGrid.bindTooltip(),this._selectedGrid&&this._selectedGrid.showGridLines()},this))},onRemove:function(t){this._centerMarker&&(this._centerMarker.off(),this._centerMarker.remove()),this._map.off("click",this._onMapClick,this),this._mainGrid.remove()},update:function(){this._centerMarker.setLatLng(L.latLng(this.ref_lat,this.ref_lon)),this._mainGrid.update(),this.fire("wps:change")},_setDefaultProjValues:function(){switch(this.map_proj){case Ds:this.truelat1=this.ref_lat,this.truelat2=this.ref_lat,this.stand_lon=this.ref_lon;break;case Fs:this.truelat1=this.ref_lat,this.stand_lon=0;break;case Us:this.truelat1=this.ref_lat,this.stand_lon=this.ref_lon;break;case Y:this.ref_lat<0?(this.pole_lat=90+this.ref_lat,this.pole_lon=0,this.stand_lon=180-this.ref_lon):(this.pole_lat=90-this.ref_lat,this.pole_lon=180,this.stand_lon=-this.ref_lon)}},setDefaultValues:function(t,e){this.ref_lat=t,this.ref_lon=e,this._setDefaultProjValues()},initialize:function(t,e){L.Util.setOptions(this,e),void 0!==t&&(this.map_proj=t.geogrid.map_proj,this.truelat1=t.geogrid.truelat1,this.truelat2=t.geogrid.truelat2,this.stand_lon=t.geogrid.stand_lon,this.ref_lat=t.geogrid.ref_lat,this.ref_lon=t.geogrid.ref_lon,this.dx=t.geogrid.dx,this.dy=t.geogrid.dy,this.pole_lat=t.geogrid.pole_lat,this.pole_lon=t.geogrid.pole_lon,this.ref_x=t.geogrid.ref_x,this.ref_y=t.geogrid.ref_y,this._mainGrid=new tt(this,null,1,t,this.options))},getWPSNamelist:function(){var t=new Bs;switch(t.share.max_dom=this.max_dom,t.geogrid.map_proj=this.map_proj,t.geogrid.dx=this.dx,t.geogrid.dy=this.dy,t.geogrid.ref_lat=this.ref_lat,t.geogrid.ref_lon=this.ref_lon,this.map_proj){case Ds:t.geogrid.truelat1=this.truelat1,t.geogrid.truelat2=this.truelat2,t.geogrid.stand_lon=this.stand_lon;break;case Fs:t.geogrid.truelat1=this.truelat1;break;case Us:t.geogrid.truelat1=this.truelat1,t.geogrid.stand_lon=this.stand_lon;break;case Y:t.geogrid.pole_lat=this.pole_lat,t.geogrid.pole_lon=this.pole_lon,t.geogrid.stand_lon=this.stand_lon}return t.geogrid.parent_id=[],t.geogrid.parent_grid_ratio=[],t.geogrid.i_parent_start=[],t.geogrid.j_parent_start=[],t.geogrid.e_we=[],t.geogrid.e_sn=[],t.geogrid.geog_data_res=[],this.grid.addToNamelist(t),t},createMainGrid:function(){this._mainGrid&&this._mainGrid.remove(),this._mainGrid=new tt(this,null,1),this._mainGrid.parent_grid_ratio=1,this._mainGrid.i_parent_start=1,this._mainGrid.j_parent_start=1,this._mainGrid.e_we=tt.minGridSize,this._mainGrid.e_sn=tt.minGridSize}})),ph=(Object.defineProperties(ch.prototype,{grid:{get:function(){return this._mainGrid}},max_dom:{get:function(){return this._mainGrid.count}},dxPixelsMul:{get:function(){return this.dxInMeters/156543.03392/Math.cos(this.ref_lat*Math.PI/180)}},dxInMeters:{get:function(){return Ws(this.map_proj,this.dx)}},dyInMeters:{get:function(){return Ws(this.map_proj,this.dy)}}}),ch.prototype.addMainGrid=function(){var t,e,i,n,s;t=new tt(this,null,1),this._mainGrid.parent_grid_ratio=3,this._mainGrid.i_parent_start=tt.minNestGridPoints+1,this._mainGrid.j_parent_start=tt.minNestGridPoints+1,0!=(e=(this._mainGrid.e_we-1)%this._mainGrid.parent_grid_ratio)&&(this._mainGrid.e_we+=this._mainGrid.parent_grid_ratio-e),0!=(i=(this._mainGrid.e_sn-1)%this._mainGrid.parent_grid_ratio)&&(this._mainGrid.e_sn+=this._mainGrid.parent_grid_ratio-i),0==e&&0==i||(e=this.stand_lon-this.ref_lon,i=this.truelat1-this.ref_lat,n=this.truelat2-this.ref_lat,s=this._mainGrid.geogrid.unstaggered_ij_to_latlon((this._mainGrid.e_we-1)/2,(this._mainGrid.e_sn-1)/2),this.ref_lat=s[0],this.ref_lon=s[1],this.stand_lon=this.ref_lon+e,this.truelat1=this.ref_lat+i,this.truelat2=this.ref_lat+n),this.dx=this.dx*this._mainGrid.parent_grid_ratio,this.dy=this.dy*this._mainGrid.parent_grid_ratio,t.parent_grid_ratio=1,t.i_parent_start=1,t.j_parent_start=1,t.e_we=2*tt.minNestGridPoints+(this._mainGrid.e_we-1)/this._mainGrid.parent_grid_ratio+1,t.e_sn=2*tt.minNestGridPoints+(this._mainGrid.e_sn-1)/this._mainGrid.parent_grid_ratio+1,(this._mainGrid.parent=t).nests.push(this._mainGrid),function t(e){e.id++;for(var i=0;i<e.nests.length;i++)t(e.nests[i])}((this._mainGrid=t).nests[0]),t.addTo(this._map),this._orderGrids(!0),this.update()},ch.prototype.removeMainGrid=function(){if(1<this._mainGrid.nests.length)throw"Cannot remove top most grid with multiple nests";var t,e,i,n;0!=this._mainGrid.nests.length&&(t=this._mainGrid.domain.stand_lon-this._mainGrid.domain.ref_lon,e=this._mainGrid.domain.truelat1-this._mainGrid.domain.ref_lat,i=this._mainGrid.domain.truelat2-this._mainGrid.domain.ref_lat,n=this._mainGrid.nests[0].geogrid.unstaggered_ij_to_latlon((this._mainGrid.nests[0].e_we-1)/2,(this._mainGrid.nests[0].e_sn-1)/2),this.ref_lat=n[0],this.ref_lon=n[1],this.stand_lon=this.ref_lon+t,this.truelat1=this.ref_lat+e,this.truelat2=this.ref_lat+i,this.dx=this.dx/this._mainGrid.nests[0].parent_grid_ratio,this.dy=this.dy/this._mainGrid.nests[0].parent_grid_ratio,this._mainGrid.remove(!0),this._mainGrid.nests[0].parent=null,this._mainGrid.nests[0].parent_grid_ratio=1,this._mainGrid.nests[0].i_parent_start=1,this._mainGrid.nests[0].j_parent_start=1,this._mainGrid=this._mainGrid.nests[0],this._mainGrid.updateId(1),this._mainGrid.addTo(this._map))},r(function z(e,t){X(this,z);var o,n,i,s,r,a,h,l,d,u,c,p,f,_,G,g,m,y,v,b,w,x,B=this,M=!1,k="wrf_domain_wizard_wps_panel";function R(){i.height(r.parent().offset().top-i.offset().top-10)}function D(){o.map_proj=f.val(),o.ref_lat=parseFloat(_.val()),o.ref_lon=parseFloat(G.val()),o.truelat1=parseFloat(g.val()),o.truelat2=parseFloat(m.val()),o.stand_lon=parseFloat(y.val()),o.pole_lat=parseFloat(w.val()),o.pole_lon=parseFloat(x.val()),o.map_proj===Y?(o.dx=parseFloat(v.val()),o.dy=parseFloat(b.val())):(o.dx=parseInt(v.val(),10),o.dy=parseInt(b.val(),10)),o.grid.gridPanel.setGridValues(),o.update()}function S(t){t.attr("min",B.options.minGridDistanceMeters),t.attr("step",1)}function L(t){t.attr("min",0),t.attr("step",.001)}function E(t,i){t=t.parent();t.show(),t.find("input").each(function(t,e){!0===i?(e.required=!0,e.disabled=!1):(e.required=!1,e.disabled=!0)})}function A(t){t=t.parent();t.hide(),t.find("input").each(function(t,e){e.required=!1})}function C(t){E(y,t),!0===t?(h.prop("disabled",!1),a.prop("disabled",!1)):(h.prop("disabled",!0),a.prop("disabled",!0))}function F(){switch(E(_,!0),A(g),A(m),A(y),A(w),f.val()){case"lambert":E(g,!0),E(m,!0),C(!0),S(v),S(b);break;case"mercator":E(g,!0),C(!1),S(v),S(b);break;case"polar":E(g,!0),C(!0),S(v),S(b);break;case"lat-lon":C(!0,O(o.stand_lon)),E(w),w[0].disabled=!0,x[0].disabled=!0,L(v),L(b)}}function U(){var t=f.find("option:selected").data("title");f.attr("title",t),f.tooltip("dispose"),f.tooltip()}function q(t){var e=parseFloat(y.val()),i=0<o.ref_lat?5:-5;-180<e-(i=t?i:-i)&&(o.stand_lon=e-i),o.update()}this.options={minGridDistanceMeters:100,minGridDistanceDegrees:0},t&&(this.options=Object.assign(this.options,t)),n=$("form",e),i=$("#grids",n),s=$("div#grids-header",n),r=$("#update-domain",e),t=$('button[data-action="add-moad"]',n),p=$('button[data-action="remove-moad"]',n),f=$('select[name="map_proj"]',n),H(),_=$('input[name="ref_lat"]',n),G=$('input[name="ref_lon"]',n),g=$('input[name="truelat1"]',n),m=$('input[name="truelat2"]',n),y=$('input[name="stand_lon"]',n),v=$('input[name="dx"]',n),b=$('input[name="dy"]',n),w=$('input[name="pole_lat"]',n),x=$('input[name="pole_lon"]',n),a=$("#stan-lon-minus",n),h=$("#stan-lon-plus",n),l=$("#div-2",n),d=$("#div-3",n),u=$("#mul-2",n),c=$("#mul-3",n),r.off(),f.off(),a.off(),h.off(),l.off(),d.off(),u.off(),c.off(),$("[title]",n).tooltip(),$("button[title]",n).on("click",function(t){$(this).tooltip("hide")}),$(window).on("resize",R),t.on("click",function(t){o.addMainGrid(),i.empty(),P()}),p.on("click",function(t){o.removeMainGrid(),i.empty(),P(),o.update()}),r.on("click",function(t){var e,i;n.removeClass("was-validated"),e=n[0].checkValidity(),i=o.grid.gridPanel.validate(),e&&i?D():n.addClass("was-validated")}),f.on("change",function(t){null!=o?(F(),D()):J(f.val()),U()}),U(),a.on("click",function(t){q(!0)}),h.on("click",function(t){q(!1)});var j=Object.freeze({MUL:0,DIV:1});function T(t,e,i){return e==j.DIV?t/i:e==j.MUL?t*i:void 0}function V(t,e,i){t===Y?(v.val(O(e)),b.val(O(i))):(v.val(Math.round(e)),b.val(Math.round(i)))}function N(t,e){var i,n,s,r=f.val(),a=r===Y?(s=parseFloat(v.val()),i=parseFloat(b.val()),Math.min(Vs(s),Vs(i))):(s=parseInt(v.val()),i=parseInt(b.val()),Math.min(s,i));isNaN(s)||isNaN(i)||t==j.DIV&&a<100||(a=T(s,t,e),s=T(i,t,e),null==o?V(r,a,s):((i=K()).createMainGrid(),!0===function t(e,i,n,s){var r=!0,a=e==j.DIV?j.MUL:j.DIV;if(1==n.id){if(s.i_parent_start=1,s.j_parent_start=1,s.parent_grid_ratio=1,s.e_we=Math.floor(T(n.e_we,a,i)),s.e_sn=Math.floor(T(n.e_sn,a,i)),s.e_we<tt.minGridSize||s.e_sn<tt.minGridSize)return!1}else{s.parent_grid_ratio=n.parent_grid_ratio,s.i_parent_start=Math.max(Math.floor(T(n.i_parent_start,a,i)),tt.minNestGridPoints),s.j_parent_start=Math.max(Math.floor(T(n.j_parent_start,a,i)),tt.minNestGridPoints);var o=Math.max(Math.floor(T(n.i_delta_end,a,i)),tt.minNestGridPoints),a=Math.max(Math.floor(T(n.j_delta_end,a,i)),tt.minNestGridPoints);if(s.e_we=Math.floor((s.parent.e_we-o-s.i_parent_start)*n.parent_grid_ratio+1),s.e_sn=Math.floor((s.parent.e_sn-a-s.j_parent_start)*n.parent_grid_ratio+1),s.e_we<tt.minGridSize||s.e_sn<tt.minGridSize)return!1}for(var h=0;h<n.nests.length;h++){var l=new tt(s.domain,s,n.nests[h].id);s.nests.push(l),r=r&&t(e,i,n.nests[h],l)}return r}(t,e,o.grid,i.grid)&&(n=function(t,e){t.i_parent_start=e.i_parent_start,t.j_parent_start=e.j_parent_start,t.e_we=e.e_we,t.e_sn=e.e_sn;for(var i=0;i<t.nests.length;i++)n(t.nests[i],e.nests[i])},V(r,o.dx=a,o.dy=s),n(o.grid,i.grid),o.update())))}function O(t,e){return t.toFixed(e=e||3)}function I(t,e,i){null!=e?t.val(O(e,i)):t.val(null)}function W(){f.val(o.map_proj),I(_,o.ref_lat),I(G,o.ref_lon),I(g,o.truelat1),I(m,o.truelat2),I(y,o.stand_lon),V(o.map_proj,o.dx,o.dy),I(w,o.pole_lat),I(x,o.pole_lon)}function Z(){p.prop("disabled",1!=o.grid.nests.length)}function P(){o.grid.gridPanel=new uh(i,o.grid,function(t){Q("Error",t.error)},B.options),o.grid.on("wps:addnest",Z),o.grid.on("wps:removenest",Z),Z()}function H(){f.attr("disabled","disabled")}function J(t){t===Y?(L(v),L(b),v.val(localStorage.getItem(k+"dx.lat-lon")||.1),b.val(localStorage.getItem(k+"dy.lat-lon")||.1)):(S(v),S(b),v.val(localStorage.getItem(k+"dx")||12e3),b.val(localStorage.getItem(k+"dy")||12e3))}function K(){var t=new ch;return t.map_proj=f.val(),t}l.on("click",function(){N(j.DIV,2)}),d.on("click",function(){N(j.DIV,3)}),u.on("click",function(){N(j.MUL,2)}),c.on("click",function(){N(j.MUL,3)}),this.showNewDomain=function(){o=null,M=!1,r.parent().hide(),A(_),A(y),A(g),A(m),A(w),s.hide(),f.removeAttr("disabled");var t=localStorage.getItem(k+"map_proj")||"lambert";f.val(t),J(t),e.show(),R()},this.validateNewDomain=function(){return f[0].checkValidity()&&v[0].checkValidity()&&b[0].checkValidity()},this.createNewDomain=function(){return H(),o=K(),localStorage.setItem(k+"map_proj",o.map_proj),o.map_proj===Y?(o.dx=parseFloat(v.val()),o.dy=parseFloat(b.val()),localStorage.setItem(k+"dx.lat-lon",o.dx),localStorage.setItem(k+"dy.lat-lon",o.dy),o.pole_lat=90,o.pole_lon=0):(o.dx=parseInt(v.val(),10),o.dy=parseInt(b.val(),10),localStorage.setItem(k+"dx",o.dx),localStorage.setItem(k+"dy",o.dy)),o.createMainGrid(),o},this.show=function(t){t&&t!=o&&(o=t,M=!1),M||(P(),o.on("wps:change",W),o.on("remove",function(){B.hide()}),o.on("add",function(){P()}),H(),W(),F(),M=!0),r.parent().show(),s.show(),e.show(),R()},this.hide=function(){e.hide()}})),fh=(()=>r(function t(){var i=this,e=(X(this,t),this._container=$("div.modal#wps-save-dialog"),$("div.modal-body",this._container)),n=$("div.modal-footer",this._container),s=$("button#button-copy",n),n=$("button#button-download",n);this._wpsContent=$("textarea",e),s.on("click",function(t){navigator.clipboard.writeText(i._wpsContent.text())}),n.on("click",function(t){var e=new Blob([i._wpsContent.val()],{type:"text/plain;charset=utf-8"});saveAs(e,"namelist.wps",{autoBom:!0})})},[{key:"show",value:function(t){this._wpsContent.text(t.getWPSNamelist().toString()),this._container.modal()}}]))(),_h={mass:{sw:0,nw:1,ne:2,se:3},u:{sw:4,nw:5,ne:6,se:7},v:{sw:8,nw:9,ne:10,se:11},unstaggered:{sw:12,nw:13,ne:14,se:15}},Gr={exports:{}};oh||(oh=1,Ua=Gr,gh="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof T&&T.global===T?T:void 0,mh=gh.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),yh=gh.saveAs||("object"!=typeof window||window!==gh?function(){}:"download"in HTMLAnchorElement.prototype&&!mh?function(t,e,i){var n=gh.URL||gh.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?xh(s):wh(s.href)?bh(t,e,i):xh(s,s.target="_blank")):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){xh(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,i){var n,s,r;e=e||t.name||"download","string"!=typeof t?navigator.msSaveOrOpenBlob((s=t,void 0===(r=i)?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\ufeff",s],{type:s.type}):s),e):wh(t)?bh(t,e,i):((n=document.createElement("a")).href=t,n.target="_blank",setTimeout(function(){xh(n)}))}:function(t,e,i,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof t)return bh(t,e,i);var s,r,a,e="application/octet-stream"===t.type,i=/constructor/i.test(gh.HTMLElement)||gh.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);(o||e&&i||mh)&&"undefined"!=typeof FileReader?((s=new FileReader).onloadend=function(){var t=s.result,t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;");n?n.location.href=t:location=t,n=null},s.readAsDataURL(t)):(r=gh.URL||gh.webkitURL,a=r.createObjectURL(t),n?n.location=a:location.href=a,n=null,setTimeout(function(){r.revokeObjectURL(a)},4e4))}),gh.saveAs=yh.saveAs=yh,Ua.exports=yh);var gh,mh,yh,vh=Gr.exports;function bh(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){yh(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function wh(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&e.status<=299}function xh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(i)}}function Mh(t){return t?t.replace(/[\u00A0-\u9999<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}):""}function kh(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function Sh(i,n){moment.tz.names().forEach(function(t){var e=document.createElement("option");e.value=t,(e.innerText=t)==n&&(e.selected=!0),i.append(e)})}var Lh=(()=>{function n(t,e){if(X(this,n),this._options={onChange:null,valueUtc:null,displayTimeZone:null},e&&(this._options=Object.assign(this._options,e)),this._options.displayTimeZone||(this._options.displayTimeZone=kh()),this._input=t.querySelector("input"),!this._input)throw new Error("Error initializing date-time picker - INPUT element not found.");this._widget=t,this._init(t)}return r(n,[{key:"_init",value:function(t){var e=this,i=(this._dateTimePicker=$(t).datetimepicker({allowInputToggle:!0,showClose:!0,showClear:!0,showTodayButton:!0,format:n._format,timeZone:this.displayTimeZone,useCurrent:!0,icons:{date:"far fa-calendar-alt",time:"far fa-clock",clear:"far fa-trash-alt",close:"fas fa-times",today:"far fa-calendar-check"}}),this);this._dateTimePicker.on("dp.change",function(t){"function"==typeof i._options.onChange&&i._options.onChange.call(e,{sender:i,valueUtc:i.valueUtc})}),null!==this._options.valueUtc&&(this.valueUtc=this._options.valueUtc)}},{key:"show",value:function(){this._dateTimePickerObject.show()}},{key:"input",get:function(){return this._input}},{key:"widget",get:function(){return this._widget}},{key:"_dateTimePickerObject",get:function(){return this._dateTimePicker.data("DateTimePicker")}},{key:"_momentValueUtc",get:function(){return moment.tz(this._input.value,n._format,this.displayTimeZone).tz(n._utc)}},{key:"formatUtc",value:function(){return this._momentValueUtc.format(n._format)}},{key:"valueUtc",get:function(){return this._momentToNsDate(this._momentValueUtc)},set:function(t){var e=null,e="string"==typeof t?moment.tz(t,n._format,n._utc):moment.tz([t.year,t.month-1,t.day,t.hour,t.minute,t.second],n._utc);this._input.value=e.tz(this.displayTimeZone).format(n._format)}},{key:"displayTimeZone",get:function(){return this._options.displayTimeZone},set:function(t){var e=this.valueUtc;this._options.displayTimeZone=t,this._dateTimePickerObject.timeZone(t),this.valueUtc=e}},{key:"_momentToNsDate",value:function(t){t=t.toArray();return{year:t[0],month:t[1]+1,day:t[2],hour:t[3],minute:t[4],second:t[5]}}}])})(),Eh=(t(Lh,"_format","YYYY-MM-DD_HH:mm:ss"),t(Lh,"_utc","UTC"),(()=>{function z(t,e){X(this,z),this.options={jsonBaseUrl:"json",change:null,floatDigits:3,timeZone:null,onInitialize:null},e&&(this.options=Object.assign(this.options,e)),this.container=t,this.variables=null,this._ignoreVariables=null,this._variableSubstitutes={},this.readOnly={},this.userGuideLinks={},this.namelist=null;e=localStorage.getItem("".concat(z._localStorageKey,"_view"));this.view=e?JSON.parse(e):{groups:{}},this._dateTimePickers={}}return r(z,[{key:"max_dom",get:function(){var t;return null!=(t=null==(t=this.namelist.domains)?void 0:t.max_dom)?t:1}},{key:"timeZone",get:function(){return this.options.timeZone},set:function(e){this.options.timeZone=e;for(var t=0,i=Object.values(this._dateTimePickers);t<i.length;t++)for(var n=i[t],s=0,r=Object.values(n);s<r.length;s++)r[s].forEach(function(t){t.displayTimeZone=e})}},{key:"openNamelistWpsAsync",value:(n=C(G().mark(function t(e,i){var n,s,r;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this._empty(),this.namelist=null!=(n=this.namelist)?n:{},this._setReadOnlyNamelistValue("domains","max_dom",e.share.max_dom),this._setReadOnlyNamelistValue("domains","e_we",e.geogrid.e_we),this._setReadOnlyNamelistValue("domains","e_sn",e.geogrid.e_sn),this._setReadOnlyNamelistValue("domains","dx",Ws(e.geogrid.map_proj,e.geogrid.dx)),this._setReadOnlyNamelistValue("domains","dy",Ws(e.geogrid.map_proj,e.geogrid.dy)),s=[],r=1;r<=e.share.max_dom;r++)s.push(r);return this._setReadOnlyNamelistValue("domains","grid_id",s),this._setReadOnlyNamelistValue("domains","parent_id",e.geogrid.parent_id),this._setReadOnlyNamelistValue("domains","i_parent_start",e.geogrid.i_parent_start),this._setReadOnlyNamelistValue("domains","j_parent_start",e.geogrid.j_parent_start),this._setReadOnlyNamelistValue("domains","parent_grid_ratio",e.geogrid.parent_grid_ratio),t.next=16,this._initVariablesAsync();case 16:this._empty(),this._initEditorFields(i);case 18:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"openNamelistInputAsync",value:(i=C(G().mark(function t(e,i){var n,s,r,a,o,h,l,d,u,c,p,f,_,g;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this._empty(),t.next=4,this._initVariablesAsync();case 4:if(void 0===(s=new m(e)).domains)return result.errors.push("domains variable group not found in namelist"),t.abrupt("return");t.next=8;break;case 8:if(void 0===s.domains.max_dom)return result.errors.push("variable 'max_dom' not found in namelist"),t.abrupt("return");t.next=11;break;case 11:if(r=parseInt(s.domains.max_dom),isNaN(r))return n.push("variable 'max_dom' is not a valid integer"),t.abrupt("return");t.next=15;break;case 15:a=0,o=Object.keys(s);case 16:if(a<o.length){if(h=o[a],void 0===(l=this.variables[h]))return n.push("Unknown variable group ".concat(h)),t.abrupt("continue",42);t.next=22}else t.next=45;break;case 22:d=0,u=Object.keys(s[h]);case 23:if(d<u.length){if(c=u[d],void 0===(p=l[c]))return n.push("Unknown variable ".concat(c," in group ").concat(h)),t.abrupt("continue",39);t.next=29}else t.next=42;break;case 29:t.t0=p.entries,t.next=t.t0===z.entries.maxDom?32:t.t0===z.entries.maxEta?35:t.t0===z.entries.single?37:39;break;case 32:for(m.convertToArray(s[h],c);s[h][c].length<r;)s[h][c].push(s[h][c][0]);return t.abrupt("break",39);case 35:return m.convertToArray(s[h],c),t.abrupt("break",39);case 37:return Array.isArray(s[h][c])&&(s[h][c]=s[h][c][0]),t.abrupt("break",39);case 39:d++,t.next=23;break;case 42:a++,t.next=16;break;case 45:for(this.namelist=s,f=0,_=n;f<_.length;f++)g=_[f],console.warn(g);return this._initEditorFields(i),t.abrupt("return",{errors:0<n.length?n:null,hasErrors:0<n.length});case 49:case"end":return t.stop()}},t,this)})),function(t,e){return i.apply(this,arguments)})},{key:"toText",value:function(){for(var a=this,o="",h=0,l=Object.entries(this.variables);h<l.length;h++)(()=>{for(var t=H(l[h],2),e=t[0],i=[],n=0,s=Object.keys(t[1]);n<s.length;n++){var r=s[n];!0===a._isNamelistValueSet(e,r)&&i.push(r)}if(0===i.length)return;t=i.map(function(t){return a.namelist[e][t]}),t=m.formatSection(e,i,t),o+=t})();return o}},{key:"goToTop",value:function(){this.clearHighlight(),this.container.scrollIntoView()}},{key:"goToGroup",value:function(t){this.clearHighlight();t=this.container.querySelector('div.namelist-input-group[data-group="'.concat(t,'"]'));t&&(t.classList.add("namelist-input-group-highlight"),this._expandGroup(t),t.scrollIntoView())}},{key:"_expandGroup",value:function(t){this._toggleGroupHideUnset(t,!1),this._toggleGroupCollapse(t.querySelector("div.namelist-input-variables"),z.collpaseCommands.show),this._toggleGroupVariableHideUnset(t,!1)}},{key:"clearHighlight",value:function(){this.container.querySelectorAll("div.namelist-input-variable.namelist-input-variable-highlight").forEach(function(t){t.classList.remove("namelist-input-variable-highlight")}),this.container.querySelectorAll("div.namelist-input-group.namelist-input-group-highlight").forEach(function(t){t.classList.remove("namelist-input-group-highlight")})}},{key:"goToVariable",value:function(t){this.clearHighlight(),t in this._variableSubstitutes&&(t=this._variableSubstitutes[t]);var e,i,n=this.container.querySelector('div.namelist-input-variable[data-variable="'.concat(t,'"]'));n&&(n.classList.add("namelist-input-variable-highlight"),t=n.closest("div.namelist-input-variables.collapse"),e=n.closest("div.namelist-input-group"),!1===(i=t.classList.contains("show"))&&$(t).one("shown.bs.collapse",function(t){n.scrollIntoView()}),this._expandGroup(e),!0===i)&&n.scrollIntoView()}},{key:"collapseGroups",value:function(){this._toggleAllGroupsCollapse(z.collpaseCommands.hide)}},{key:"expandGroups",value:function(t){this._toggleAllGroupsCollapse(z.collpaseCommands.show)}},{key:"hideUnsetVariables",value:function(){this._toggleVariableHideUnset(!0)}},{key:"showUnsetVariables",value:function(){this._toggleVariableHideUnset(!1)}},{key:"hideUnsetGroups",value:function(){this._toggleAllGroupsHideUnset(!0)}},{key:"showUnsetGroups",value:function(){this._toggleAllGroupsHideUnset(!1)}},{key:"_toggleGroupCollapse",value:function(t,e){$(t).collapse(e);var i=t.previousSibling.querySelector('button[data-toggle="collapse"] i');switch(e){case z.collpaseCommands.hide:i.classList.remove(z.iconClass.open),i.classList.add(z.iconClass.collapsed);break;case z.collpaseCommands.show:i.classList.remove(z.iconClass.collapsed),i.classList.add(z.iconClass.open)}}},{key:"_toggleAllGroupsCollapse",value:function(e){var t,i=this;for(t in this.container.querySelectorAll("div.namelist-input-variables.collapse").forEach(function(t){i._toggleGroupCollapse(t,e)}),this.view.groups)this.view.groups[t].collapse=e===z.collpaseCommands.hide;this._storeView()}},{key:"_toggleGroupHideUnset",value:function(t,e){!0===e?t.classList.add("namelist-input-hide-unset"):t.classList.remove("namelist-input-hide-unset")}},{key:"_toggleAllGroupsHideUnset",value:function(e){var i=this;this.container.querySelectorAll("div.namelist-input-group").forEach(function(t){i._toggleGroupHideUnset(t,e)}),this.view.hideUnsetGroups=e,this._storeView()}},{key:"_toggleGroupVariableHideUnset",value:function(t,e){var i=t.querySelector(".namelist-input-variables");!0===e?i.classList.add("namelist-input-hide-unset"):i.classList.remove("namelist-input-hide-unset"),t.querySelector(".namelist-input-group-header").querySelector('input[name="switch-hide-unset"]').checked=e}},{key:"_toggleVariableHideUnset",value:function(e){var t,i=this;for(t in this.container.querySelectorAll("div.namelist-input-group").forEach(function(t){i._toggleGroupVariableHideUnset(t,e)}),this.view.groups)this.view.groups[t].hideUnsetVariables=e;this._storeView()}},{key:"_isNamelistValueSet",value:function(t,e){return void 0!==this.namelist[t]&&null!=this.namelist[t][e]}},{key:"_setNamelistValue",value:function(t,e,i){var n;this.namelist[t]=null!=(n=this.namelist[t])?n:{},this.namelist[t][e]=i}},{key:"_setReadOnlyNamelistValue",value:function(t,e,i){this._setNamelistValue(t,e,i),this.readOnly[t]=null!=(i=this.readOnly[t])?i:{},this.readOnly[t][e]=!0}},{key:"_isReadOnly",value:function(t,e){return void 0!==this.readOnly[t]&&!0===this.readOnly[t][e]}},{key:"_empty",value:function(){for(this._dateTimePickers={};this.container.firstChild&&this.container.removeChild(this.container.firstChild););}},{key:"_initVariablesAsync",value:(t=C(G().mark(function t(){var e,i,n,s,r,a,o,h,l,d,u,c,p,f,_,g,m,y,v,b,w,x,M,k,S,L,E,A,C,j,T,N,O,I,P=this;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this.variables)return t.abrupt("return");t.next=2;break;case 2:return this.variables={},t.next=5,this._loadJsonAsync("namelist.input.select.values.json");case 5:return e=t.sent,t.next=8,this._loadJsonAsync("namelist.input.users.guide.json");case 8:return i=t.sent,t.next=11,this._loadJsonAsync("namelist.input.registry.json");case 11:return n=t.sent,t.next=14,this._loadJsonAsync("namelist.input.readme.json");case 14:return s=t.sent,t.next=17,this._loadJsonAsync("namelist.input.manual.json");case 17:r=t.sent,t.t0=G().keys(n);case 19:if((t.t1=t.t0()).done){t.next=61;break}a=t.t1.value,this.variables[a]={},t.t2=G().keys(n[a]);case 23:(t.t3=t.t2()).done?t.next=59:(o=t.t3.value,h=null,(l=i[a]&&i[a][o])&&i[a][o].description?h=i[a][o].description:o.comments&&0<o.comments.length&&(h=o.comments.join("; ")),d=n[a][o].defaultValue,u=null,t.t4=n[a][o].entries,t.next="max_domains"===t.t4?33:t.t4===z.entries.single||t.t4===z.entries.maxEta||t.t4===z.entries.maxDom||t.t4===z.entries.maxBogus||t.t4===z.entries.maxMoves||t.t4===z.entries.maxOcean||t.t4===z.entries.maxPressureLevels||t.t4===z.entries.maxZLevels?35:37);break;case 33:return u=z.entries.maxDom,t.abrupt("break",39);case 35:return u=n[a][o].entries,t.abrupt("break",39);case 37:return console.warn("Unknown variable ".concat(o," number entries value ").concat(n[a][o].entries)),t.abrupt("continue",23);case 39:l&&i[a][o].entries!==u?(t.t5=o,t.next="dx"===t.t5||"dy"===t.t5?43:"eta_levels"===t.t5?45:"nssl_alphah"===t.t5||"nssl_alphahl"===t.t5||"nssl_cnoh"===t.t5||"nssl_cnohl"===t.t5||"nssl_cnor"===t.t5||"nssl_cnos"===t.t5||"nssl_rho_qh"===t.t5||"nssl_rho_qs"===t.t5?47:"topo_wind"===t.t5||"gph"===t.t5?49:"max_obs"===t.t5?51:53):t.next=54;break;case 43:return u=z.entries.single,t.abrupt("break",54);case 45:return u=z.entries.maxEta,t.abrupt("break",54);case 47:return u=z.entries.single,t.abrupt("break",54);case 49:return u=z.entries.maxDom,t.abrupt("break",54);case 51:return u=z.entries.single,t.abrupt("break",54);case 53:console.warn("Variable ".concat(o," number of entries differ between registry ").concat(u," and users guide ").concat(i[a][o].entries));case 54:this.variables[a][o]={type:n[a][o].type,defaultValue:d,description:h,entries:u},e[a]&&e[a][o]&&e[a][o].values&&(this.variables[a][o].type=z.variableTypes.selection,this.variables[a][o].values=e[a][o].values),a in z._dateTimePickers&&o in z._dateTimePickers[a]&&(this.variables[a][o].type=z.variableTypes.datetime),t.next=23;break;case 59:t.next=19;break;case 61:for(c in r)for(f in this.variables[c]=null!=(p=this.variables[c])?p:{},r[c])this.variables[c][f]=r[c][f];for(_={},g=0,m=Object.entries(this.variables);g<m.length;g++)(y=H(m[g],2))[0],y=y[1],Object.keys(y).forEach(function(t){_[t]=null});t.t6=G().keys(s);case 65:if((t.t7=t.t6()).done){t.next=84;break}(v=t.t7.value)in this.variables||console.warn("README.namelist group ".concat(v," not found in WRF registry files")),t.t8=G().keys(s[v]);case 69:(t.t9=t.t8()).done?t.next=82:(b=t.t9.value,t.t10=b,t.next="io_style_emiss"===t.t10?74:"inputout_begin_mo"===t.t10||"inputout_end_mo"===t.t10?75:"ntiedtke_dx_opt"===t.t10?76:77);break;case 74:case 75:case 76:return t.abrupt("continue",69);case 77:if(b in _){t.next=80;break}return console.warn("README.namelist variable ".concat(b," not found in WRF registry files")),t.abrupt("continue",69);case 80:t.next=69;break;case 82:t.next=65;break;case 84:for(w in this._setDefaultValue("domains","time_step",60),i)this.userGuideLinks[w]="https://www2.mmm.ucar.edu/wrf/users/wrf_users_guide/build/html/namelist_variables.html#".concat(w.replace("_","-"));this._ignoreVariables={},x=U(z._ignoreVariables);try{for(x.s();!(M=x.n()).done;)(k=M.value)in this._ignoreVariables||(this._ignoreVariables[k]=null)}catch(t){x.e(t)}finally{x.f()}for(this._variableSubstitutes={},S=0,L=Object.values(z._dateTimePickers);S<L.length;S++)for(E=L[S],A=0,C=Object.entries(E);A<C.length;A++)for(T=H(C[A],2),j=T[0],T=T[1],N=0,O=Object.values(T.variables);N<O.length;N++)"string"!=typeof(I=O[N])||I in this._ignoreVariables||I===j||(this._ignoreVariables[I]=null,this._variableSubstitutes[I]=j);"function"==typeof this.options.onInitialize&&this.options.onInitialize.call(this,{sender:this,variables:this.variables}),this.dependencyMap={},this.dependencyMap.physics={},this.dependencyMap.physics.sf_urban_physics={updates:["num_urban_ndm","num_urban_ng","num_urban_nwr","num_urban_nz","num_urban_ngb","num_urban_nf","num_urban_nbui"]},this.variables.physics.num_urban_ndm.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?2:1},this.variables.physics.num_urban_ng.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?10:1},this.variables.physics.num_urban_nwr.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?10:1},this.variables.physics.num_urban_nz.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?18:1},this.variables.physics.num_urban_ngb.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?10:1},this.variables.physics.num_urban_nf.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?10:1},this.variables.physics.num_urban_nbui.defaultValue=function(){var t=P.getValue("physics","sf_urban_physics")[0];return 2===t||3===t?15:1};case 102:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})},{key:"_loadJsonAsync",value:(e=C(G().mark(function t(e){var i;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(this.options.jsonBaseUrl,"/").concat(e),t.next=3,fetch(i);case 3:return i=t.sent,t.next=6,i.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_setDefaultValue",value:function(t,e,i){this.variables[t][e].defaultValue=i}},{key:"_getDefaultValue",value:function(t,e){return"function"!==K(this.variables[t][e].defaultValue)?this.variables[t][e].defaultValue:this.variables[t][e].defaultValue.call(this)}},{key:"_initEditorFields",value:function(t){var e={};"boolean"==typeof(e=t?Object.assign(e,t):e).hideUnsetGroups?this.view.hideUnsetGroups=e.hideUnsetGroups:this.view.hideUnsetGroups=null==(t=this.view.hideUnsetGroups)||t;for(var i=0,n=Object.entries(this.variables);i<n.length;i++){var s=H(n[i],2),r=s[0],s=s[1];0!==Object.keys(s).length&&this._initVariableGroup(r,s,e)}$(this.container).find("*[title]").tooltip(),this._storeView(),this._updateGroupView()}},{key:"_initVariableGroup",value:function(t,e,i){var n=this,s=this._append(this.container,"div"),i=(s.classList.add("namelist-input-group"),!0===this.view.hideUnsetGroups&&s.classList.add("namelist-input-hide-unset"),s.dataset.group=t,this.view.groups=null!=(r=this.view.groups)?r:{},this.view.groups[t]=null!=(r=this.view.groups[t])?r:{},"boolean"==typeof i.collapseGroups?this.view.groups[t].collapse=i.collapseGroups:this.view.groups[t].collapse=null!=(r=this.view.groups[t].collapse)&&r,this.view.groups[t].hideUnsetVariables="boolean"==typeof i.hideUnsetVariables?i.hideUnsetVariables:null==(r=this.view.groups[t].hideUnsetVariables)||r,!0===this.view.groups[t].collapse?z.iconClass.collapsed:z.iconClass.open),r=this._append(s,"div"),a=(r.classList.add("namelist-input-group-header"),""),a=(a+='<button class="btn btn-sm" type="button" data-toggle="collapse" data-target="#'.concat(t,'" aria-expanded="false" aria-controls="').concat(t,'"><i class="fas ').concat(i,'"></i></button>'))+"<h5>".concat(Mh(t),"</h5>")+'<span class="badge badge-pill namelist-input-set-variable-count" style="display: none;" title="Number of variables set in this group"></span>';t in this.userGuideLinks&&(a+='<a href="'.concat(Mh(this.userGuideLinks[t]),'" target="_blank" class="namelist-input-variables-user-guide-link ml-3" title="Open WRF User\'s Guide page for this group in a new tab"><i class="fas fa-info-circle"></i></a>')),a=(a+='<div class="namelist-input-group-header-switch"><label class="switch ml-2">')+'<input type="checkbox" name="switch-hide-unset" id="switch-hide-unset-'.concat(Mh(t),'"'),!0===this.view.groups[t].hideUnsetVariables&&(a+=" checked"),r.innerHTML=a=(a=a+'><span class="slider round"></span>'+"</label>")+"<span>Hide Unset</span>"+"</div>",r.querySelector('button[data-toggle="collapse"]').addEventListener("click",function(t){var e=t.currentTarget.querySelector("i"),t=t.currentTarget.dataset.target.replace("#","");e.classList.contains(z.iconClass.open)?(e.classList.remove(z.iconClass.open),e.classList.add(z.iconClass.collapsed),n.view.groups[t].collapse=!0):(e.classList.remove(z.iconClass.collapsed),e.classList.add(z.iconClass.open),n.view.groups[t].collapse=!1),n._storeView()}),r.querySelector("input#switch-hide-unset-".concat(t)).addEventListener("change",function(t){var e=t.currentTarget.closest(".namelist-input-group"),i=e.dataset.group,e=e.querySelector("div.namelist-input-variables");n.view.groups[i].hideUnsetVariables=t.currentTarget.checked,!0===t.currentTarget.checked?e.classList.add("namelist-input-hide-unset"):e.classList.remove("namelist-input-hide-unset"),n._storeView()}),this.namelist[t]=null!=(i=this.namelist[t])?i:{},this._appendGroupVariableFields(s,t,e)}},{key:"_updateGroupView",value:function(){this.container.querySelectorAll("div.namelist-input-group").forEach(function(t){var e=t.querySelectorAll("div.namelist-input-variable:not(.namelist-input-variable-unset)").length,i=t.querySelector("div.namelist-input-group-header span.namelist-input-set-variable-count");0<e?(i.innerText=e,i.style.display=null,t.classList.remove("namelist-input-group-unset")):(i.innerText="0",i.style.display="none",t.classList.add("namelist-input-group-unset"))})}},{key:"_storeView",value:function(){localStorage.setItem("".concat(z._localStorageKey,"_view"),JSON.stringify(this.view))}},{key:"_appendGroupVariableFields",value:function(t,e,i){var n=this._append(t,"div");n.classList.add("namelist-input-variables"),n.classList.add("collapse"),!1===this.view.groups[e].collapse&&n.classList.add("show"),this.view.groups[e].hideUnsetVariables&&n.classList.add("namelist-input-hide-unset"),n.id=e;for(var s=0,r=Object.entries(i);s<r.length;s++){var a=H(r[s],2),o=a[0];this._appendVariableField(n,e,o,a[1])}}},{key:"_appendVariableField",value:function(t,i,n,e){var a=this;if(n in this._ignoreVariables)console.debug("Skipping ignored variable ".concat(n));else{console.debug("Creating variable ".concat(n," input"));var s=this._append(t,"div"),r=(s.classList.add("namelist-input-variable"),s.dataset.default=this._getDefaultValue(i,n),s.dataset.variable=n,this._isNamelistValueSet(i,n)),o=this._isReadOnly(i,n),h=this.namelist[i],l=(!1===r&&s.classList.add("namelist-input-variable-unset"),"");switch(l+='<button class="btn btn-sm btn-outline-secondary btn-namelist-input-erase" type="button"',!0===o&&(s.classList.add("namelist-input-variable-readonly"),l+=" disabled"),l=l+'><i class="fas fa-eraser"></i></button>'+'<div class="namelist-input-variable-name">',e.type===z.variableTypes.datetime?z._dateTimePickers[i][n].title&&(l+=Mh(z._dateTimePickers[i][n].title)):l+=Mh(n),l+="</div>",e.entries){case z.entries.maxDom:for(var d=0;d<this.max_dom;d++)l+=this._getInputFieldHtml(n,e,r?h[n][d]:this._getDefaultValue(i,n),o,d);break;case z.entries.single:l+=this._getInputFieldHtml(n,e,r?h[n]:this._getDefaultValue(i,n),o,null);break;case z.entries.maxEta:}if(e.type===z.variableTypes.datetime?z._dateTimePickers[i][n].description&&(l=(l=(l+='<div class="namelist-input-variable-description">')+Mh(z._dateTimePickers[i][n].description))+" (".concat(Object.values(z._dateTimePickers[i][n].variables).join(", "),")")+"</div>"):e.description&&(l=(l+='<div class="namelist-input-variable-description">')+Mh(e.description)+"</div>"),s.innerHTML=l+="</div>",!0!==o)switch(s.querySelector("button.btn-namelist-input-erase").addEventListener("click",function(t){var t=t.currentTarget.closest("div.namelist-input-variable"),i=t.closest("div.namelist-input-group").dataset.group,n=t.dataset.variable;if(t.classList.add("namelist-input-variable-unset"),a.variables[i][n].type===z.variableTypes.datetime){for(var e in z._dateTimePickers[i][n].variables)a.namelist[i][z._dateTimePickers[i][n].variables[e]]=null;a._dateTimePickers[i][n].forEach(function(t,e){t.valueUtc=a._getNamelistDateTimeValueUtc(i,z._dateTimePickers[i][n].variables,e)})}else a.namelist[i][n]=null,a._updateVariableFieldValue(i,n),a._updateDependentVariables(i,n);a._fireChange(i,n)}),e.type){case z.variableTypes.selection:this._addVariableFieldListeners(s,"select",n,"change",function(t){return parseInt(t.value)});break;case z.variableTypes.logical:this._addVariableFieldListeners(s,"input",n,"change",function(t){return t.checked});break;case z.variableTypes.integer:this._addVariableFieldListeners(s,"input",n,"change",function(t){return parseInt(t.value)});break;case z.variableTypes.real:this._addVariableFieldListeners(s,"input",n,"change",function(t){return parseFloat(t.value)});break;case z.variableTypes.character:this._addVariableFieldListeners(s,"input",n,"change",function(t){return t.value});break;case z.variableTypes.datetime:s.querySelectorAll("div.namelist-input-datetime-picker").forEach(function(t,e){t=new Lh(t,{onChange:function(t){var t=t.sender.widget.closest("div.namelist-input-variable"),e=t.dataset.variable,i=t.closest("div.namelist-input-group").dataset.group;switch(t.classList.remove("namelist-input-variable-unset"),a.variables[i][e].entries){case z.entries.single:var n=a._dateTimePickers[i][e][0].valueUtc;for(s in z._dateTimePickers[i][e].variables)a._setNamelistValue(i,z._dateTimePickers[i][e].variables[s],n[s]);break;case z.entries.maxDom:var s,r=a._dateTimePickers[i][e].map(function(t){return t.valueUtc});for(s in z._dateTimePickers[i][e].variables)a._setNamelistValue(i,z._dateTimePickers[i][e].variables[s],r.map(function(t){return t[s]}))}a._fireChange(i,e)},displayTimeZone:a.options.timeZone,valueUtc:a._getNamelistDateTimeValueUtc(i,z._dateTimePickers[i][n].variables,e)});a._dateTimePickers[i]=null!=(e=a._dateTimePickers[i])?e:{},a._dateTimePickers[i][n]=null!=(e=a._dateTimePickers[i][n])?e:[],a._dateTimePickers[i][n].push(t)})}}}},{key:"_getNamelistDateTimeValueUtc",value:function(t,e,i){return{year:this._getNamelistVariableValue(t,e.year,this.variables[t][e.year],i),month:this._getNamelistVariableValue(t,e.month,this.variables[t][e.month],i),day:this._getNamelistVariableValue(t,e.day,this.variables[t][e.day],i),hour:this._getNamelistVariableValue(t,e.hour,this.variables[t][e.hour],i),minute:this._getNamelistVariableValue(t,e.minute,this.variables[t][e.minute],i),second:e.second?this._getNamelistVariableValue(t,e.second,this.variables[t][e.second],i):null}}},{key:"_getNamelistVariableValue",value:function(t,e,i,n){if(!0===this._isNamelistValueSet(t,e))switch(i.entries){case z.entries.maxDom:return this.namelist[t][e][n];case z.entries.single:return this.namelist[t][e]}return this._getDefaultValue(t,e)}},{key:"getValue",value:function(t,e){return!0===this._isNamelistValueSet(t,e)?this.namelist[t][e]:this._getDefaultValue(t,e)}},{key:"_updateVariableFieldValue",value:function(t,e){var i=this.variables[t][e],n=this._isNamelistValueSet(t,e);switch(i.entries){case z.entries.maxDom:for(var s=0;s<this.max_dom;s++)this._setInputFieldValue(t,e,i,n?this.namelist[t][e][s]:this._getDefaultValue(t,e),s);break;case z.entries.single:this._setInputFieldValue(t,e,i,n?this.namelist[t][e]:this._getDefaultValue(t,e),null);break;case z.entries.maxEta:}}},{key:"_setInputFieldValue",value:function(t,e,i,n,s){var r=this._getInputFieldId(e,s);switch(i.type){case z.variableTypes.selection:document.querySelector("select#".concat(r)).value=n;break;case z.variableTypes.logical:document.querySelector("input#".concat(r)).checked=n;break;case z.variableTypes.integer:case z.variableTypes.real:case z.variableTypes.character:document.querySelector("input#".concat(r)).value=n;break;case z.variableTypes.datetime:this._dateTimePickers[t][e][null!=s?s:0].valueUtc=this._getNamelistDateTimeValueUtc(t,z._dateTimePickers[t][e].variables,s)}}},{key:"_addVariableFieldListeners",value:function(t,s,e,i,r){var a=this;t.querySelectorAll("".concat(s,'[name="').concat(e,'"]')).forEach(function(t){t.addEventListener(i,function(t){var e=t.currentTarget.name,i=document.querySelector('div.namelist-input-variable[data-variable="'.concat(e,'"]')),n=i.closest("div.namelist-input-group").dataset.group;switch(i.classList.remove("namelist-input-variable-unset"),a.variables[n][e].entries){case z.entries.single:a._setNamelistValue(n,e,r.call(a,t.currentTarget));break;case z.entries.maxDom:a._setNamelistValue(n,e,a._listVariableFields(n,e,s).map(function(t){return r.call(a,t)}))}a._updateDependentVariables(n,e),a._fireChange(n,e)})})}},{key:"_updateDependentVariables",value:function(e,t){var i=this;e in this.dependencyMap&&t in this.dependencyMap[e]&&Array.isArray(this.dependencyMap[e][t].updates)&&this.dependencyMap[e][t].updates.forEach(function(t){i._updateVariableFieldValue(e,t)})}},{key:"_fireChange",value:function(t,e){"function"==typeof this.options.change&&this.options.change.call(this,{group:t,variable:e}),this._updateGroupView()}},{key:"_listVariableFields",value:function(t,e,i){var n=[];return document.querySelectorAll('div.namelist-input-group[data-group="'.concat(t,'"] div.namelist-input-variable[data-variable="').concat(e,'"] ').concat(i,"[name=").concat(e,"]")).forEach(function(t){n.push(t)}),n}},{key:"_getInputFieldId",value:function(t,e){return null!==e?"".concat(t,"_").concat(e):t}},{key:"_getInputFieldHtml",value:function(t,e,i,n,s){if(null==i)throw new Error("Variable ".concat(t," value is not defined"));var r='<div class="namelist-input-variable-value">',a=Mh(this._getInputFieldId(t,s)),o=Mh(t);switch(e.type){case z.variableTypes.selection:r+='<select class="form-control form-control-sm" id="'.concat(a,'" name="').concat(o,'"').concat(n?" readonly":""," required>");for(var h=0,l=Object.entries(e.values);h<l.length;h++){var d=H(l[h],2),u=d[0],d=d[1];r+='<option value="'.concat(u,'"'),null!==d&&u.toString()===d.toString()&&(r+=" selected"),r+=">".concat(u,": ").concat(d,"</option>")}r+="<select/>";break;case z.variableTypes.logical:r=(r=r+'<div class="namelist-input-variable-check">'+'<div class="form-check">')+'<input class="form-check-input" type="checkbox" id="'.concat(a,'" name="').concat(o,'"'),!0===n&&(r+=" readonly"),!0===i&&(r+=" checked"),r=(r+="/>")+"</div>"+"</div>";break;case z.variableTypes.integer:r=(r+='<input type="number" class="form-control form-control-sm" id="'.concat(a,'" name="').concat(o,'"'))+' value="'.concat(parseInt(i),'"'),!0===n&&(r+=" readonly"),r+=' step="1" required/>';break;case z.variableTypes.real:r=(r+='<input type="number" class="form-control form-control-sm" id="'.concat(a,'" name="').concat(o,'"'))+' value="'.concat(i.toFixed(this.options.floatDigits),'"'),!0===n&&(r+=" readonly"),r+=' step="0.001" required/>';break;case z.variableTypes.character:r+='<input type="text" class="form-control form-control-sm" id="'.concat(a,'" name="').concat(o,'"'),null!==i&&(r+=' value="'.concat(Mh(i),'"')),!0===n&&(r+=" readonly"),r+=" required />";break;case z.variableTypes.datetime:r=(r=(r=(r=(r+='<div class="input-group input-group-sm namelist-input-datetime-picker">')+'<input type="text" class="form-control" id="'.concat(a,'"')+">")+'<div class="input-group-addon input-group-append">'+'<div class="input-group-text">')+'<i class="far fa-calendar-alt"></i>'+"</div>")+"</div>"+"</div>";break;default:throw new Error("Unknown variable data type ".concat(e.type))}return r+"</div>"}},{key:"_append",value:function(t,e){e=document.createElement(e);return t.append(e),e}}]);var e,t,i,n})()),Ah=(t(Eh,"entries",t(t(t({maxDom:"max_dom",single:"1",maxEta:"max_eta",maxBogus:"max_bogus",maxMoves:"max_moves",maxOcean:"max_ocean"},"maxOcean","max_ocean"),"maxPressureLevels","max_plevs"),"maxZLevels","max_zlevs")),t(Eh,"variableTypes",{integer:"integer",logical:"logical",real:"real",character:"character",selection:"selection",datetime:"datetime"}),t(Eh,"_localStorageKey","_wrf_domain_wizard_namelist_input_editor"),t(Eh,"_dateTimePickers",{time_control:{start_year:{variables:{year:"start_year",month:"start_month",day:"start_day",hour:"start_hour",minute:"start_minute",second:"start_second"},description:"start time",title:"start time"},end_year:{variables:{year:"end_year",month:"end_month",day:"end_day",hour:"end_hour",minute:"end_minute",second:"end_second"},description:"end time",title:"end time"}}}),t(Eh,"_ignoreVariables",["julyr","julday","gmt"]),t(Eh,"collpaseCommands",{hide:"hide",show:"show"}),t(Eh,"iconClass",{collapsed:"fa-chevron-right",open:"fa-chevron-down"}),(()=>{function i(t){var v=this,t=(X(this,i),this.modal=document.getElementById("namelist-input-dialog"),this.header=this.modal.querySelector("div.modal-header"),this.body=this.modal.querySelector("div.modal-body"),this.footer=this.modal.querySelector("div.modal-footer"),this.editor=new Eh(this.body.querySelector("div#namelist-input-container"),Object.assign({change:function(t){v._updateText()},timeZone:null,onInitialize:function(t){for(var e=v.header.querySelector("select#go-to-group"),i=v.header.querySelector("select#go-to-variable"),n=[],s=[],r=0,a=Object.keys(t.variables);r<a.length;r++){var o=a[r];n.push(o);for(var h=0,l=Object.keys(t.variables[o]);h<l.length;h++){var d=l[h];s.push(d)}}n.sort(),s.sort();for(var u=0,c=n;u<c.length;u++){var p=c[u],f=document.createElement("option");f.value=p,f.innerText=p,e.append(f)}for(var _=0,g=s;_<g.length;_++){var m=g[_],y=document.createElement("option");y.value=m,y.innerText=m,i.append(y)}$(e).on("changed.bs.select",function(t){v.editor.goToGroup(e.value),i.value=null,$(i).selectpicker("refresh")}),$(e).selectpicker(),$(i).on("changed.bs.select",function(t){v.editor.goToVariable(i.value),e.value=null,$(e).selectpicker("refresh")}),$(i).selectpicker()}},t)),this.header.querySelector("button#go-to-top").addEventListener("click",function(t){v.editor.clearHighlight(),v._scrollToTop()}),this.text=this.body.querySelector("div#pane-namelist-input-text textarea"),this.original=this.body.querySelector("div#pane-namelist-input-original textarea"),this.footer.querySelector("#button-copy").addEventListener("click",function(t){navigator.clipboard.writeText(v.editor.toText())}),this.footer.querySelector("#button-save").addEventListener("click",function(t){var e=new Blob([v.editor.toText()],{type:"text/plain;charset=utf-8"});saveAs(e,"namelist.input",{autoBom:!0})}),this.tabErrors=document.getElementById("tab-namelist-input-errors").parentNode,this.tabOriginal=document.getElementById("tab-namelist-input-original").parentNode,localStorage.getItem("".concat(i._localStorageKey,"_view"))),e=(this.view=t?JSON.parse(t):{collapseGroups:!1,hideUnsetGroups:!0,hideUnsetVariables:!0},this.viewActions={collapseGroups:this.header.querySelector("#view-group-collapse-all"),expandGroups:this.header.querySelector("#view-group-expand-all"),showUnsetGroups:this.header.querySelector("#view-group-show-unset"),hideUnsetGroups:this.header.querySelector("#view-group-hide-unset"),showUnsetVariables:this.header.querySelector("#view-variables-show-unset"),hideUnsetVariables:this.header.querySelector("#view-variables-hide-unset")},this.viewActions.collapseGroups.addEventListener("click",function(t){v.view.collapseGroups=!0,v.editor.collapseGroups(),v._updateViewMenu()}),this.viewActions.expandGroups.addEventListener("click",function(t){v.view.collapseGroups=!1,v.editor.expandGroups(),v._updateViewMenu()}),this.viewActions.showUnsetGroups.addEventListener("click",function(t){v.view.hideUnsetGroups=!1,v.editor.showUnsetGroups(),v._updateViewMenu()}),this.viewActions.hideUnsetGroups.addEventListener("click",function(t){v.view.hideUnsetGroups=!0,v.editor.hideUnsetGroups(),v._updateViewMenu()}),this.viewActions.showUnsetVariables.addEventListener("click",function(t){v.view.hideUnsetVariables=!1,v.editor.showUnsetVariables(),v._updateViewMenu()}),this.viewActions.hideUnsetGroups.addEventListener("click",function(t){v.view.hideUnsetVariables=!0,v.editor.hideUnsetVariables(),v._updateViewMenu()}),this._updateViewMenu(),this.header.querySelector("#view-all").addEventListener("click",function(t){v.viewActions.expandGroups.click(),v.viewActions.showUnsetGroups.click(),v.viewActions.showUnsetVariables.click()}),this.header.querySelector("#view-min").addEventListener("click",function(t){v.viewActions.collapseGroups.click(),v.viewActions.hideUnsetGroups.click(),v.viewActions.hideUnsetVariables.click()}),this.header.querySelector("#view-compact").addEventListener("click",function(t){v.viewActions.expandGroups.click(),v.viewActions.hideUnsetGroups.click(),v.viewActions.hideUnsetVariables.click()}),this.header.querySelector("select#select-timezone"));Sh(e,kh()),$(e).on("changed.bs.select",function(t){v.editor.timeZone=e.value})}return r(i,[{key:"_scrollToTop",value:function(){this.body.scrollTop=0}},{key:"_storeView",value:function(){localStorage.setItem("".concat(i._localStorageKey,"_view"),JSON.stringify(this.view))}},{key:"_updateViewMenu",value:function(){!0===this.view.collapseGroups?(this.viewActions.collapseGroups.classList.add("dropdown-selected"),this.viewActions.expandGroups.classList.remove("dropdown-selected")):(this.viewActions.collapseGroups.classList.remove("dropdown-selected"),this.viewActions.expandGroups.classList.add("dropdown-selected")),!0===this.view.hideUnsetGroups?(this.viewActions.hideUnsetGroups.classList.add("dropdown-selected"),this.viewActions.showUnsetGroups.classList.remove("dropdown-selected")):(this.viewActions.hideUnsetGroups.classList.remove("dropdown-selected"),this.viewActions.showUnsetGroups.classList.add("dropdown-selected")),!0===this.view.hideUnsetVariables?(this.viewActions.hideUnsetVariables.classList.add("dropdown-selected"),this.viewActions.showUnsetVariables.classList.remove("dropdown-selected")):(this.viewActions.hideUnsetVariables.classList.remove("dropdown-selected"),this.viewActions.showUnsetVariables.classList.add("dropdown-selected")),this._storeView()}},{key:"_openDialog",value:function(){$(this.modal).modal("show"),this._scrollToTop()}},{key:"openNamelistWpsAsync",value:(n=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._resetTabs(),t.next=3,this.editor.openNamelistWpsAsync(e);case 3:this._updateText(),this._openDialog();case 5:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"openNamelistInputAsync",value:(e=C(G().mark(function t(e){var i;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._resetTabs(),this.original.value=e,this.tabOriginal.style.display=null,t.next=5,this.editor.openNamelistInputAsync(e,this.view);case 5:i=t.sent,this._openDialog(),this._updateText(),i.hasErrors&&this._showErrors(i.errors);case 9:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})},{key:"_resetTabs",value:function(){this.tabErrors.style.display="none",this.tabOriginal.style.display="none",$("#tab-namelist-input-editor").tab("show")}},{key:"_updateText",value:function(){this.text.value=this.editor.toText()}},{key:"_showErrors",value:function(t){this.tabErrors.style.display=null,this.tabErrors.querySelector("button").innerHTML='<span class="mr-1">Errors</span><span class="badge rounded-pill bg-danger text-white">'.concat(t.length,"</span>");var i=document.getElementById("pane-namelist-input-errors").querySelector("ul");i.innerHTML="",t.forEach(function(t){var e=document.createElement("li");e.classList.add("list-group-item"),e.innerHTML='<i class="fas fa-exclamation-circle text-danger"></i><span class="ml-1">'.concat(t,"</span>"),i.append(e)})}}]);var e,n})()),Ch=(t(Ah,"_localStorageKey","_wrf_domain_wizard_namelist_input_dialog"),(()=>r(function t(o,e,i){var n,s,h,r,a,l,d,u,c,p=this,f=(X(this,t),this.map=o,this),_=(this.options={jsonBaseUrl:"json",sampleBaseUrl:"samples",allowAnyFilename:!0,autoImageView:!1},i&&(this.options=Object.assign({},this.options,i)),n=$("#domains",e.getContainer()),r=new ph($("#container-wps-form",n),this.options),l=$("button#button-wps-new",n),i=$("button#button-wps-save",n),x=$("button#reset-domain",n),d=$("button#button-wps-open",n),$("button#save-png",n));function g(t){(h=new ch(s)).addTo(o),r.show(h),h.grid.select(),t&&(t=m(),o.fitBounds(h.grid.getBounds(),{paddingTopLeft:L.point(n.width()+n.offset().left,t.x),paddingBottomRight:L.point(t.x,t.y)}))}function m(){var t=o.getContainer();return L.point(.01*t.offsetWidth,.01*t.offsetHeight)}function y(t){if(!(t instanceof Gs||t instanceof Rs))throw t;Q("Invalid WPS Namelist",t.message)}u=$("input#file-open",n),c=$("#capture-image-dialog"),x.on("click",function(t){k(),g(!1)}),d.on("click",function(t){A(),u.click()});var v,b,w=new fh,x=(i.on("click",function(t){w.show(h)}),u.on("change",function(t){var e,i;t.target.files&&0!=t.target.files.length&&(!0!==p.options.allowAnyFilename&&"namelist.wps"!=t.target.files[0].name&&"wrfsi.nl"!=t.target.files[0].name?Q("File Open Error",'Only files with the name "namelist.wps" or "wrfsi.nl" can be opened!'):(e=new FileReader,i=t.target.files[0].name,e.onerror=function(t){Q("File Open Error","Unable to read file!")},e.onload=function(t){k();try{s="wrfsi.nl"==i?Bs.converFromWRFSIString(t.target.result):new Bs(t.target.result),g(!0)}catch(t){y(t)}},e.readAsText(t.target.files[0]),u.val(null)))}),_.on("click",function(t){if(null!==h){c.modal("show");for(var e=o.getContainer(),i=o.getCenter(),n=o.getZoom(),s=e.getElementsByClassName("leaflet-control"),r=[],a=0;a<s.length;a++)!1===s[a].hidden&&(r.push(s[a]),s[a].hidden=!0);!0===p.options.autoImageView&&o.fitBounds(h.grid.getBounds(),{padding:m()}),htmlToImage.toBlob(e).then(function(t){vh.saveAs(t,"domains.png")}).catch(function(t){Q("Create Image","Error creating an image")}).finally(function(){r.forEach(function(t){return t.hidden=!1}),!0===p.options.autoImageView&&o.setView(i,n),c.modal("hide")})}}),n[0].querySelector("button#button-namelist-input")),M=new Ah({jsonBaseUrl:this.options.jsonBaseUrl});function k(){h&&(h.remove(),a=h=null,0<f._geogridCornerMarkerGroups.length)&&f._geogridCornerMarkerGroups.forEach(function(t){t.remove()})}function S(t){r.validateNewDomain()&&(o.dragging.disable(),o.on("mousemove",E,this),o.on("mouseup",A,this),o.on("mouseout",A,this),a={startLatlng:t.latlng,startMarker:L.marker(t.latlng,{icon:L.divIcon({className:"grid-corner-icon"})}).addTo(o),endMarker:L.marker(t.latlng,{icon:L.divIcon({className:"grid-corner-icon"})}).addTo(o),drawPolygon:null,domainOnMap:!1},h=r.createNewDomain())}function E(t){var e=L.latLngBounds(a.startLatlng,t.latlng);null==a.drawPolygon?a.drawPolygon=L.polygon([e.getSouthWest(),e.getSouthEast(),e.getNorthEast(),e.getNorthWest()],{stroke:!0,color:"#3388ff",weight:1,opacity:1,dashArray:"3",fill:!1}).addTo(o):a.drawPolygon.setLatLngs([e.getSouthWest(),e.getSouthEast(),e.getNorthEast(),e.getNorthWest()]),a.endMarker.setLatLng(t.latlng),e=e.getCenter(),h.setDefaultValues(e.lat,e.lng),e=Math.round(o.distance(a.startLatlng,[a.startLatlng.lat,t.latlng.lng])/h.dxInMeters),t=Math.round(o.distance(a.startLatlng,[t.latlng.lat,a.startLatlng.lng])/h.dyInMeters),e<tt.minGridSize||t<tt.minGridSize?(h.remove(),r.hide(),a.domainOnMap=!1):(h.grid.e_we=e,h.grid.e_sn=t,a.domainOnMap?h.update():(h.addTo(o),a.domainOnMap=!0,r.show()))}function A(t){o.dragging.enable(),o.off("mousedown",S,this),o.off("mousemove",E,this),o.off("mouseup",A,this),o.off("mouseout",A,this),l.prop("disabled",!1),a?(null!=a.drawPolygon&&a.drawPolygon.remove(),a.startMarker.remove(),a.endMarker.remove(),a.domainOnMap?s=h.getWPSNamelist():h=s=null):r.hide()}x.addEventListener("click",C(G().mark(function t(){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.openNamelistWpsAsync(h.getWPSNamelist());case 2:case"end":return t.stop()}},t)}))),l.on("click",function(t){!function(){k(),l.prop("disabled",!0),o.on("mousedown",S,this),r.showNewDomain()}()}),this._geogridCornerMarkerGroups=[],location.hash&&(v=location.hash.substring(1),b="".concat(this.options.sampleBaseUrl,"/").concat(v,"/namelist.wps"),$.get(b,function(t){k();try{s=new Bs(t),e.open("domains"),g(!0),p._addGeogridCorners(v)}catch(t){y(t)}},"text").fail(function(){Q("File Load Error","Unable to load "+b)}))},[{key:"_addGeogridCorners",value:function(t){this._addGeogridGridCorners(t,1)}},{key:"_addGeogridGridCorners",value:function(t,e){var i=this,n="".concat(this.options.sampleBaseUrl,"/").concat(t,"/geo_em.d").concat(e.toString().padStart(2,"0"),".nc.json"),s=!1;return fetch(n).then(function(t){if(!0===t.ok)return t.json();throw new Error("Geogrid JSON file ".concat(n," not found"))}).then(function(t){s=!0;t=L.featureGroup([i._createGeogridCornerMarker(t,"sw"),i._createGeogridCornerMarker(t,"nw"),i._createGeogridCornerMarker(t,"ne"),i._createGeogridCornerMarker(t,"se")]);t.addTo(i.map),i._geogridCornerMarkerGroups.push(t)}).then(function(){i._addGeogridGridCorners(t,e+1)}).catch(function(t){!0===s?console.error(t):console.debug(t)}),s}},{key:"_createGeogridCornerMarker",value:function(t,e){return L.marker(L.latLng(t.corner_lats[_h.unstaggered[e]],t.corner_lons[_h.unstaggered[e]]),{icon:L.divIcon({className:"geogrid-corner-icon",iconSize:8}),zIndexOffset:100})}}]))());var jh=L.Control.Layers.extend({_localStorageKey:"_leaflet_persistent_layers",_layers:null,_currentBaseLayer:null,_overlays:null,_map:null,getCurrentLayer:function(){if(!this._currentBaseLayer){if(!this._layers)return null;var t=localStorage.getItem(this._localStorageKey+"_layer");t&&(this._currentBaseLayer=this._layers[t]),this._currentBaseLayer||(this._currentBaseLayer=this._getDefaultLayer())}return this._currentBaseLayer},_getDefaultLayer:function(){for(var t in this._layers)if(this._layers.hasOwnProperty(t))return this._layers[t];return null},_configZoom:function(){var t,e,i;this._currentBaseLayer&&(t=this._map.getZoom(),e=this._currentBaseLayer.options.minZoom||1,i=this._currentBaseLayer.options.maxZoom||13,this._map.setMinZoom(e),this._map.setMaxZoom(i),t<e?this._map.setZoom(e):i<t&&this._map.setZoom(i))},onAdd:function(t){var e=this;return(this._map=t).on("baselayerchange",function(t){localStorage.setItem(e._localStorageKey+"_layer",t.name),e._currentBaseLayer=e._layers[t.name],e._configZoom()}),this._configZoom(),L.Control.Layers.prototype.onAdd.call(this,t)},onRemove:function(t){t.off("baselayerchange")},initialize:function(t,e,i){this._layers=t,this._overlays=e,this._currentBaseLayer=this.getCurrentLayer(),L.Control.Layers.prototype.initialize.call(this,t,e,i)}});var j=L.GeoJSON.extend({getFeatureFilename:function(t){return t.properties.filename},getDownloadUrl:function(t,e){return e},data:null,_downloadedLayers:null,clearDownloaded:function(){null!=this._downloadedLayers&&($.each(this._downloadedLayers,function(){this.feature.downloaded=!1,this.setStyle({fillColor:null,fillOpacity:j.FillOpacity})}),this._downloadedLayers=null)},onAdd:function(t){var e,i;null==t.spin?this.addData(this.data):(t.spin(!0),setTimeout((e=this,i=t,function(){e.addData(e.data),i.spin(!1)}),1))},onRemove:function(t){this.clearLayers(this.data)},initialize:function(t,e){var r=this;null==e&&(j.CurrentColor>=j.Colors.length&&(j.CurrentColor=0),e=j.Colors[j.CurrentColor],j.CurrentColor++),L.setOptions(this,{style:{weight:j.Weight,fillOpacity:j.FillOpacity,color:e},onEachFeature:function(e,i){var t,n,s;i.on("mouseover",function(t){e.downloaded?i.setStyle({weight:3*j.Weight}):i.setStyle({weight:3*j.Weight,fillOpacity:3*j.FillOpacity})}),i.on("mouseout",function(t){e.downloaded?i.setStyle({weight:j.Weight}):i.setStyle({weight:j.Weight,fillOpacity:j.FillOpacity})}),e.downloaded&&i.setStyle({fillColor:j.ColorDownloaded,fillOpacity:3*j.FillOpacity}),(n=r.getFeatureFilename(e))&&(s=r.getDownloadUrl(e,n),i.bindTooltip(n,{sticky:!0,className:"tooltip-srtm"}),t='<div class="popup-elevation-data"><table>',null!=r.options.attribution&&(t+="<tr><td>Source:</td><td>"+r.options.attribution+"</td></tr>"),void 0!==r.registrationUrl&&(t+='<tr><td>Registration:</td><td><i class="fas fa-shield-alt text-danger"></i> <a href="'+r.registrationUrl+'" target="_blank">'+r.registrationUrl+"</a></td></tr>"),i.bindPopup(t=t+("<tr><td>Filename:</td><td>"+n+"</td></tr>")+('</table><a class="btn btn-outline-secondary btn-sm" role="button" href="'+s+'" target="_blank">Download</a></div>')),i.on("popupopen",function(t){$("div.popup-elevation-data a",t.popup.getElement()).on("click",{popup:t.popup,layer:t.sourceTarget,downloadUrl:s,feature:e},function(t){t.data.feature.downloaded=!0,t.data.layer.setStyle({fillColor:j.ColorDownloaded,fillOpacity:3*j.FillOpacity}),null==r._downloadedLayers&&(r._downloadedLayers=[]),t.data.layer.feature=t.data.feature,r._downloadedLayers.push(t.data.layer),t.data.layer.closePopup(),t.data.layer.fire("elevationDataDownload",{downloadUrl:s,filename:n,feature:t.data.feature,layer:t.data.layer,source:r},!0)})}))}}),L.GeoJSON.prototype.initialize.call(this,null,this.options),$.getJSON(t,function(t){r.data=t})}}),Th=(j.Colors=["#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],j.ColorDownloaded="#e41a1c",j.CurrentColor=0,j.Weight=1,j.FillOpacity=.1,j.extend({attribution:'Provided by Japan Aerospace Exploration Agency (JAXA), product <a href="https://www.eorc.jaxa.jp/ALOS/en/aw3d30/" target="_blank">aw3d30</a>.',downloadBaseUrl:"ftp://ftp.eorc.jaxa.jp/",registrationUrl:"https://www.eorc.jaxa.jp/ALOS/en/aw3d30/registration.htm",getFeatureFilename:function(t){return t.properties.filename},getDownloadUrl:function(t,e){return this.downloadBaseUrl+t.properties.path+"/"+e},initialize:function(t,e){L.setOptions(this,{attribution:this.attribution}),j.prototype.initialize.call(this,t,e)}}));var Nh=j.extend({attribution:'Jarvis A., H.I. Reuter, A. Nelson, E. Guevara, 2008, Hole-filled seamless SRTM data V4, International Centre for Tropical Agriculture (CIAT), available from <a href="http://srtm.csi.cgiar.org" target="_blank">http://srtm.csi.cgiar.org</a>.',downloadBaseUrl:"http://srtm.csi.cgiar.org/wp-content/uploads/files/",downloadFolderByTileSize:{5:"srtm_5x5",30:"srtm_30x30"},downloadFolderByType:{TIFF:"TIFF",ASCII:"ASCII"},getFeatureFilename:function(t){return t.properties.SUFF_NAME&&"_"==t.properties.SUFF_NAME[0]?t.properties.SUFF_NAME.substring(1):t.properties.SUFF_NAME},getDownloadUrl:function(t,e){return this.downloadBaseUrl+e},initialize:function(t,e,i,n){if(e=e.toUpperCase().trim(),!this.downloadFolderByTileSize[i])throw"Invalid SRTM-CSI tile size";if(this.downloadBaseUrl+=this.downloadFolderByTileSize[i]+"/",!this.downloadFolderByType[e])throw"Invalid SRTM-CSI type";this.downloadBaseUrl+=this.downloadFolderByType[e]+"/",L.setOptions(this,{attribution:this.attribution}),j.prototype.initialize.call(this,t,n)}});function Oh(t,e,i,n){return new Nh(t,e,i,n)}var Ih=j.extend({downloadBaseUrl:"https://e4ftl01.cr.usgs.gov/MEASURES/",registrationUrl:"https://urs.earthdata.nasa.gov/",getDownloadUrl:function(t,e){return this.downloadBaseUrl+e},initialize:function(t,e,i){var n;switch(e){case 1:n="SRTMGL1.003",L.setOptions(this,{attribution:'NASA JPL.NASA Shuttle Radar Topography Mission Global 1 arc second. 2013, distributed by NASA EOSDIS Land Processes DAAC, <a href="https://doi.org/10.5067/MEaSUREs/SRTM/SRTMGL1.003" target="_blank">https://doi.org/10.5067/MEaSUREs/SRTM/SRTMGL1.003</a>.'});break;case 3:n="SRTMGL3.003",L.setOptions(this,{attribution:'NASA JPL.NASA Shuttle Radar Topography Mission Global 3 arc second. 2013, distributed by NASA EOSDIS Land Processes DAAC, <a href="https://doi.org/10.5067/MEaSUREs/SRTM/SRTMGL3.003" target="_blank">https://doi.org/10.5067/MEaSUREs/SRTM/SRTMGL3.003</a>.'});break;default:throw"Invalid arc second dimension. Allowed values are 1 and 3"}this.downloadBaseUrl=this.downloadBaseUrl+n+"/2000.02.11/",j.prototype.initialize.call(this,t,i)}});function Ph(t,e,i){return new Ih(t,e,i)}var zh=L.Control.extend({options:{position:"bottomleft",precision:4,contextMenu:!1},initialize:function(t){L.Control.prototype.initialize.call(this,t)},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-bar leaflet-touch leaflet-control leaflet-control-coordinates"),i=(this.latElement=L.DomUtil.create("div",null,t),this.lngElement=L.DomUtil.create("div",null,t),this);return e.on("mousemove",function(t){i.setCoordinates(t.latlng)}),!0===this.options.contextMenu&&e.on("contextmenu",function(t){i.popup&&i.popup.isOpen()&&i.popup.remove(),i.popup=L.popup().setLatLng(t.latlng).setContent("lat/lon: "+t.latlng.lat.toFixed(i.options.precision)+", "+t.latlng.lng.toFixed(i.options.precision)).openOn(e)}),i.setCoordinates(e.getCenter()),t},_addText:function(t,e){return t},setCoordinates:function(t){L.DomUtil.get(this.latElement).innerHTML="<span>lat: </span>"+t.lat.toFixed(this.options.precision),L.DomUtil.get(this.lngElement).innerHTML="<span>lon: </span>"+t.lng.toFixed(this.options.precision)}});qa=r(function t(e){X(this,t);e=Object.assign({},{div:null,jsonBaseUrl:"json"},e);if(!e.div||!e.div.length||1!=e.div.length)throw"invalid div option";var i,n,s={noWrap:!0,bounds:L.latLngBounds([-90,-180],[90,180])},s=(s={"Esri World Topo":L.tileLayer.provider("Esri.WorldTopoMap",s),"Esri World Street":L.tileLayer.provider("Esri.WorldStreetMap",s),"Esri NatGeo":L.tileLayer.provider("Esri.NatGeoWorldMap",s),"Esri World Imagery":L.tileLayer.provider("Esri.WorldImagery",s),"Open Topo Map":L.tileLayer.provider("OpenTopoMap",s),"Open Street Map":L.tileLayer.provider("OpenStreetMap",s)},new jh(s,null,{position:"topright"})),r=L.map(e.div[0],{layers:[s.getCurrentLayer()],center:[0,0],zoomControl:!1,zoom:Math.max(s.getCurrentLayer().options.minZoom,3)}),s=(s.addTo(r),L.control.sidebar({autopan:!1,closeButton:!1,container:"sidebar",position:"left",open:!0}).addTo(r)),a=$('ul[role="tablist"] li',s.getContainer());a.tooltip(),s.on("content",function(t){a.tooltip("hide")}),s.domains=(i={jsonBaseUrl:e.jsonBaseUrl,sampleBaseUrl:e.sampleBaseUrl},new Ch(r,s,i)),s.settings=(i={jsonBaseUrl:e.jsonBaseUrl},new rt(r,s,i)),s["geographic-files"]=new zs(r,s.getContainer().querySelector("#geographic-files")),s.elevation=new nt(r,s),s.elevation.addElevationDataOverlay("SRTM-CSI 90m (5x5,TIFF)",Oh("".concat(e.jsonBaseUrl,"/srtm/csi/srtm30_5x5.json"),"TIFF",5)),s.elevation.addElevationDataOverlay("SRTM-CSI 90m (30x30,TIFF)",Oh("".concat(e.jsonBaseUrl,"/srtm/csi/srtm30_30x30.json"),"TIFF",30)),s.elevation.addElevationDataOverlay("SRTM NASA v3, 1 arc second (~30m)",Ph("".concat(e.jsonBaseUrl,"/srtm/nasa/SRTMGL1.003.json"),1)),s.elevation.addElevationDataOverlay("SRTM NASA v3, 3 arc second (~90m)",Ph("".concat(e.jsonBaseUrl,"/srtm/nasa/SRTMGL3.003.json"),3)),s.elevation.addElevationDataOverlay("ALOS World 3D - 30m (AW3D30)",(i="".concat(e.jsonBaseUrl,"/srtm/alos/AW3D30.json"),new Th(i,n))),s.open("domains"),L.control.zoom({position:"topright"}).addTo(r),L.control.scale({maxWidth:240,metric:!0,imperial:!0,position:"bottomright"}).addTo(r),new zh({position:"bottomright"}).addTo(r),L.DomUtil.addClass(r._container,"cursor-crosshair")}),Va=(()=>{return r(function t(e){var i=this;X(this,t),this.loader=document.getElementById("page-loader"),this.dialog=new Ah(e),this.githubExampleList=document.getElementById("github-examples"),this.buttonOpen=document.getElementById("button-open"),this.buttonOpen.addEventListener("click",function(t){i.inputFile.value=null,i.inputFile.click()}),this.inputFile=document.getElementById("file-open"),this.inputFile.addEventListener("change",function(t){var e;t.target.files&&0!=t.target.files.length&&((e=new FileReader).onload=(()=>{var e=C(G().mark(function t(e){return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.dialog.openNamelistInputAsync(e.target.result);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Q("Error","Error opening namelist.input file '".concat(e.target.files[0],"'."));case 8:case"end":return t.stop()}},t,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}})(),e.readAsText(t.target.files[0]),i.inputFile.value=null)})},[{key:"loadGitHubExamplesAsync",value:(t=C(G().mark(function t(){var e,i,n,s,r,a,o=this;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loader.style.display="block",this.githubExampleList.style.display="none",this.githubExampleList.querySelectorAll("button").forEach(function(t){return t.remove()}),t.next=6,fetch("https://api.github.com/repos/wrf-model/WRF/git/trees/master?recursive=1");case 6:return e=t.sent,t.next=9,e.json();case 9:e=t.sent,i=0,n=U(e.tree),t.prev=12,n.s();case 14:if((r=n.n()).done){t.next=32;break}if(void 0!==(s=r.value).type&&void 0!==s.path&&"blob"===s.type.toLowerCase()&&s.path.toLowerCase().startsWith("test/em_real/namelist.input")){t.next=18;break}return t.abrupt("continue",30);case 18:r=document.createElement("button"),this.githubExampleList.append(r),r.type="button",r.dataset.path=s.path,r.dataset.file=s.path.substring(s.path.lastIndexOf("/")+1).toLowerCase(),r.dataset.url=s.url,r.innerText=s.path,r.classList.add("list-group-item"),r.classList.add("list-group-item-action"),i%2!=0&&r.classList.add("list-group-item-secondary"),i+=1,r.addEventListener("click",(()=>{var e=C(G().mark(function t(e){var i,n,s,r;return G().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=(i=e.currentTarget)?i:e.target,void 0===(n=i.dataset.content))return s=i.dataset.url,t.next=6,fetch(s);t.next=12;break;case 6:return s=t.sent,t.next=9,s.json();case 9:r=t.sent,n=r.content,i.dataset.content=n;case 12:return t.prev=12,t.next=15,o.dialog.openNamelistInputAsync(atob(n));case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(12),console.error(t.t0),Q("Error","Error opening example namelist.input file '".concat(i.dataset.path,"'."));case 21:case"end":return t.stop()}},t,null,[[12,17]])}));return function(t){return e.apply(this,arguments)}})());case 30:t.next=14;break;case 32:t.next=37;break;case 34:t.prev=34,t.t0=t.catch(12),n.e(t.t0);case 37:return t.prev=37,n.f(),t.finish(37);case 40:this.githubExampleList.style.display="block",this.loader.style.display="none",(a=null==(a=location.hash)?void 0:a.toLowerCase())&&a.startsWith("#namelist.")&&null!=(a=this.githubExampleList.querySelector('button[data-file="'.concat(a.substring(1),'"]')))&&a.click();case 44:case"end":return t.stop()}},t,this,[[12,34,37,40]])})),function(){return t.apply(this,arguments)})}]);var t})();N.DomainWizard=qa,N.NamelistDateTimePicker=Lh,N.NamelistInputPage=Va,N.appendTimeZoneSelectOptions=Sh,N.enableGlobalErrorHandler=function(){window.onerror=function(t,e,i,n,s){var r,a,o,h,l;t&&e&&s&&s.stack&&!e.toLowerCase().includes("/lib/")&&(r=document.getElementById("message-box-dialog-templates").querySelector('div[template="'.concat("global-error",'"]')),ot.empty().title("Unexpected Error",at.types.error).html(r.innerHTML),a=(a="")+"Error: ".concat(t,"\n"),a=(a+="Timestamp: ".concat((new Date).toISOString(),"\n"))+"Source: ".concat(e,"\n"),a=(a=a+"Line: ".concat(i,"\n")+"Stack:\n")+"".concat(s.stack),ot.dialogBody.querySelector('textarea[name="error-details"]').value=a,o="Error: "+t+" @ "+e+":"+i,h=ot.dialogBody.querySelector("a#create-github-issue"),l=ot.dialogBody.querySelector("form"),h.addEventListener("click",function(t){var e=l.checkValidity();l.classList.add("was-validated"),!0===e?(e="Repro Steps:\n",e+=ot.dialogBody.querySelector('textarea[name="repro-steps"]').value,e=e+"\n\n"+a,h.href="https://github.com/JiriRichter/WRFDomainWizard/issues/new?labels=bug&title=".concat(encodeURI(o),"&body=").concat(encodeURI(e))):(t.preventDefault(),t.stopPropagation())}),ot.open())}},N.errorMessageBox=Q});